<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-frontend docs-doc-id-JavaScript/ES6">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">ES6 | note</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hijulien.github.io/hijulien/frontend/JavaScript/ES6"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-frontend-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-frontend-current"><meta data-rh="true" property="og:title" content="ES6 | note"><meta data-rh="true" name="description" content="1. var  let  const"><meta data-rh="true" property="og:description" content="1. var  let  const"><link data-rh="true" rel="icon" href="/hijulien/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hijulien.github.io/hijulien/frontend/JavaScript/ES6"><link data-rh="true" rel="alternate" href="https://hijulien.github.io/hijulien/frontend/JavaScript/ES6" hreflang="zh"><link data-rh="true" rel="alternate" href="https://hijulien.github.io/hijulien/frontend/JavaScript/ES6" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/hijulien/blog/rss.xml" title="note RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/hijulien/blog/atom.xml" title="note Atom Feed"><link rel="stylesheet" href="/hijulien/assets/css/styles.d03fc8fd.css">
<link rel="preload" href="/hijulien/assets/js/runtime~main.e5b26454.js" as="script">
<link rel="preload" href="/hijulien/assets/js/main.44331553.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/hijulien/"><div class="navbar__logo"><img src="/hijulien/img/julien.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/hijulien/img/julien.jpg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Hi Julien</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/hijulien/frontend/JavaScript">frontend</a><a class="navbar__item navbar__link" href="/hijulien/backend/Linux">backend</a><a class="navbar__item navbar__link" href="/hijulien/others/Git">others</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" path="docs/something" href="/hijulien/docs/第 1 章 内存与数据结构">小专栏</a><a href="https://github.com/hijulien/notes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>ES6</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-var--let--const">1. var  let  const<a href="#1-var--let--const" class="hash-link" aria-label="1. var  let  const的直接链接" title="1. var  let  const的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">var:有变量提升，有初始化提升，值可变。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let:有变量提升，无初始化提升，值可变。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const:有变量提升，无初始化提升，值不可变，如果定义的是对象，属性值可变。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2默认参数">2.默认参数<a href="#2默认参数" class="hash-link" aria-label="2.默认参数的直接链接" title="2.默认参数的直接链接">​</a></h2><p>如果有参数传不进来的情况，可使用默认参数</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> function fn(name, age) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      var name = name || &#x27;9527&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      var age = age || 18;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      console.log(name, age);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fn(); // 9527 18</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function fn(name = &#x27;9527&#x27;, age = 18) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            console.log(name, age);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn(); // 9527 18</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn(&#x27;至尊宝&#x27;, 22); // 至尊宝  22</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3扩展运算符">3.扩展运算符<a href="#3扩展运算符" class="hash-link" aria-label="3.扩展运算符的直接链接" title="3.扩展运算符的直接链接">​</a></h2><p>合并数组</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> const arr1 = [1, 2, 4];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> const arr2 = [4, 5, 7];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log([...arr1, ...arr2]);//[1,2,4,4,5,7]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4剩余参数">4.剩余参数<a href="#4剩余参数" class="hash-link" aria-label="4.剩余参数的直接链接" title="4.剩余参数的直接链接">​</a></h2><p>传入参数数量不确定，可以使用剩余参数</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">function fn(name, ...params) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(name)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(params)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn(&#x27;9527&#x27;, 1, 2) // 9527 [ 1, 2 ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn(&#x27;9527&#x27;, 1, 2, 3, 4, 5) // 9527 [ 1, 2, 3, 4, 5 ]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5模板字符串">5.模板字符串<a href="#5模板字符串" class="hash-link" aria-label="5.模板字符串的直接链接" title="5.模板字符串的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> let name = &quot;9527&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> let gril = &quot;qiuxiang&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(`${name} love ${gril}`); // 9527 love qiuxiang</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6箭头函数">6.箭头函数<a href="#6箭头函数" class="hash-link" aria-label="6.箭头函数的直接链接" title="6.箭头函数的直接链接">​</a></h2><p>箭头函数与普通函数的区别</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.箭头函数不可做构造函数，不能使用new</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2.箭头函数没有自己的this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3.箭头函数没有arguments对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4.箭头函数没有原型对象</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7promise">7.Promise<a href="#7promise" class="hash-link" aria-label="7.Promise的直接链接" title="7.Promise的直接链接">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="71-promise">7.1 Promise<a href="#71-promise" class="hash-link" aria-label="7.1 Promise的直接链接" title="7.1 Promise的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Promise 必须为以下三种状态之一：等待态（Pending）、执行态（Fulfilled）和拒绝态（Rejected）。一旦Promise 被 resolve 或 reject，不能再迁移至其他任何状态（即状态 immutable）。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1. 初始化 Promise 状态（pending）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2. 立即执行 Promise 中传入的 fn 函数，将Promise 内部 resolve、reject 函数作为参数传递给 fn ，按事件机制时机处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3. 执行 then(..) 注册回调处理数组（then 方法可被同一个 promise 调用多次）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4. Promise里的关键是要保证，then方法传入的参数 onFulfilled 和 onRejected，必须在then方法被调用的那一轮事件循环之后的新执行栈中执行。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">成功状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function requestData() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 模拟请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          resolve(&#x27;9527&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }, 1000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   requestData().then(res =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   console.log(res) // 一秒钟后输出 &#x27;9527&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }, err =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            console.log(err)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 失败状态</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> function requestData () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 模拟请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      reject(&#x27;错误啦&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, 1000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">requestData().then(res =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(res)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}, err =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(err) // 一秒钟后输出 &#x27;错误啦&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="72-then">7.2 then()<a href="#72-then" class="hash-link" aria-label="7.2 then()的直接链接" title="7.2 then()的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">then中传了两个参数，then方法可以接受两个参数，第一个对应resolve的回调，第二个对应reject的回调。所以我们能够分别拿到他们传过来的数据。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="73-catch">7.3 catch()<a href="#73-catch" class="hash-link" aria-label="7.3 catch()的直接链接" title="7.3 catch()的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">和then的第二个参数一样，用来指定reject的回调。用法是这样：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p.then((data) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(&#x27;resolved&#x27;,data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}).catch((err) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(&#x27;rejected&#x27;,err);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">效果和写在then的第二个参数里面一样。不过它还有另外一个作用：在执行resolve的回调（也就是上面then中的第一个参数）时，如果抛出异常了（代码出错了），那么并不会报错卡死js，而是会进到这个catch方法中。请看下面的代码：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p.then((data) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(&#x27;resolved&#x27;,data);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(somedata); //此处的somedata未定义</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.catch((err) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(&#x27;rejected&#x27;,err);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">在resolve的回调中，我们console.log(somedata);而somedata这个变量是没有被定义的。如果我们不用Promise，代码运行到这里就直接在控制台报错了，不往下运行了。但是在这里，会得到这样的结果：</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="C:%5CUsers%5C15488%5CDesktop%5Cnode%5Cimages%5Ccatch.png" alt="C:\Users\15488\Desktop\node\images\catch.png" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">也就是说进到catch方法里面去了，而且把错误原因传到了reason参数中。即便是有错误的代码也不会报错了，这与我们的try/catch语句有相同的功能</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="74-all">7.4 all()<a href="#74-all" class="hash-link" aria-label="7.4 all()的直接链接" title="7.4 all()的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">接收一个Promise数组，数组中如有非Promise项，则此项当做成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如果所有Promise都成功，则返回成功结果数组</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如果有一个Promise失败，则返回这个失败结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 如果全都为成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function fn(time) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(88)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      resolve(`${time}毫秒后我成功啦！！！`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Promise.all([fn(2000), fn(3000), fn(1000)]).then(res =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 3秒后输出 [ &#x27;2000毫秒后我成功啦！！！&#x27;, &#x27;3000毫秒后我成功啦！！！&#x27;, &#x27;1000毫秒后我成功啦！！！&#x27; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(res) </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}, err =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(err)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 如果有一个失败</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function fn(time, isResolve) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      isResolve ? resolve(`${time}毫秒后我成功啦！！！`) : reject(`${time}毫秒后我失败啦！！！`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Promise.all([fn(2000, true), fn(3000), fn(1000, true)]).then(res =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(res)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}, err =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(err) // 3秒后输出 &#x27;3000毫秒后我失败啦！！！&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="75-race">7.5 race()<a href="#75-race" class="hash-link" aria-label="7.5 race()的直接链接" title="7.5 race()的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">接收一个Promise数组，数组中如有非Promise项，则此项当做成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">哪个Promise最快得到结果，就返回那个结果，无论成功失败</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function fn(time, isResolve) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      isResolve ? resolve(`${time}毫秒后我成功啦！！！`) : reject(`${time}毫秒后我失败啦！！！`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Promise.race([fn(2000, true), fn(3000), fn(1000)]).then(res =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(res)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}, err =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(err) // 1秒后输出</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="76-finally">7.6 finally()<a href="#76-finally" class="hash-link" aria-label="7.6 finally()的直接链接" title="7.6 finally()的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">无论失败或者成功状态，都会执行这个函数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resolve(&#x27;成功喽&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}).then(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res =&gt; { console.log(res) },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  err =&gt; { console.log(err) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">).finally(() =&gt; { console.log(&#x27;我是finally&#x27;) })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  reject(&#x27;失败喽&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}).then(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res =&gt; { console.log(res) },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  err =&gt; { console.log(err) }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">).finally(() =&gt; { console.log(&#x27;我是finally&#x27;) })</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="77-any">7.7 any()<a href="#77-any" class="hash-link" aria-label="7.7 any()的直接链接" title="7.7 any()的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">接收一个Promise数组，数组中如有非Promise项，则此项当做成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如果有一个Promise成功，则返回这个成功结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">如果所有Promise都失败，则报错</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 当有成功的时候，返回最快那个成功</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function fn(time, isResolve) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      isResolve ? resolve(`${time}毫秒后我成功啦！！！`) : reject(`${time}毫秒后我失败啦！！！`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Promise.any([fn(2000, true), fn(3000), fn(1000, true)]).then(res =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(res) // 1秒后 输出  1000毫秒后我成功啦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}, err =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(err)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 当全都失败时</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function fn(time, isResolve) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      isResolve ? resolve(`${time}毫秒后我成功啦！！！`) : reject(`${time}毫秒后我失败啦！！！`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, time)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Promise.any([fn(2000), fn(3000), fn(1000)]).then(res =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(res)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}, err =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(err) // 3秒后 报错 all Error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="78-asyncawait">7.8 async/await<a href="#78-asyncawait" class="hash-link" aria-label="7.8 async/await的直接链接" title="7.8 async/await的直接链接">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">以同步方式执行异步操作,场景:接口一，请求到数据一，而数据一被当做请求二的参数去请求数据二</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await只能在async函数里使用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">await后面最好接Promise，如果后面接的是普通函数则会直接执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async函数返回的是一个Promise</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function fn() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 模拟第一次请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      resolve(5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, 1000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }).then(res =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 模拟第二次请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 拿第一次请求的数据去乘10，当做第二次请求的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resolve(res * 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }, 2000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }).then(sres =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      console.log(sres)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn() // 1 + 2 = 3 3秒后输出 50function fn1 () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      resolve(5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, 1000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">function fn2 (data) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return new Promise((resolve, reject) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setTimeout(() =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      resolve(data * 10)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }, 2000)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">async function req () {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  // 同步方式执行异步，像排队一样</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const data1 = await fn1() // 等待1秒后返回数据再往下执行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  const data2 = await fn2(data1) // 拿data1去请求2秒后，往下走</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  console.log(data2) // 总共3秒后 输出 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">req()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="8解构赋值">8.解构赋值<a href="#8解构赋值" class="hash-link" aria-label="8.解构赋值的直接链接" title="8.解构赋值的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const obj = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;9527&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            age: 22,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            gender: &#x27;男&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            doing: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                morning: &#x27;摸鱼&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                afternoon: &#x27;摸鱼&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                evening: &#x27;sleep&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const { name, age, gender } = obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(name, age, gender) // 9527 22 男</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 解构重名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const { name: myname } = obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(myname) // 9527</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 嵌套解构</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const { doing: { evening } } = obj</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(evening) // sleep</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="9set">9.set<a href="#9set" class="hash-link" aria-label="9.set的直接链接" title="9.set的直接链接">​</a></h2><p>set基本用法</p><p><code>Set</code>对象允许你存储任何类型的值，无论是原始值或者是对象引用。它类似于数组，但是成员的值都是唯一的，没有重复的值。</p><p><code>Set</code> 本身是一个构造函数，用来生成<code>Set</code> 数据结构。<code>Set</code>函数可以接受一个数组（或者具有 iterable 接口的其他数据结构）作为参数，用来初始化。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">size()//返回长度</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add(value)：添加某个值，返回 Set 结构本身(可以链式调用)。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete(value)：删除某个值，删除成功返回true，否则返回false。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">has(value)：返回一个布尔值，表示该值是否为Set的成员。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clear()：清除所有成员，没有返回值。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//遍历方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keys()：返回键名的遍历器。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">values()：返回键值的遍历器。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">entries()：返回键值对的遍历器。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">forEach()：使用回调函数遍历每个成员。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//作用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//数组去重(利益扩展运算符)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const mySet = new Set([1, 2, 3, 4, 4])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[...mySet] // [1, 2, 3, 4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 两个对象都是不同的指针，所以没法去重</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const set1 = new Set([1, {name: &#x27;9527&#x27;}, 2, {name: &#x27;9527&#x27;}])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(set1) // Set(4) { 1, { name: &#x27;9527&#x27; }, 2, { name: &#x27;9527&#x27; } }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 如果是两个对象是同一指针，则能去重</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const obj = {name: &#x27;9527&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const set2 = new Set([1, obj, 2, obj])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(set2) // Set(3) { 1, { name: &#x27;9527&#x27; }, 2 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//合并set对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let a = new Set([1, 2, 3])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let b = new Set([4, 3, 2])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let union = new Set([...a, ...b]) // {1, 2, 3, 4}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//交集</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let a = new Set([1, 2, 3])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let b = new Set([4, 3, 2])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let intersect = new Set([...a].filter(x =&gt; b.has(x)))  // {2, 3} 利用数组的filter方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//差集</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let a = new Set([1, 2, 3])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let b = new Set([4, 3, 2])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let difference = new Set([...a].filter(x =&gt; !b.has(x))) //  {1} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="10map">10.Map<a href="#10map" class="hash-link" aria-label="10.Map的直接链接" title="10.Map的直接链接">​</a></h2><p><code>Map</code> 对比<code>object</code>最大的好处就是<code>key</code>值不受类型限制</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">//api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set(key, val): 向Map中添加新元素</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get(key): 通过键值查找特定的数值并返回</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">has(key): 判断Map对象中是否有Key所对应的值，有返回true,否则返回false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">delete(key): 通过键值从Map中移除对应的数据</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clear(): 将这个Map中的所有元素删除</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//遍历方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keys()：返回键名的遍历器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">values()：返回键值的遍历器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">entries()：返回键值对的遍历器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">forEach()：使用回调函数遍历每个成员</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 定义map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const map1 = new Map()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 新增键值对 使用 set(key, value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map1.set(true, 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map1.set(1, 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map1.set(&#x27;哈哈&#x27;, &#x27;嘻嘻嘻&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(map1) // Map(3) { true =&gt; 1, 1 =&gt; 2, &#x27;哈哈&#x27; =&gt; &#x27;嘻嘻嘻&#x27; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 判断map是否含有某个key 使用 has(key)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(map1.has(&#x27;哈哈&#x27;)) // true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 获取map中某个key对应的value 使用 get(key)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(map1.get(true)) // 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 删除map中某个键值对 使用 delete(key)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map1.delete(&#x27;哈哈&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(map1) // Map(2) { true =&gt; 1, 1 =&gt; 2 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 定义map，也可传入键值对数组集合</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const map2 = new Map([[true, 1], [1, 2], [&#x27;哈哈&#x27;, &#x27;嘻嘻嘻&#x27;]])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(map2) // Map(3) { true =&gt; 1, 1 =&gt; 2, &#x27;哈哈&#x27; =&gt; &#x27;嘻嘻嘻&#x27; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="11proxy">11.Proxy<a href="#11proxy" class="hash-link" aria-label="11.Proxy的直接链接" title="11.Proxy的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Proxy用于修改某些操作的默认行为，等同于在语言层面做出修改，所以属于一种“元编程”（meta programming），即对编程语言进行编程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">可以这样理解，Proxy就是在目标对象之前设置的一层拦截,外界想要访问都要经过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Proxy 在这里可以理解为代理器</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">声明： const proxy = new Proxy(target, handler)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">target: 拦截的对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handler: 定义拦截的方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">方法：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">get(): 拦截对象属性的读取</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">set(): 拦截对象设置属性,返回一个布尔值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">has(): 拦截 propKey in proxy 的操作，返回一个布尔值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ownKeys(): 拦截对象属性遍历，返回一个数组</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deleteProperty()：拦截 delete proxy[propKey] 的操作，返回一个布尔值()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apply()：拦截函数的调用，call 和 apply 操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">construct()：拦截 new 命令，返回一个对象: 拦截 new 命令，返回一个对象</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> let obj = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: &#x27;domesy&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  time: &#x27;2022-01-27&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> let data = new Proxy(obj, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     //get()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     get(target, key){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         return target[key].replace(&quot;2022&quot;, &#x27;2015&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     //set()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     set(target, key, value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (key === &quot;name&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           return (target[key] = value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           return target[key];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     // has()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    has(target, key) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (key === &quot;name&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return target[key];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // deleteProperty()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deleteProperty(target, key) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (key.indexOf(&quot;_&quot;) &gt; -1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            delete target[key];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return target[key];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ownKeys()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ownKeys(target) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return Object.keys(target).filter((item) =&gt; item != &quot;time&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(data.time) // 2015-01-27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> data.time = &#x27;2020&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> data.name = &#x27;React&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(data) //Proxy {name: &#x27;React&#x27;, time: &#x27;2022-01-27&#x27;, value: 1}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // 拦截has()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(&quot;name&quot; in data) // true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(&quot;time&quot; in data) // false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // 删除deleteProperty()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> delete monitor.time; // true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // 遍历 ownKeys()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(Object.keys(data)); //[&#x27;name&#x27;, &#x27;value&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //apply()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> let sum = (...args) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let num = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    args.forEach((item) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        num += item;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return num;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sum = new Proxy(sum, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    apply(target, ctx, args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return target(...args) * 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(sum(1, 2)); // 6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(sum.call(null, 1, 2, 3)); // 12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(sum.apply(null, [1, 2, 3])); // 12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> //constructor()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> let User = class {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor(name) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> User = new Proxy(User, {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    construct(target, args, newTarget) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new target(...args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> console.log(new User(&quot;domesy&quot;)); // User {name: &#x27;domesy&#x27;}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="12reflect">12.Reflect<a href="#12reflect" class="hash-link" aria-label="12.Reflect的直接链接" title="12.Reflect的直接链接">​</a></h2><p>Reflect 与 Proxy 类似，只是保持<code>Object</code>的默认行为</p><ul><li>将 Object 对象的一些明显属于语言内部的方法（比如 Object.defineProperty），放到 Reflect 对象上。</li><li>现阶段，某些方法同时在 Object 和 Reflect 对象上部署，未来的新方法将只部署在 Reflect 对象上</li><li>修改某些 Object 方法的返回结果，让其变得更合理。比如，Object.defineProperty(obj, name, desc)在无法定义属性时，会抛出一个错误，而 Reflect.defineProperty(obj, name, desc)则会返回 false</li><li>让Object 操作变成函数行为</li></ul><p>Reflect 的方法与 Proxy 的方法一一对应，这里就不进行介绍了</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-var--let--const" class="table-of-contents__link toc-highlight">1. var  let  const</a></li><li><a href="#2默认参数" class="table-of-contents__link toc-highlight">2.默认参数</a></li><li><a href="#3扩展运算符" class="table-of-contents__link toc-highlight">3.扩展运算符</a></li><li><a href="#4剩余参数" class="table-of-contents__link toc-highlight">4.剩余参数</a></li><li><a href="#5模板字符串" class="table-of-contents__link toc-highlight">5.模板字符串</a></li><li><a href="#6箭头函数" class="table-of-contents__link toc-highlight">6.箭头函数</a></li><li><a href="#7promise" class="table-of-contents__link toc-highlight">7.Promise</a><ul><li><a href="#71-promise" class="table-of-contents__link toc-highlight">7.1 Promise</a></li><li><a href="#72-then" class="table-of-contents__link toc-highlight">7.2 then()</a></li><li><a href="#73-catch" class="table-of-contents__link toc-highlight">7.3 catch()</a></li><li><a href="#74-all" class="table-of-contents__link toc-highlight">7.4 all()</a></li><li><a href="#75-race" class="table-of-contents__link toc-highlight">7.5 race()</a></li><li><a href="#76-finally" class="table-of-contents__link toc-highlight">7.6 finally()</a></li><li><a href="#77-any" class="table-of-contents__link toc-highlight">7.7 any()</a></li><li><a href="#78-asyncawait" class="table-of-contents__link toc-highlight">7.8 async/await</a></li></ul></li><li><a href="#8解构赋值" class="table-of-contents__link toc-highlight">8.解构赋值</a></li><li><a href="#9set" class="table-of-contents__link toc-highlight">9.set</a></li><li><a href="#10map" class="table-of-contents__link toc-highlight">10.Map</a></li><li><a href="#11proxy" class="table-of-contents__link toc-highlight">11.Proxy</a></li><li><a href="#12reflect" class="table-of-contents__link toc-highlight">12.Reflect</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright @ 2023 The way to becoming a god.</div></div></div></footer></div>
<script src="/hijulien/assets/js/runtime~main.e5b26454.js"></script>
<script src="/hijulien/assets/js/main.44331553.js"></script>
</body>
</html>