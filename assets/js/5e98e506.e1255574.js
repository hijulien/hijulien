"use strict";(self.webpackChunkhijulien=self.webpackChunkhijulien||[]).push([[7028],{3905:(e,n,t)=>{t.d(n,{Zo:()=>k,kt:()=>d});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),s=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},k=function(e){var n=s(e.components);return a.createElement(i.Provider,{value:n},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,k=o(e,["components","mdxType","originalType","parentName"]),c=s(t),m=r,d=c["".concat(i,".").concat(m)]||c[m]||u[m]||l;return t?a.createElement(d,p(p({ref:n},k),{},{components:t})):a.createElement(d,p({ref:n},k))}));function d(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,p=new Array(l);p[0]=m;var o={};for(var i in n)hasOwnProperty.call(n,i)&&(o[i]=n[i]);o.originalType=e,o[c]="string"==typeof e?e:r,p[1]=o;for(var s=2;s<l;s++)p[s]=t[s];return a.createElement.apply(null,p)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8231:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>p,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>s});var a=t(7462),r=(t(7294),t(3905));const l={},p="Fetch API \u6559\u7a0b",o={unversionedId:"WebAPI/fetch",id:"WebAPI/fetch",title:"Fetch API \u6559\u7a0b",description:"fetch()\u662f XMLHttpRequest \u7684\u5347\u7ea7\u7248\uff0c\u7528\u4e8e\u5728 JavaScript \u811a\u672c\u91cc\u9762\u53d1\u51fa HTTP \u8bf7\u6c42\u3002",source:"@site/frontend/WebAPI/fetch.md",sourceDirName:"WebAPI",slug:"/WebAPI/fetch",permalink:"/hijulien/frontend/WebAPI/fetch",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"front",previous:{title:"\u526a\u8d34\u677f\u64cd\u4f5c Clipboard API \u6559\u7a0b",permalink:"/hijulien/frontend/WebAPI/clipboard"},next:{title:"FontFace API",permalink:"/hijulien/frontend/WebAPI/fontface"}},i={},s=[{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",level:2},{value:"Response \u5bf9\u8c61\uff1a\u5904\u7406 HTTP \u56de\u5e94",id:"response-\u5bf9\u8c61\u5904\u7406-http-\u56de\u5e94",level:2},{value:"Response \u5bf9\u8c61\u7684\u540c\u6b65\u5c5e\u6027",id:"response-\u5bf9\u8c61\u7684\u540c\u6b65\u5c5e\u6027",level:3},{value:"\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u6210\u529f",id:"\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u6210\u529f",level:3},{value:"Response.headers \u5c5e\u6027",id:"responseheaders-\u5c5e\u6027",level:3},{value:"\u8bfb\u53d6\u5185\u5bb9\u7684\u65b9\u6cd5",id:"\u8bfb\u53d6\u5185\u5bb9\u7684\u65b9\u6cd5",level:3},{value:"Response.clone()",id:"responseclone",level:3},{value:"Response.body \u5c5e\u6027",id:"responsebody-\u5c5e\u6027",level:3},{value:"<code>fetch()</code>\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1a\u5b9a\u5236 HTTP \u8bf7\u6c42",id:"fetch\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5b9a\u5236-http-\u8bf7\u6c42",level:2},{value:"<code>fetch()</code>\u914d\u7f6e\u5bf9\u8c61\u7684\u5b8c\u6574 API",id:"fetch\u914d\u7f6e\u5bf9\u8c61\u7684\u5b8c\u6574-api",level:2},{value:"\u53d6\u6d88<code>fetch()</code>\u8bf7\u6c42",id:"\u53d6\u6d88fetch\u8bf7\u6c42",level:2},{value:"\u53c2\u8003\u94fe\u63a5",id:"\u53c2\u8003\u94fe\u63a5",level:2}],k={toc:s},c="wrapper";function u(e){let{components:n,...t}=e;return(0,r.kt)(c,(0,a.Z)({},k,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"fetch-api-\u6559\u7a0b"},"Fetch API \u6559\u7a0b"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u662f XMLHttpRequest \u7684\u5347\u7ea7\u7248\uff0c\u7528\u4e8e\u5728 JavaScript \u811a\u672c\u91cc\u9762\u53d1\u51fa HTTP \u8bf7\u6c42\u3002"),(0,r.kt)("p",null,"\u6d4f\u89c8\u5668\u539f\u751f\u63d0\u4f9b\u8fd9\u4e2a\u5bf9\u8c61\u3002\u672c\u7ae0\u8be6\u7ec6\u4ecb\u7ecd\u5b83\u7684\u7528\u6cd5\u3002"),(0,r.kt)("h2",{id:"\u57fa\u672c\u7528\u6cd5"},"\u57fa\u672c\u7528\u6cd5"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u7684\u529f\u80fd\u4e0e XMLHttpRequest \u57fa\u672c\u76f8\u540c\uff0c\u4f46\u6709\u4e09\u4e2a\u4e3b\u8981\u7684\u5dee\u5f02\u3002"),(0,r.kt)("p",null,"\uff081\uff09",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u4f7f\u7528 Promise\uff0c\u4e0d\u4f7f\u7528\u56de\u8c03\u51fd\u6570\uff0c\u56e0\u6b64\u5927\u5927\u7b80\u5316\u4e86\u5199\u6cd5\uff0c\u5199\u8d77\u6765\u66f4\u7b80\u6d01\u3002"),(0,r.kt)("p",null,"\uff082\uff09",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u91c7\u7528\u6a21\u5757\u5316\u8bbe\u8ba1\uff0cAPI \u5206\u6563\u5728\u591a\u4e2a\u5bf9\u8c61\u4e0a\uff08Response \u5bf9\u8c61\u3001Request \u5bf9\u8c61\u3001Headers \u5bf9\u8c61\uff09\uff0c\u66f4\u5408\u7406\u4e00\u4e9b\uff1b\u76f8\u6bd4\u4e4b\u4e0b\uff0cXMLHttpRequest \u7684 API \u8bbe\u8ba1\u5e76\u4e0d\u662f\u5f88\u597d\uff0c\u8f93\u5165\u3001\u8f93\u51fa\u3001\u72b6\u6001\u90fd\u5728\u540c\u4e00\u4e2a\u63a5\u53e3\u7ba1\u7406\uff0c\u5bb9\u6613\u5199\u51fa\u975e\u5e38\u6df7\u4e71\u7684\u4ee3\u7801\u3002"),(0,r.kt)("p",null,"\uff083\uff09",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u901a\u8fc7\u6570\u636e\u6d41\uff08Stream \u5bf9\u8c61\uff09\u5904\u7406\u6570\u636e\uff0c\u53ef\u4ee5\u5206\u5757\u8bfb\u53d6\uff0c\u6709\u5229\u4e8e\u63d0\u9ad8\u7f51\u7ad9\u6027\u80fd\u8868\u73b0\uff0c\u51cf\u5c11\u5185\u5b58\u5360\u7528\uff0c\u5bf9\u4e8e\u8bf7\u6c42\u5927\u6587\u4ef6\u6216\u8005\u7f51\u901f\u6162\u7684\u573a\u666f\u76f8\u5f53\u6709\u7528\u3002XMLHTTPRequest \u5bf9\u8c61\u4e0d\u652f\u6301\u6570\u636e\u6d41\uff0c\u6240\u6709\u7684\u6570\u636e\u5fc5\u987b\u653e\u5728\u7f13\u5b58\u91cc\uff0c\u4e0d\u652f\u6301\u5206\u5757\u8bfb\u53d6\uff0c\u5fc5\u987b\u7b49\u5f85\u5168\u90e8\u62ff\u5230\u540e\uff0c\u518d\u4e00\u6b21\u6027\u5410\u51fa\u6765\u3002"),(0,r.kt)("p",null,"\u5728\u7528\u6cd5\u4e0a\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u63a5\u53d7\u4e00\u4e2a URL \u5b57\u7b26\u4e32\u4f5c\u4e3a\u53c2\u6570\uff0c\u9ed8\u8ba4\u5411\u8be5\u7f51\u5740\u53d1\u51fa GET \u8bf7\u6c42\uff0c\u8fd4\u56de\u4e00\u4e2a Promise \u5bf9\u8c61\u3002\u5b83\u7684\u57fa\u672c\u7528\u6cd5\u5982\u4e0b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"fetch(url)\n  .then(...)\n  .catch(...)\n")),(0,r.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4ece\u670d\u52a1\u5668\u83b7\u53d6 JSON \u6570\u636e\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"fetch('https://api.github.com/users/ruanyf')\n  .then(response => response.json())\n  .then(json => console.log(json))\n  .catch(err => console.log('Request Failed', err)); \n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u63a5\u6536\u5230\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"response"),"\u662f\u4e00\u4e2a ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Streams_API"},"Stream \u5bf9\u8c61"),"\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"response.json()"),"\u662f\u4e00\u4e2a\u5f02\u6b65\u64cd\u4f5c\uff0c\u53d6\u51fa\u6240\u6709\u5185\u5bb9\uff0c\u5e76\u5c06\u5176\u8f6c\u4e3a JSON \u5bf9\u8c61\u3002"),(0,r.kt)("p",null,"Promise \u53ef\u4ee5\u4f7f\u7528 await \u8bed\u6cd5\u6539\u5199\uff0c\u4f7f\u5f97\u8bed\u4e49\u66f4\u6e05\u6670\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"async function getJSON() {\n  let url = 'https://api.github.com/users/ruanyf';\n  try {\n    let response = await fetch(url);\n    return await response.json();\n  } catch (error) {\n    console.log('Request Failed', error);\n  }\n}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"await"),"\u8bed\u53e5\u5fc5\u987b\u653e\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"try...catch"),"\u91cc\u9762\uff0c\u8fd9\u6837\u624d\u80fd\u6355\u6349\u5f02\u6b65\u64cd\u4f5c\u4e2d\u53ef\u80fd\u53d1\u751f\u7684\u9519\u8bef\u3002"),(0,r.kt)("p",null,"\u540e\u6587\u90fd\u91c7\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"await"),"\u7684\u5199\u6cd5\uff0c\u4e0d\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},".then()"),"\u7684\u5199\u6cd5\u3002"),(0,r.kt)("h2",{id:"response-\u5bf9\u8c61\u5904\u7406-http-\u56de\u5e94"},"Response \u5bf9\u8c61\uff1a\u5904\u7406 HTTP \u56de\u5e94"),(0,r.kt)("h3",{id:"response-\u5bf9\u8c61\u7684\u540c\u6b65\u5c5e\u6027"},"Response \u5bf9\u8c61\u7684\u540c\u6b65\u5c5e\u6027"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u8bf7\u6c42\u6210\u529f\u4ee5\u540e\uff0c\u5f97\u5230\u7684\u662f\u4e00\u4e2a ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Response"},"Response \u5bf9\u8c61"),"\u3002\u5b83\u5bf9\u5e94\u670d\u52a1\u5668\u7684 HTTP \u56de\u5e94\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const response = await fetch(url);\n")),(0,r.kt)("p",null,"\u524d\u9762\u8bf4\u8fc7\uff0cResponse \u5305\u542b\u7684\u6570\u636e\u901a\u8fc7 Stream \u63a5\u53e3\u5f02\u6b65\u8bfb\u53d6\uff0c\u4f46\u662f\u5b83\u8fd8\u5305\u542b\u4e00\u4e9b\u540c\u6b65\u5c5e\u6027\uff0c\u5bf9\u5e94 HTTP \u56de\u5e94\u7684\u6807\u5934\u4fe1\u606f\uff08Headers\uff09\uff0c\u53ef\u4ee5\u7acb\u5373\u8bfb\u53d6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"async function fetchText() {\n  let response = await fetch('/readme.txt');\n  console.log(response.status);\n  console.log(response.statusText);\n}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"response.status"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"response.statusText"),"\u5c31\u662f Response \u7684\u540c\u6b65\u5c5e\u6027\uff0c\u53ef\u4ee5\u7acb\u5373\u8bfb\u53d6\u3002"),(0,r.kt)("p",null,"\u6807\u5934\u4fe1\u606f\u5c5e\u6027\u6709\u4e0b\u9762\u8fd9\u4e9b\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Response.ok")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Response.ok"),"\u5c5e\u6027\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8bf7\u6c42\u662f\u5426\u6210\u529f\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"true"),"\u5bf9\u5e94 HTTP \u8bf7\u6c42\u7684\u72b6\u6001\u7801 200 \u5230 299\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"false"),"\u5bf9\u5e94\u5176\u4ed6\u7684\u72b6\u6001\u7801\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Response.status")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Response.status"),"\u5c5e\u6027\u8fd4\u56de\u4e00\u4e2a\u6570\u5b57\uff0c\u8868\u793a HTTP \u56de\u5e94\u7684\u72b6\u6001\u7801\uff08\u4f8b\u5982200\uff0c\u8868\u793a\u6210\u529f\u8bf7\u6c42\uff09\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Response.statusText")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Response.statusText"),"\u5c5e\u6027\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u8868\u793a HTTP \u56de\u5e94\u7684\u72b6\u6001\u4fe1\u606f\uff08\u4f8b\u5982\u8bf7\u6c42\u6210\u529f\u4ee5\u540e\uff0c\u670d\u52a1\u5668\u8fd4\u56de\u201cOK\u201d\uff09\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Response.url")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Response.url"),"\u5c5e\u6027\u8fd4\u56de\u8bf7\u6c42\u7684 URL\u3002\u5982\u679c URL \u5b58\u5728\u8df3\u8f6c\uff0c\u8be5\u5c5e\u6027\u8fd4\u56de\u7684\u662f\u6700\u7ec8 URL\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Response.type")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Response.type"),"\u5c5e\u6027\u8fd4\u56de\u8bf7\u6c42\u7684\u7c7b\u578b\u3002\u53ef\u80fd\u7684\u503c\u5982\u4e0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"basic"),"\uff1a\u666e\u901a\u8bf7\u6c42\uff0c\u5373\u540c\u6e90\u8bf7\u6c42\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cors"),"\uff1a\u8de8\u6e90\u8bf7\u6c42\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"error"),"\uff1a\u7f51\u7edc\u9519\u8bef\uff0c\u4e3b\u8981\u7528\u4e8e Service Worker\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"opaque"),"\uff1a\u5982\u679c",(0,r.kt)("inlineCode",{parentName:"li"},"fetch()"),"\u8bf7\u6c42\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"type"),"\u5c5e\u6027\u8bbe\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"no-cors"),"\uff0c\u5c31\u4f1a\u8fd4\u56de\u8fd9\u4e2a\u503c\uff0c\u8be6\u89c1\u8bf7\u6c42\u90e8\u5206\u3002\u8868\u793a\u53d1\u51fa\u7684\u662f\u7b80\u5355\u7684\u8de8\u6e90\u8bf7\u6c42\uff0c\u7c7b\u4f3c",(0,r.kt)("inlineCode",{parentName:"li"},"<form>"),"\u8868\u5355\u7684\u90a3\u79cd\u8de8\u6e90\u8bf7\u6c42\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"opaqueredirect"),"\uff1a\u5982\u679c",(0,r.kt)("inlineCode",{parentName:"li"},"fetch()"),"\u8bf7\u6c42\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"redirect"),"\u5c5e\u6027\u8bbe\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"manual"),"\uff0c\u5c31\u4f1a\u8fd4\u56de\u8fd9\u4e2a\u503c\uff0c\u8be6\u89c1\u8bf7\u6c42\u90e8\u5206\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Response.redirected")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Response.redirected"),"\u5c5e\u6027\u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u8bf7\u6c42\u662f\u5426\u53d1\u751f\u8fc7\u8df3\u8f6c\u3002"),(0,r.kt)("h3",{id:"\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u6210\u529f"},"\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u6210\u529f"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u53d1\u51fa\u8bf7\u6c42\u4ee5\u540e\uff0c\u6709\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u6ce8\u610f\u70b9\uff1a\u53ea\u6709\u7f51\u7edc\u9519\u8bef\uff0c\u6216\u8005\u65e0\u6cd5\u8fde\u63a5\u65f6\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u624d\u4f1a\u62a5\u9519\uff0c\u5176\u4ed6\u60c5\u51b5\u90fd\u4e0d\u4f1a\u62a5\u9519\uff0c\u800c\u662f\u8ba4\u4e3a\u8bf7\u6c42\u6210\u529f\u3002"),(0,r.kt)("p",null,"\u8fd9\u5c31\u662f\u8bf4\uff0c\u5373\u4f7f\u670d\u52a1\u5668\u8fd4\u56de\u7684\u72b6\u6001\u7801\u662f 4xx \u6216 5xx\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u4e5f\u4e0d\u4f1a\u62a5\u9519\uff08\u5373 Promise \u4e0d\u4f1a\u53d8\u4e3a ",(0,r.kt)("inlineCode",{parentName:"p"},"rejected"),"\u72b6\u6001\uff09\u3002"),(0,r.kt)("p",null,"\u53ea\u6709\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"Response.status"),"\u5c5e\u6027\uff0c\u5f97\u5230 HTTP \u56de\u5e94\u7684\u771f\u5b9e\u72b6\u6001\u7801\uff0c\u624d\u80fd\u5224\u65ad\u8bf7\u6c42\u662f\u5426\u6210\u529f\u3002\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"async function fetchText() {\n  let response = await fetch('/readme.txt');\n  if (response.status >= 200 && response.status < 300) {\n    return await response.text();\n  } else {\n    throw new Error(response.statusText);\n  }\n}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"response.status"),"\u5c5e\u6027\u53ea\u6709\u7b49\u4e8e 2xx \uff08200~299\uff09\uff0c\u624d\u80fd\u8ba4\u5b9a\u8bf7\u6c42\u6210\u529f\u3002\u8fd9\u91cc\u4e0d\u7528\u8003\u8651\u7f51\u5740\u8df3\u8f6c\uff08\u72b6\u6001\u7801\u4e3a 3xx\uff09\uff0c\u56e0\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u4f1a\u5c06\u8df3\u8f6c\u7684\u72b6\u6001\u7801\u81ea\u52a8\u8f6c\u4e3a 200\u3002"),(0,r.kt)("p",null,"\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u5224\u65ad",(0,r.kt)("inlineCode",{parentName:"p"},"response.ok"),"\u662f\u5426\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"true"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"if (response.ok) {\n  // \u8bf7\u6c42\u6210\u529f\n} else {\n  // \u8bf7\u6c42\u5931\u8d25\n}\n")),(0,r.kt)("h3",{id:"responseheaders-\u5c5e\u6027"},"Response.headers \u5c5e\u6027"),(0,r.kt)("p",null,"Response \u5bf9\u8c61\u8fd8\u6709\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"Response.headers"),"\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Headers"},"Headers \u5bf9\u8c61"),"\uff0c\u5bf9\u5e94 HTTP \u56de\u5e94\u7684\u6240\u6709\u6807\u5934\u3002"),(0,r.kt)("p",null,"Headers \u5bf9\u8c61\u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"for...of"),"\u5faa\u73af\u8fdb\u884c\u904d\u5386\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const response = await fetch(url);\n\nfor (let [key, value] of response.headers) {\n  console.log(`${key} : ${value}`);\n}\n\n// \u6216\u8005\nfor (let [key, value] of response.headers.entries()) {\n  console.log(`${key} : ${value}`);\n}\n")),(0,r.kt)("p",null,"Headers \u5bf9\u8c61\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u65b9\u6cd5\uff0c\u7528\u6765\u64cd\u4f5c\u6807\u5934\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Headers.get()"),"\uff1a\u6839\u636e\u6307\u5b9a\u7684\u952e\u540d\uff0c\u8fd4\u56de\u952e\u503c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Headers.has()"),"\uff1a \u8fd4\u56de\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u8868\u793a\u662f\u5426\u5305\u542b\u67d0\u4e2a\u6807\u5934\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Headers.set()"),"\uff1a\u5c06\u6307\u5b9a\u7684\u952e\u540d\u8bbe\u7f6e\u4e3a\u65b0\u7684\u952e\u503c\uff0c\u5982\u679c\u8be5\u952e\u540d\u4e0d\u5b58\u5728\u5219\u4f1a\u6dfb\u52a0\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Headers.append()"),"\uff1a\u6dfb\u52a0\u6807\u5934\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Headers.delete()"),"\uff1a\u5220\u9664\u6807\u5934\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Headers.keys()"),"\uff1a\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\uff0c\u53ef\u4ee5\u4f9d\u6b21\u904d\u5386\u6240\u6709\u952e\u540d\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Headers.values()"),"\uff1a\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\uff0c\u53ef\u4ee5\u4f9d\u6b21\u904d\u5386\u6240\u6709\u952e\u503c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Headers.entries()"),"\uff1a\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\uff0c\u53ef\u4ee5\u4f9d\u6b21\u904d\u5386\u6240\u6709\u952e\u503c\u5bf9\uff08",(0,r.kt)("inlineCode",{parentName:"li"},"[key, value]"),"\uff09\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Headers.forEach()"),"\uff1a\u4f9d\u6b21\u904d\u5386\u6807\u5934\uff0c\u6bcf\u4e2a\u6807\u5934\u90fd\u4f1a\u6267\u884c\u4e00\u6b21\u53c2\u6570\u51fd\u6570\u3002"))),(0,r.kt)("p",null,"\u4e0a\u9762\u7684\u6709\u4e9b\u65b9\u6cd5\u53ef\u4ee5\u4fee\u6539\u6807\u5934\uff0c\u90a3\u662f\u56e0\u4e3a\u7ee7\u627f\u81ea Headers \u63a5\u53e3\u3002\u5bf9\u4e8e HTTP \u56de\u5e94\u6765\u8bf4\uff0c\u4fee\u6539\u6807\u5934\u610f\u4e49\u4e0d\u5927\uff0c\u51b5\u4e14\u5f88\u591a\u6807\u5934\u662f\u53ea\u8bfb\u7684\uff0c\u6d4f\u89c8\u5668\u4e0d\u5141\u8bb8\u4fee\u6539\u3002"),(0,r.kt)("p",null,"\u8fd9\u4e9b\u65b9\u6cd5\u4e2d\uff0c\u6700\u5e38\u7528\u7684\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"response.headers.get()"),"\uff0c\u7528\u4e8e\u8bfb\u53d6\u67d0\u4e2a\u6807\u5934\u7684\u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"let response =  await  fetch(url);\nresponse.headers.get('Content-Type')\n// application/json; charset=utf-8\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Headers.keys()"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"Headers.values()"),"\u65b9\u6cd5\u7528\u6765\u5206\u522b\u904d\u5386\u6807\u5934\u7684\u952e\u540d\u548c\u952e\u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u952e\u540d\nfor(let key of myHeaders.keys()) {\n  console.log(key);\n}\n\n// \u952e\u503c\nfor(let value of myHeaders.values()) {\n  console.log(value);\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Headers.forEach()"),"\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u904d\u5386\u6240\u6709\u7684\u952e\u503c\u548c\u952e\u540d\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"let response = await fetch(url);\nresponse.headers.forEach(\n  (value, key) => console.log(key, ':', value)\n);\n")),(0,r.kt)("h3",{id:"\u8bfb\u53d6\u5185\u5bb9\u7684\u65b9\u6cd5"},"\u8bfb\u53d6\u5185\u5bb9\u7684\u65b9\u6cd5"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Response"),"\u5bf9\u8c61\u6839\u636e\u670d\u52a1\u5668\u8fd4\u56de\u7684\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\uff0c\u63d0\u4f9b\u4e86\u4e0d\u540c\u7684\u8bfb\u53d6\u65b9\u6cd5\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"response.text()"),"\uff1a\u5f97\u5230\u6587\u672c\u5b57\u7b26\u4e32\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"response.json()"),"\uff1a\u5f97\u5230 JSON \u5bf9\u8c61\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"response.blob()"),"\uff1a\u5f97\u5230\u4e8c\u8fdb\u5236 Blob \u5bf9\u8c61\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"response.formData()"),"\uff1a\u5f97\u5230 FormData \u8868\u5355\u5bf9\u8c61\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"response.arrayBuffer()"),"\uff1a\u5f97\u5230\u4e8c\u8fdb\u5236 ArrayBuffer \u5bf9\u8c61\u3002"))),(0,r.kt)("p",null,"\u4e0a\u97625\u4e2a\u8bfb\u53d6\u65b9\u6cd5\u90fd\u662f\u5f02\u6b65\u7684\uff0c\u8fd4\u56de\u7684\u90fd\u662f Promise \u5bf9\u8c61\u3002\u5fc5\u987b\u7b49\u5230\u5f02\u6b65\u64cd\u4f5c\u7ed3\u675f\uff0c\u624d\u80fd\u5f97\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7684\u5b8c\u6574\u6570\u636e\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"response.text()")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"response.text()"),"\u53ef\u4ee5\u7528\u4e8e\u83b7\u53d6\u6587\u672c\u6570\u636e\uff0c\u6bd4\u5982 HTML \u6587\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const response = await fetch('/users.html');\nconst body = await response.text();\ndocument.body.innerHTML = body\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"response.json()")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"response.json()"),"\u4e3b\u8981\u7528\u4e8e\u83b7\u53d6\u670d\u52a1\u5668\u8fd4\u56de\u7684 JSON \u6570\u636e\uff0c\u524d\u9762\u5df2\u7ecf\u4e3e\u8fc7\u4f8b\u5b50\u4e86\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"response.formData()")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"response.formData()"),"\u4e3b\u8981\u7528\u5728 Service Worker \u91cc\u9762\uff0c\u62e6\u622a\u7528\u6237\u63d0\u4ea4\u7684\u8868\u5355\uff0c\u4fee\u6539\u67d0\u4e9b\u6570\u636e\u4ee5\u540e\uff0c\u518d\u63d0\u4ea4\u7ed9\u670d\u52a1\u5668\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"response.blob()")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"response.blob()"),"\u7528\u4e8e\u83b7\u53d6\u4e8c\u8fdb\u5236\u6587\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const response = await fetch('flower.jpg');\nconst myBlob = await response.blob();\nconst objectURL = URL.createObjectURL(myBlob);\n\nconst myImage = document.querySelector('img');\nmyImage.src = objectURL;\n")),(0,r.kt)("p",null," \u4e0a\u9762\u793a\u4f8b\u8bfb\u53d6\u56fe\u7247\u6587\u4ef6",(0,r.kt)("inlineCode",{parentName:"p"},"flower.jpg"),"\uff0c\u663e\u793a\u5728\u7f51\u9875\u4e0a\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"response.arrayBuffer()")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"response.arrayBuffer()"),"\u4e3b\u8981\u7528\u4e8e\u83b7\u53d6\u6d41\u5a92\u4f53\u6587\u4ef6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const audioCtx = new window.AudioContext();\nconst source = audioCtx.createBufferSource();\n\nconst response = await fetch('song.ogg');\nconst buffer = await response.arrayBuffer();\n\nconst decodeData = await audioCtx.decodeAudioData(buffer);\nsource.buffer = buffer;\nsource.connect(audioCtx.destination);\nsource.loop = true;\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"response.arrayBuffer()"),"\u83b7\u53d6\u97f3\u9891\u6587\u4ef6",(0,r.kt)("inlineCode",{parentName:"p"},"song.ogg"),"\uff0c\u7136\u540e\u5728\u7ebf\u64ad\u653e\u7684\u4f8b\u5b50\u3002"),(0,r.kt)("h3",{id:"responseclone"},"Response.clone()"),(0,r.kt)("p",null,"Stream \u5bf9\u8c61\u53ea\u80fd\u8bfb\u53d6\u4e00\u6b21\uff0c\u8bfb\u53d6\u5b8c\u5c31\u6ca1\u4e86\u3002\u8fd9\u610f\u5473\u7740\uff0c\u524d\u4e00\u8282\u7684\u4e94\u4e2a\u8bfb\u53d6\u65b9\u6cd5\uff0c\u53ea\u80fd\u4f7f\u7528\u4e00\u4e2a\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"let text =  await response.text();\nlet json =  await response.json();  // \u62a5\u9519\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u5148\u4f7f\u7528\u4e86",(0,r.kt)("inlineCode",{parentName:"p"},"response.text()"),"\uff0c\u5c31\u628a Stream \u8bfb\u5b8c\u4e86\u3002\u540e\u9762\u518d\u8c03\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"response.json()"),"\uff0c\u5c31\u6ca1\u6709\u5185\u5bb9\u53ef\u8bfb\u4e86\uff0c\u6240\u4ee5\u62a5\u9519\u3002"),(0,r.kt)("p",null,"Response \u5bf9\u8c61\u63d0\u4f9b",(0,r.kt)("inlineCode",{parentName:"p"},"Response.clone()"),"\u65b9\u6cd5\uff0c\u521b\u5efa",(0,r.kt)("inlineCode",{parentName:"p"},"Response"),"\u5bf9\u8c61\u7684\u526f\u672c\uff0c\u5b9e\u73b0\u591a\u6b21\u8bfb\u53d6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const response1 = await fetch('flowers.jpg');\nconst response2 = response1.clone();\n\nconst myBlob1 = await response1.blob();\nconst myBlob2 = await response2.blob();\n\nimage1.src = URL.createObjectURL(myBlob1);\nimage2.src = URL.createObjectURL(myBlob2);\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"response.clone()"),"\u590d\u5236\u4e86\u4e00\u4efd Response \u5bf9\u8c61\uff0c\u7136\u540e\u5c06\u540c\u4e00\u5f20\u56fe\u7247\u8bfb\u53d6\u4e86\u4e24\u6b21\u3002"),(0,r.kt)("p",null,"Response \u5bf9\u8c61\u8fd8\u6709\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"Response.redirect()"),"\u65b9\u6cd5\uff0c\u7528\u4e8e\u5c06 Response \u7ed3\u679c\u91cd\u5b9a\u5411\u5230\u6307\u5b9a\u7684 URL\u3002\u8be5\u65b9\u6cd5\u4e00\u822c\u53ea\u7528\u5728 Service Worker \u91cc\u9762\uff0c\u8fd9\u91cc\u5c31\u4e0d\u4ecb\u7ecd\u4e86\u3002"),(0,r.kt)("h3",{id:"responsebody-\u5c5e\u6027"},"Response.body \u5c5e\u6027"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Response.body"),"\u5c5e\u6027\u662f Response \u5bf9\u8c61\u66b4\u9732\u51fa\u7684\u5e95\u5c42\u63a5\u53e3\uff0c\u8fd4\u56de\u4e00\u4e2a ReadableStream \u5bf9\u8c61\uff0c\u4f9b\u7528\u6237\u64cd\u4f5c\u3002"),(0,r.kt)("p",null,"\u5b83\u53ef\u4ee5\u7528\u6765\u5206\u5757\u8bfb\u53d6\u5185\u5bb9\uff0c\u5e94\u7528\u4e4b\u4e00\u5c31\u662f\u663e\u793a\u4e0b\u8f7d\u7684\u8fdb\u5ea6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const response = await fetch('flower.jpg');\nconst reader = response.body.getReader();\n\nwhile(true) {\n  const {done, value} = await reader.read();\n\n  if (done) {\n    break;\n  }\n\n  console.log(`Received ${value.length} bytes`)\n}\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"response.body.getReader()"),"\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u904d\u5386\u5668\u3002\u8fd9\u4e2a\u904d\u5386\u5668\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"read()"),"\u65b9\u6cd5\u6bcf\u6b21\u8fd4\u56de\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8868\u793a\u672c\u6b21\u8bfb\u53d6\u7684\u5185\u5bb9\u5757\u3002"),(0,r.kt)("p",null,"\u8fd9\u4e2a\u5bf9\u8c61\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"done"),"\u5c5e\u6027\u662f\u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u7528\u6765\u5224\u65ad\u6709\u6ca1\u6709\u8bfb\u5b8c\uff1b",(0,r.kt)("inlineCode",{parentName:"p"},"value"),"\u5c5e\u6027\u662f\u4e00\u4e2a arrayBuffer \u6570\u7ec4\uff0c\u8868\u793a\u5185\u5bb9\u5757\u7684\u5185\u5bb9\uff0c\u800c",(0,r.kt)("inlineCode",{parentName:"p"},"value.length"),"\u5c5e\u6027\u662f\u5f53\u524d\u5757\u7684\u5927\u5c0f\u3002"),(0,r.kt)("h2",{id:"fetch\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u5b9a\u5236-http-\u8bf7\u6c42"},(0,r.kt)("inlineCode",{parentName:"h2"},"fetch()"),"\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff1a\u5b9a\u5236 HTTP \u8bf7\u6c42"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f URL\uff0c\u8fd8\u53ef\u4ee5\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u4f5c\u4e3a\u914d\u7f6e\u5bf9\u8c61\uff0c\u5b9a\u5236\u53d1\u51fa\u7684 HTTP \u8bf7\u6c42\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"fetch(url, optionObj)\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u547d\u4ee4\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"optionObj"),"\u5c31\u662f\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002"),(0,r.kt)("p",null,"HTTP \u8bf7\u6c42\u7684\u65b9\u6cd5\u3001\u6807\u5934\u3001\u6570\u636e\u4f53\u90fd\u5728\u8fd9\u4e2a\u5bf9\u8c61\u91cc\u9762\u8bbe\u7f6e\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u793a\u4f8b\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff081\uff09POST \u8bf7\u6c42")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const response = await fetch(url, {\n  method: 'POST',\n  headers: {\n    \"Content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n  },\n  body: 'foo=bar&lorem=ipsum',\n});\n\nconst json = await response.json();\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u914d\u7f6e\u5bf9\u8c61\u7528\u5230\u4e86\u4e09\u4e2a\u5c5e\u6027\u3002"),(0,r.kt)("blockquote",null,(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"method"),"\uff1aHTTP \u8bf7\u6c42\u7684\u65b9\u6cd5\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"POST"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"DELETE"),"\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"PUT"),"\u90fd\u5728\u8fd9\u4e2a\u5c5e\u6027\u8bbe\u7f6e\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"headers"),"\uff1a\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u6765\u5b9a\u5236 HTTP \u8bf7\u6c42\u7684\u6807\u5934\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"body"),"\uff1aPOST \u8bf7\u6c42\u7684\u6570\u636e\u4f53\u3002"))),(0,r.kt)("p",null,"\u6ce8\u610f\uff0c\u6709\u4e9b\u6807\u5934\u4e0d\u80fd\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"headers"),"\u5c5e\u6027\u8bbe\u7f6e\uff0c\u6bd4\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Length"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"Cookie"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"Host"),"\u7b49\u7b49\u3002\u5b83\u4eec\u662f\u7531\u6d4f\u89c8\u5668\u81ea\u52a8\u751f\u6210\uff0c\u65e0\u6cd5\u4fee\u6539\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff082\uff09\u63d0\u4ea4 JSON \u6570\u636e")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const user =  { name:  'John', surname:  'Smith'  };\nconst response = await fetch('/article/fetch/post/user', {\n  method: 'POST',\n  headers: {\n   'Content-Type': 'application/json;charset=utf-8'\n  }, \n  body: JSON.stringify(user) \n});\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6807\u5934",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Type"),"\u8981\u8bbe\u6210",(0,r.kt)("inlineCode",{parentName:"p"},"'application/json;charset=utf-8'"),"\u3002\u56e0\u4e3a\u9ed8\u8ba4\u53d1\u9001\u7684\u662f\u7eaf\u6587\u672c\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Type"),"\u7684\u9ed8\u8ba4\u503c\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"'text/plain;charset=UTF-8'"),"\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff083\uff09\u63d0\u4ea4\u8868\u5355")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const form = document.querySelector('form');\n\nconst response = await fetch('/users', {\n  method: 'POST',\n  body: new FormData(form)\n})\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff084\uff09\u6587\u4ef6\u4e0a\u4f20")),(0,r.kt)("p",null,"\u5982\u679c\u8868\u5355\u91cc\u9762\u6709\u6587\u4ef6\u9009\u62e9\u5668\uff0c\u53ef\u4ee5\u7528\u524d\u4e00\u4e2a\u4f8b\u5b50\u7684\u5199\u6cd5\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\u5305\u542b\u5728\u6574\u4e2a\u8868\u5355\u91cc\u9762\uff0c\u4e00\u8d77\u63d0\u4ea4\u3002"),(0,r.kt)("p",null,"\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u7528\u811a\u672c\u6dfb\u52a0\u6587\u4ef6\uff0c\u6784\u9020\u51fa\u4e00\u4e2a\u8868\u5355\uff0c\u8fdb\u884c\u4e0a\u4f20\uff0c\u8bf7\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const input = document.querySelector('input[type=\"file\"]');\n\nconst data = new FormData();\ndata.append('file', input.files[0]);\ndata.append('user', 'foo');\n\nfetch('/avatars', {\n  method: 'POST',\n  body: data\n});\n")),(0,r.kt)("p",null,"\u4e0a\u4f20\u4e8c\u8fdb\u5236\u6587\u4ef6\u65f6\uff0c\u4e0d\u7528\u4fee\u6539\u6807\u5934\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Type"),"\uff0c\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"\uff085\uff09\u76f4\u63a5\u4e0a\u4f20\u4e8c\u8fdb\u5236\u6570\u636e")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0a\u4f20\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u5c06 Blob \u6216 arrayBuffer \u6570\u636e\u653e\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"body"),"\u5c5e\u6027\u91cc\u9762\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"let blob = await new Promise(resolve =>\n  canvasElem.toBlob(resolve,  'image/png')\n);\n\nlet response = await fetch('/article/fetch/post/image', {\n  method:  'POST',\n  body: blob\n});\n")),(0,r.kt)("h2",{id:"fetch\u914d\u7f6e\u5bf9\u8c61\u7684\u5b8c\u6574-api"},(0,r.kt)("inlineCode",{parentName:"h2"},"fetch()"),"\u914d\u7f6e\u5bf9\u8c61\u7684\u5b8c\u6574 API"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u5b8c\u6574 API \u5982\u4e0b\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'const response = fetch(url, {\n  method: "GET",\n  headers: {\n    "Content-Type": "text/plain;charset=UTF-8"\n  },\n  body: undefined,\n  referrer: "about:client",\n  referrerPolicy: "no-referrer-when-downgrade",\n  mode: "cors",\n  credentials: "same-origin",\n  cache: "default",\n  redirect: "follow",\n  integrity: "",\n  keepalive: false,\n  signal: undefined\n});\n')),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u8bf7\u6c42\u7684\u5e95\u5c42\u7528\u7684\u662f ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Request/Request"},"Request() \u5bf9\u8c61"),"\u7684\u63a5\u53e3\uff0c\u53c2\u6570\u5b8c\u5168\u4e00\u6837\uff0c\u56e0\u6b64\u4e0a\u9762\u7684 API \u4e5f\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"Request()"),"\u7684 API\u3002"),(0,r.kt)("p",null,"\u8fd9\u4e9b\u5c5e\u6027\u91cc\u9762\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"headers"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"body"),"\u3001",(0,r.kt)("inlineCode",{parentName:"p"},"method"),"\u524d\u9762\u5df2\u7ecf\u7ed9\u8fc7\u793a\u4f8b\u4e86\uff0c\u4e0b\u9762\u662f\u5176\u4ed6\u5c5e\u6027\u7684\u4ecb\u7ecd\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"cache")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"cache"),"\u5c5e\u6027\u6307\u5b9a\u5982\u4f55\u5904\u7406\u7f13\u5b58\u3002\u53ef\u80fd\u7684\u53d6\u503c\u5982\u4e0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"default"),"\uff1a\u9ed8\u8ba4\u503c\uff0c\u5148\u5728\u7f13\u5b58\u91cc\u9762\u5bfb\u627e\u5339\u914d\u7684\u8bf7\u6c42\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"no-store"),"\uff1a\u76f4\u63a5\u8bf7\u6c42\u8fdc\u7a0b\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u4e0d\u66f4\u65b0\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"reload"),"\uff1a\u76f4\u63a5\u8bf7\u6c42\u8fdc\u7a0b\u670d\u52a1\u5668\uff0c\u5e76\u4e14\u66f4\u65b0\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"no-cache"),"\uff1a\u5c06\u670d\u52a1\u5668\u8d44\u6e90\u8ddf\u672c\u5730\u7f13\u5b58\u8fdb\u884c\u6bd4\u8f83\uff0c\u6709\u65b0\u7684\u7248\u672c\u624d\u4f7f\u7528\u670d\u52a1\u5668\u8d44\u6e90\uff0c\u5426\u5219\u4f7f\u7528\u7f13\u5b58\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"force-cache"),"\uff1a\u7f13\u5b58\u4f18\u5148\uff0c\u53ea\u6709\u4e0d\u5b58\u5728\u7f13\u5b58\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u8bf7\u6c42\u8fdc\u7a0b\u670d\u52a1\u5668\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"only-if-cached"),"\uff1a\u53ea\u68c0\u67e5\u7f13\u5b58\uff0c\u5982\u679c\u7f13\u5b58\u91cc\u9762\u4e0d\u5b58\u5728\uff0c\u5c06\u8fd4\u56de504\u9519\u8bef\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"mode")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"mode"),"\u5c5e\u6027\u6307\u5b9a\u8bf7\u6c42\u7684\u6a21\u5f0f\u3002\u53ef\u80fd\u7684\u53d6\u503c\u5982\u4e0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"cors"),"\uff1a\u9ed8\u8ba4\u503c\uff0c\u5141\u8bb8\u8de8\u6e90\u8bf7\u6c42\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"same-origin"),"\uff1a\u53ea\u5141\u8bb8\u540c\u6e90\u8bf7\u6c42\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"no-cors"),"\uff1a\u8bf7\u6c42\u65b9\u6cd5\u53ea\u9650\u4e8e GET\u3001POST \u548c HEAD\uff0c\u5e76\u4e14\u53ea\u80fd\u4f7f\u7528\u6709\u9650\u7684\u51e0\u4e2a\u7b80\u5355\u6807\u5934\uff0c\u4e0d\u80fd\u6dfb\u52a0\u8de8\u6e90\u7684\u590d\u6742\u6807\u5934\uff0c\u76f8\u5f53\u4e8e\u63d0\u4ea4\u8868\u5355\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"<script>"),"\u52a0\u8f7d\u811a\u672c\u3001",(0,r.kt)("inlineCode",{parentName:"li"},"<img>"),"\u52a0\u8f7d\u56fe\u7247\u7b49\u4f20\u7edf\u7684\u8de8\u6e90\u8bf7\u6c42\u65b9\u6cd5\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"credentials")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"credentials"),"\u5c5e\u6027\u6307\u5b9a\u662f\u5426\u53d1\u9001 Cookie\u3002\u53ef\u80fd\u7684\u53d6\u503c\u5982\u4e0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"same-origin"),"\uff1a\u9ed8\u8ba4\u503c\uff0c\u540c\u6e90\u8bf7\u6c42\u65f6\u53d1\u9001 Cookie\uff0c\u8de8\u6e90\u8bf7\u6c42\u65f6\u4e0d\u53d1\u9001\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"include"),"\uff1a\u4e0d\u7ba1\u540c\u6e90\u8bf7\u6c42\uff0c\u8fd8\u662f\u8de8\u6e90\u8bf7\u6c42\uff0c\u4e00\u5f8b\u53d1\u9001 Cookie\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"omit"),"\uff1a\u4e00\u5f8b\u4e0d\u53d1\u9001\u3002")),(0,r.kt)("p",null,"\u8de8\u6e90\u8bf7\u6c42\u53d1\u9001 Cookie\uff0c\u9700\u8981\u5c06",(0,r.kt)("inlineCode",{parentName:"p"},"credentials"),"\u5c5e\u6027\u8bbe\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"include"),"\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"fetch('http://another.com', {\n  credentials: \"include\"\n});\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"signal")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"signal"),"\u5c5e\u6027\u6307\u5b9a\u4e00\u4e2a AbortSignal \u5b9e\u4f8b\uff0c\u7528\u4e8e\u53d6\u6d88",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u8bf7\u6c42\uff0c\u8be6\u89c1\u4e0b\u4e00\u8282\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"keepalive")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"keepalive"),"\u5c5e\u6027\u7528\u4e8e\u9875\u9762\u5378\u8f7d\u65f6\uff0c\u544a\u8bc9\u6d4f\u89c8\u5668\u5728\u540e\u53f0\u4fdd\u6301\u8fde\u63a5\uff0c\u7ee7\u7eed\u53d1\u9001\u6570\u636e\u3002"),(0,r.kt)("p",null,"\u4e00\u4e2a\u5178\u578b\u7684\u573a\u666f\u5c31\u662f\uff0c\u7528\u6237\u79bb\u5f00\u7f51\u9875\u65f6\uff0c\u811a\u672c\u5411\u670d\u52a1\u5668\u63d0\u4ea4\u4e00\u4e9b\u7528\u6237\u884c\u4e3a\u7684\u7edf\u8ba1\u4fe1\u606f\u3002\u8fd9\u65f6\uff0c\u5982\u679c\u4e0d\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"keepalive"),"\u5c5e\u6027\uff0c\u6570\u636e\u53ef\u80fd\u65e0\u6cd5\u53d1\u9001\uff0c\u56e0\u4e3a\u6d4f\u89c8\u5668\u5df2\u7ecf\u628a\u9875\u9762\u5378\u8f7d\u4e86\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"window.onunload = function() {\n  fetch('/analytics', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      some: 'data'\n    }),\n    keepalive: true\n  });\n};\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"redirect")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"redirect"),"\u5c5e\u6027\u6307\u5b9a HTTP \u8df3\u8f6c\u7684\u5904\u7406\u65b9\u6cd5\u3002\u53ef\u80fd\u7684\u53d6\u503c\u5982\u4e0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"follow"),"\uff1a\u9ed8\u8ba4\u503c\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"fetch()"),"\u8ddf\u968f HTTP \u8df3\u8f6c\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"error"),"\uff1a\u5982\u679c\u53d1\u751f\u8df3\u8f6c\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"fetch()"),"\u5c31\u62a5\u9519\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"manual"),"\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"fetch()"),"\u4e0d\u8ddf\u968f HTTP \u8df3\u8f6c\uff0c\u4f46\u662f",(0,r.kt)("inlineCode",{parentName:"li"},"response.url"),"\u5c5e\u6027\u4f1a\u6307\u5411\u65b0\u7684 URL\uff0c",(0,r.kt)("inlineCode",{parentName:"li"},"response.redirected"),"\u5c5e\u6027\u4f1a\u53d8\u4e3a",(0,r.kt)("inlineCode",{parentName:"li"},"true"),"\uff0c\u7531\u5f00\u53d1\u8005\u81ea\u5df1\u51b3\u5b9a\u540e\u7eed\u5982\u4f55\u5904\u7406\u8df3\u8f6c\u3002")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"integrity")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"integrity"),"\u5c5e\u6027\u6307\u5b9a\u4e00\u4e2a\u54c8\u5e0c\u503c\uff0c\u7528\u4e8e\u68c0\u67e5 HTTP \u56de\u5e94\u4f20\u56de\u7684\u6570\u636e\u662f\u5426\u7b49\u4e8e\u8fd9\u4e2a\u9884\u5148\u8bbe\u5b9a\u7684\u54c8\u5e0c\u503c\u3002"),(0,r.kt)("p",null,"\u6bd4\u5982\uff0c\u4e0b\u8f7d\u6587\u4ef6\u65f6\uff0c\u68c0\u67e5\u6587\u4ef6\u7684 SHA-256 \u54c8\u5e0c\u503c\u662f\u5426\u76f8\u7b26\uff0c\u786e\u4fdd\u6ca1\u6709\u88ab\u7be1\u6539\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"fetch('http://site.com/file', {\n  integrity: 'sha256-abcdef'\n});\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"referrer")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"referrer"),"\u5c5e\u6027\u7528\u4e8e\u8bbe\u5b9a",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u8bf7\u6c42\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"referer"),"\u6807\u5934\u3002"),(0,r.kt)("p",null,"\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u4e3a\u4efb\u610f\u5b57\u7b26\u4e32\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff08\u5373\u4e0d\u53d1\u9001",(0,r.kt)("inlineCode",{parentName:"p"},"referer"),"\u6807\u5934\uff09\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"fetch('/page', {\n  referrer: ''\n});\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"referrerPolicy")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"referrerPolicy"),"\u5c5e\u6027\u7528\u4e8e\u8bbe\u5b9a",(0,r.kt)("inlineCode",{parentName:"p"},"Referer"),"\u6807\u5934\u7684\u89c4\u5219\u3002\u53ef\u80fd\u7684\u53d6\u503c\u5982\u4e0b\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"no-referrer-when-downgrade"),"\uff1a\u9ed8\u8ba4\u503c\uff0c\u603b\u662f\u53d1\u9001",(0,r.kt)("inlineCode",{parentName:"li"},"Referer"),"\u6807\u5934\uff0c\u9664\u975e\u4ece HTTPS \u9875\u9762\u8bf7\u6c42 HTTP \u8d44\u6e90\u65f6\u4e0d\u53d1\u9001\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"no-referrer"),"\uff1a\u4e0d\u53d1\u9001",(0,r.kt)("inlineCode",{parentName:"li"},"Referer"),"\u6807\u5934\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"origin"),"\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"Referer"),"\u6807\u5934\u53ea\u5305\u542b\u57df\u540d\uff0c\u4e0d\u5305\u542b\u5b8c\u6574\u7684\u8def\u5f84\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"origin-when-cross-origin"),"\uff1a\u540c\u6e90\u8bf7\u6c42",(0,r.kt)("inlineCode",{parentName:"li"},"Referer"),"\u6807\u5934\u5305\u542b\u5b8c\u6574\u7684\u8def\u5f84\uff0c\u8de8\u6e90\u8bf7\u6c42\u53ea\u5305\u542b\u57df\u540d\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"same-origin"),"\uff1a\u8de8\u6e90\u8bf7\u6c42\u4e0d\u53d1\u9001",(0,r.kt)("inlineCode",{parentName:"li"},"Referer"),"\uff0c\u540c\u6e90\u8bf7\u6c42\u53d1\u9001\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"strict-origin"),"\uff1a",(0,r.kt)("inlineCode",{parentName:"li"},"Referer"),"\u6807\u5934\u53ea\u5305\u542b\u57df\u540d\uff0cHTTPS \u9875\u9762\u8bf7\u6c42 HTTP \u8d44\u6e90\u65f6\u4e0d\u53d1\u9001",(0,r.kt)("inlineCode",{parentName:"li"},"Referer"),"\u6807\u5934\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"strict-origin-when-cross-origin"),"\uff1a\u540c\u6e90\u8bf7\u6c42\u65f6",(0,r.kt)("inlineCode",{parentName:"li"},"Referer"),"\u6807\u5934\u5305\u542b\u5b8c\u6574\u8def\u5f84\uff0c\u8de8\u6e90\u8bf7\u6c42\u65f6\u53ea\u5305\u542b\u57df\u540d\uff0cHTTPS \u9875\u9762\u8bf7\u6c42 HTTP \u8d44\u6e90\u65f6\u4e0d\u53d1\u9001\u8be5\u6807\u5934\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"unsafe-url"),"\uff1a\u4e0d\u7ba1\u4ec0\u4e48\u60c5\u51b5\uff0c\u603b\u662f\u53d1\u9001",(0,r.kt)("inlineCode",{parentName:"li"},"Referer"),"\u6807\u5934\u3002")),(0,r.kt)("h2",{id:"\u53d6\u6d88fetch\u8bf7\u6c42"},"\u53d6\u6d88",(0,r.kt)("inlineCode",{parentName:"h2"},"fetch()"),"\u8bf7\u6c42"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u8bf7\u6c42\u53d1\u9001\u4ee5\u540e\uff0c\u5982\u679c\u4e2d\u9014\u60f3\u8981\u53d6\u6d88\uff0c\u9700\u8981\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"AbortController"),"\u5bf9\u8c61\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"let controller = new AbortController();\nlet signal = controller.signal;\n\nfetch(url, {\n  signal: controller.signal\n});\n\nsignal.addEventListener('abort',\n  () => console.log('abort!')\n);\n\ncontroller.abort(); // \u53d6\u6d88\n\nconsole.log(signal.aborted); // true\n")),(0,r.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u9996\u5148\u65b0\u5efa AbortController \u5b9e\u4f8b\uff0c\u7136\u540e\u53d1\u9001",(0,r.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u8bf7\u6c42\uff0c\u914d\u7f6e\u5bf9\u8c61\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"signal"),"\u5c5e\u6027\u5fc5\u987b\u6307\u5b9a\u63a5\u6536 AbortController \u5b9e\u4f8b\u53d1\u9001\u7684\u4fe1\u53f7",(0,r.kt)("inlineCode",{parentName:"p"},"controller.signal"),"\u3002"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"controller.abort()"),"\u65b9\u6cd5\u7528\u4e8e\u53d1\u51fa\u53d6\u6d88\u4fe1\u53f7\u3002\u8fd9\u65f6\u4f1a\u89e6\u53d1",(0,r.kt)("inlineCode",{parentName:"p"},"abort"),"\u4e8b\u4ef6\uff0c\u8fd9\u4e2a\u4e8b\u4ef6\u53ef\u4ee5\u76d1\u542c\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"controller.signal.aborted"),"\u5c5e\u6027\u5224\u65ad\u53d6\u6d88\u4fe1\u53f7\u662f\u5426\u5df2\u7ecf\u53d1\u51fa\u3002"),(0,r.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a1\u79d2\u540e\u81ea\u52a8\u53d6\u6d88\u8bf7\u6c42\u7684\u4f8b\u5b50\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"let controller = new AbortController();\nsetTimeout(() => controller.abort(), 1000);\n\ntry {\n  let response = await fetch('/long-operation', {\n    signal: controller.signal\n  });\n} catch(err) {\n  if (err.name == 'AbortError') {\n    console.log('Aborted!');\n  } else {\n    throw err;\n  }\n}\n")),(0,r.kt)("h2",{id:"\u53c2\u8003\u94fe\u63a5"},"\u53c2\u8003\u94fe\u63a5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://javascript.info/fetch"},"Network requests: Fetch")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/node-fetch/node-fetch"},"node-fetch")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developers.google.com/web/updates/2015/03/introduction-to-fetch"},"Introduction to fetch()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch"},"Using Fetch")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://developerhowto.com/2019/09/14/javascript-fetch-api/"},"Javascript Fetch API: The XMLHttpRequest evolution")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.sitepen.com/blog/2017/10/02/a-guide-to-faster-web-app-io-and-data-operations-with-streams/"},"A Guide to Faster Web App I/O and Data Operations with Streams"))))}u.isMDXComponent=!0}}]);