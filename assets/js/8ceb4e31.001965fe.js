"use strict";(self.webpackChunkhijulien=self.webpackChunkhijulien||[]).push([[2475],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>k});var a=t(67294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var i=a.createContext({}),s=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):p(p({},n),e)),t},c=function(e){var n=s(e.components);return a.createElement(i.Provider,{value:n},e.children)},m="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=s(t),u=l,k=m["".concat(i,".").concat(u)]||m[u]||d[u]||r;return t?a.createElement(k,p(p({ref:n},c),{},{components:t})):a.createElement(k,p({ref:n},c))}));function k(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,p=new Array(r);p[0]=u;var o={};for(var i in n)hasOwnProperty.call(n,i)&&(o[i]=n[i]);o.originalType=e,o[m]="string"==typeof e?e:l,p[1]=o;for(var s=2;s<r;s++)p[s]=t[s];return a.createElement.apply(null,p)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},75526:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>p,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>s});var a=t(87462),l=(t(67294),t(3905));const r={},p="\u6700\u65b0\u63d0\u6848",o={unversionedId:"ES6/proposals",id:"ES6/proposals",title:"\u6700\u65b0\u63d0\u6848",description:"\u672c\u7ae0\u4ecb\u7ecd\u4e00\u4e9b\u5c1a\u672a\u8fdb\u5165\u6807\u51c6\u3001\u4f46\u5f88\u6709\u5e0c\u671b\u7684\u6700\u65b0\u63d0\u6848\u3002",source:"@site/frontend/ES6/proposals.md",sourceDirName:"ES6",slug:"/ES6/proposals",permalink:"/hijulien/frontend/ES6/proposals",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"front",previous:{title:"SIMD",permalink:"/hijulien/frontend/ES6/simd"},next:{title:"\u88c5\u9970\u5668",permalink:"/hijulien/frontend/ES6/decorator"}},i={},s=[{value:"do \u8868\u8fbe\u5f0f",id:"do-\u8868\u8fbe\u5f0f",level:2},{value:"throw \u8868\u8fbe\u5f0f",id:"throw-\u8868\u8fbe\u5f0f",level:2},{value:"\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c",id:"\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c",level:2},{value:"\u8bed\u6cd5",id:"\u8bed\u6cd5",level:3},{value:"\u6ce8\u610f\u70b9",id:"\u6ce8\u610f\u70b9",level:3},{value:"\u7ba1\u9053\u8fd0\u7b97\u7b26",id:"\u7ba1\u9053\u8fd0\u7b97\u7b26",level:2},{value:"Math.signbit()",id:"mathsignbit",level:2},{value:"\u53cc\u5192\u53f7\u8fd0\u7b97\u7b26",id:"\u53cc\u5192\u53f7\u8fd0\u7b97\u7b26",level:2},{value:"Realm API",id:"realm-api",level:2},{value:"JSON \u6a21\u5757",id:"json-\u6a21\u5757",level:2}],c={toc:s},m="wrapper";function d(e){let{components:n,...t}=e;return(0,l.kt)(m,(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"\u6700\u65b0\u63d0\u6848"},"\u6700\u65b0\u63d0\u6848"),(0,l.kt)("p",null,"\u672c\u7ae0\u4ecb\u7ecd\u4e00\u4e9b\u5c1a\u672a\u8fdb\u5165\u6807\u51c6\u3001\u4f46\u5f88\u6709\u5e0c\u671b\u7684\u6700\u65b0\u63d0\u6848\u3002"),(0,l.kt)("h2",{id:"do-\u8868\u8fbe\u5f0f"},"do \u8868\u8fbe\u5f0f"),(0,l.kt)("p",null,"\u672c\u8d28\u4e0a\uff0c\u5757\u7ea7\u4f5c\u7528\u57df\u662f\u4e00\u4e2a\u8bed\u53e5\uff0c\u5c06\u591a\u4e2a\u64cd\u4f5c\u5c01\u88c5\u5728\u4e00\u8d77\uff0c\u6ca1\u6709\u8fd4\u56de\u503c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"{\n  let t = f();\n  t = t * t + 1;\n}\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5757\u7ea7\u4f5c\u7528\u57df\u5c06\u4e24\u4e2a\u8bed\u53e5\u5c01\u88c5\u5728\u4e00\u8d77\u3002\u4f46\u662f\uff0c\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4ee5\u5916\uff0c\u6ca1\u6709\u529e\u6cd5\u5f97\u5230",(0,l.kt)("inlineCode",{parentName:"p"},"t"),"\u7684\u503c\uff0c\u56e0\u4e3a\u5757\u7ea7\u4f5c\u7528\u57df\u4e0d\u8fd4\u56de\u503c\uff0c\u9664\u975e",(0,l.kt)("inlineCode",{parentName:"p"},"t"),"\u662f\u5168\u5c40\u53d8\u91cf\u3002"),(0,l.kt)("p",null,"\u73b0\u5728\u6709\u4e00\u4e2a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tc39/proposal-do-expressions"},"\u63d0\u6848"),"\uff0c\u4f7f\u5f97\u5757\u7ea7\u4f5c\u7528\u57df\u53ef\u4ee5\u53d8\u4e3a\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ef\u4ee5\u8fd4\u56de\u503c\uff0c\u529e\u6cd5\u5c31\u662f\u5728\u5757\u7ea7\u4f5c\u7528\u57df\u4e4b\u524d\u52a0\u4e0a",(0,l.kt)("inlineCode",{parentName:"p"},"do"),"\uff0c\u4f7f\u5b83\u53d8\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"do"),"\u8868\u8fbe\u5f0f\uff0c\u7136\u540e\u5c31\u4f1a\u8fd4\u56de\u5185\u90e8\u6700\u540e\u6267\u884c\u7684\u8868\u8fbe\u5f0f\u7684\u503c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"let x = do {\n  let t = f();\n  t * t + 1;\n};\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u53d8\u91cf",(0,l.kt)("inlineCode",{parentName:"p"},"x"),"\u4f1a\u5f97\u5230\u6574\u4e2a\u5757\u7ea7\u4f5c\u7528\u57df\u7684\u8fd4\u56de\u503c\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"t * t + 1"),"\uff09\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"do"),"\u8868\u8fbe\u5f0f\u7684\u903b\u8f91\u975e\u5e38\u7b80\u5355\uff1a\u5c01\u88c5\u7684\u662f\u4ec0\u4e48\uff0c\u5c31\u4f1a\u8fd4\u56de\u4ec0\u4e48\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u7b49\u540c\u4e8e <\u8868\u8fbe\u5f0f>\ndo { <\u8868\u8fbe\u5f0f>; }\n\n// \u7b49\u540c\u4e8e <\u8bed\u53e5>\ndo { <\u8bed\u53e5> }\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"do"),"\u8868\u8fbe\u5f0f\u7684\u597d\u5904\u662f\u53ef\u4ee5\u5c01\u88c5\u591a\u4e2a\u8bed\u53e5\uff0c\u8ba9\u7a0b\u5e8f\u66f4\u52a0\u6a21\u5757\u5316\uff0c\u5c31\u50cf\u4e50\u9ad8\u79ef\u6728\u90a3\u6837\u4e00\u5757\u5757\u62fc\u88c5\u8d77\u6765\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"let x = do {\n  if (foo()) { f() }\n  else if (bar()) { g() }\n  else { h() }\n};\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u7684\u672c\u8d28\uff0c\u5c31\u662f\u6839\u636e\u51fd\u6570",(0,l.kt)("inlineCode",{parentName:"p"},"foo"),"\u7684\u6267\u884c\u7ed3\u679c\uff0c\u8c03\u7528\u4e0d\u540c\u7684\u51fd\u6570\uff0c\u5c06\u8fd4\u56de\u7ed3\u679c\u8d4b\u7ed9\u53d8\u91cf",(0,l.kt)("inlineCode",{parentName:"p"},"x"),"\u3002\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"do"),"\u8868\u8fbe\u5f0f\uff0c\u5c31\u5c06\u8fd9\u4e2a\u64cd\u4f5c\u7684\u610f\u56fe\u8868\u8fbe\u5f97\u975e\u5e38\u7b80\u6d01\u6e05\u6670\u3002\u800c\u4e14\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"do"),"\u5757\u7ea7\u4f5c\u7528\u57df\u63d0\u4f9b\u4e86\u5355\u72ec\u7684\u4f5c\u7528\u57df\uff0c\u5185\u90e8\u64cd\u4f5c\u53ef\u4ee5\u4e0e\u5168\u5c40\u4f5c\u7528\u57df\u9694\u7edd\u3002"),(0,l.kt)("p",null,"\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"do"),"\u8868\u8fbe\u5f0f\u5728 JSX \u8bed\u6cd5\u4e2d\u975e\u5e38\u597d\u7528\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"return (\n  <nav>\n    <Home />\n    {\n      do {\n        if (loggedIn) {\n          <LogoutButton />\n        } else {\n          <LoginButton />\n        }\n      }\n    }\n  </nav>\n)\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5982\u679c\u4e0d\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"do"),"\u8868\u8fbe\u5f0f\uff0c\u5c31\u53ea\u80fd\u7528\u4e09\u5143\u5224\u65ad\u8fd0\u7b97\u7b26\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"?:"),"\uff09\u3002\u90a3\u6837\u7684\u8bdd\uff0c\u4e00\u65e6\u5224\u65ad\u903b\u8f91\u590d\u6742\uff0c\u4ee3\u7801\u5c31\u4f1a\u53d8\u5f97\u5f88\u4e0d\u6613\u8bfb\u3002"),(0,l.kt)("h2",{id:"throw-\u8868\u8fbe\u5f0f"},"throw \u8868\u8fbe\u5f0f"),(0,l.kt)("p",null,"JavaScript \u8bed\u6cd5\u89c4\u5b9a",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u662f\u4e00\u4e2a\u547d\u4ee4\uff0c\u7528\u6765\u629b\u51fa\u9519\u8bef\uff0c\u4e0d\u80fd\u7528\u4e8e\u8868\u8fbe\u5f0f\u4e4b\u4e2d\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u62a5\u9519\nconsole.log(throw new Error());\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"console.log"),"\u7684\u53c2\u6570\u5fc5\u987b\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u5982\u679c\u662f\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u8bed\u53e5\u5c31\u4f1a\u62a5\u9519\u3002"),(0,l.kt)("p",null,"\u73b0\u5728\u6709\u4e00\u4e2a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tc39/proposal-throw-expressions"},"\u63d0\u6848"),"\uff0c\u5141\u8bb8",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u7528\u4e8e\u8868\u8fbe\u5f0f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'// \u53c2\u6570\u7684\u9ed8\u8ba4\u503c\nfunction save(filename = throw new TypeError("Argument required")) {\n}\n\n// \u7bad\u5934\u51fd\u6570\u7684\u8fd4\u56de\u503c\nlint(ast, {\n  with: () => throw new Error("avoid using \'with\' statements.")\n});\n\n// \u6761\u4ef6\u8868\u8fbe\u5f0f\nfunction getEncoder(encoding) {\n  const encoder = encoding === "utf8" ?\n    new UTF8Encoder() :\n    encoding === "utf16le" ?\n      new UTF16Encoder(false) :\n      encoding === "utf16be" ?\n        new UTF16Encoder(true) :\n        throw new Error("Unsupported encoding");\n}\n\n// \u903b\u8f91\u8868\u8fbe\u5f0f\nclass Product {\n  get id() {\n    return this._id;\n  }\n  set id(value) {\n    this._id = value || throw new Error("Invalid value");\n  }\n}\n')),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u90fd\u51fa\u73b0\u5728\u8868\u8fbe\u5f0f\u91cc\u9762\u3002"),(0,l.kt)("p",null,"\u8bed\u6cd5\u4e0a\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u8868\u8fbe\u5f0f\u91cc\u9762\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u4e0d\u518d\u662f\u4e00\u4e2a\u547d\u4ee4\uff0c\u800c\u662f\u4e00\u4e2a\u8fd0\u7b97\u7b26\u3002\u4e3a\u4e86\u907f\u514d\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u547d\u4ee4\u6df7\u6dc6\uff0c\u89c4\u5b9a",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u51fa\u73b0\u5728\u884c\u9996\uff0c\u4e00\u5f8b\u89e3\u91ca\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u8bed\u53e5\uff0c\u800c\u4e0d\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"throw"),"\u8868\u8fbe\u5f0f\u3002"),(0,l.kt)("h2",{id:"\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c"},"\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c"),(0,l.kt)("h3",{id:"\u8bed\u6cd5"},"\u8bed\u6cd5"),(0,l.kt)("p",null,"\u591a\u53c2\u6570\u7684\u51fd\u6570\u6709\u65f6\u9700\u8981\u7ed1\u5b9a\u5176\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u53c2\u6570\uff0c\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"function add(x, y) { return x + y; }\nfunction add7(x) { return x + 7; }\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"add7"),"\u51fd\u6570\u5176\u5b9e\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"add"),"\u51fd\u6570\u7684\u4e00\u4e2a\u7279\u6b8a\u7248\u672c\uff0c\u901a\u8fc7\u5c06\u4e00\u4e2a\u53c2\u6570\u7ed1\u5b9a\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"7"),"\uff0c\u5c31\u53ef\u4ee5\u4ece",(0,l.kt)("inlineCode",{parentName:"p"},"add"),"\u5f97\u5230",(0,l.kt)("inlineCode",{parentName:"p"},"add7"),"\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// bind \u65b9\u6cd5\nconst add7 = add.bind(null, 7);\n\n// \u7bad\u5934\u51fd\u6570\nconst add7 = x => add(x, 7);\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4e24\u79cd\u5199\u6cd5\u90fd\u6709\u4e9b\u5197\u4f59\u3002\u5176\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"bind"),"\u65b9\u6cd5\u7684\u5c40\u9650\u66f4\u52a0\u660e\u663e\uff0c\u5b83\u5fc5\u987b\u63d0\u4f9b",(0,l.kt)("inlineCode",{parentName:"p"},"this"),"\uff0c\u5e76\u4e14\u53ea\u80fd\u4ece\u524d\u5230\u540e\u4e00\u4e2a\u4e2a\u7ed1\u5b9a\u53c2\u6570\uff0c\u65e0\u6cd5\u53ea\u7ed1\u5b9a\u975e\u5934\u90e8\u7684\u53c2\u6570\u3002"),(0,l.kt)("p",null,"\u73b0\u5728\u6709\u4e00\u4e2a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tc39/proposal-partial-application"},"\u63d0\u6848"),"\uff0c\u4f7f\u5f97\u7ed1\u5b9a\u53c2\u6570\u5e76\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\u66f4\u52a0\u5bb9\u6613\u3002\u8fd9\u53eb\u505a\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\uff08partial application\uff09\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const add = (x, y) => x + y;\nconst addOne = add(1, ?);\n\nconst maxGreaterThanZero = Math.max(0, ...);\n")),(0,l.kt)("p",null,"\u6839\u636e\u65b0\u63d0\u6848\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"?"),"\u662f\u5355\u4e2a\u53c2\u6570\u7684\u5360\u4f4d\u7b26\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"..."),"\u662f\u591a\u4e2a\u53c2\u6570\u7684\u5360\u4f4d\u7b26\u3002\u4ee5\u4e0b\u7684\u5f62\u5f0f\u90fd\u5c5e\u4e8e\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"f(x, ?)\nf(x, ...)\nf(?, x)\nf(..., x)\nf(?, x, ?)\nf(..., x, ...)\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"?"),"\u548c",(0,l.kt)("inlineCode",{parentName:"p"},"..."),"\u53ea\u80fd\u51fa\u73b0\u5728\u51fd\u6570\u7684\u8c03\u7528\u4e4b\u4e2d\uff0c\u5e76\u4e14\u4f1a\u8fd4\u56de\u4e00\u4e2a\u65b0\u51fd\u6570\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const g = f(?, 1, ...);\n// \u7b49\u540c\u4e8e\nconst g = (x, ...y) => f(x, 1, ...y);\n")),(0,l.kt)("p",null,"\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"let obj = {\n  f(x, y) { return x + y; },\n};\n\nconst g = obj.f(?, 3);\ng(1) // 4\n")),(0,l.kt)("h3",{id:"\u6ce8\u610f\u70b9"},"\u6ce8\u610f\u70b9"),(0,l.kt)("p",null,"\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u6709\u4e00\u4e9b\u7279\u522b\u6ce8\u610f\u7684\u5730\u65b9\u3002"),(0,l.kt)("p",null,"\uff081\uff09\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u662f\u57fa\u4e8e\u539f\u51fd\u6570\u7684\u3002\u5982\u679c\u539f\u51fd\u6570\u53d1\u751f\u53d8\u5316\uff0c\u90e8\u5206\u6267\u884c\u751f\u6210\u7684\u65b0\u51fd\u6570\u4e5f\u4f1a\u7acb\u5373\u53cd\u6620\u8fd9\u79cd\u53d8\u5316\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"let f = (x, y) => x + y;\n\nconst g = f(?, 3);\ng(1); // 4\n\n// \u66ff\u6362\u51fd\u6570 f\nf = (x, y) => x * y;\n\ng(1); // 3\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u5b9a\u4e49\u4e86\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u4ee5\u540e\uff0c\u66f4\u6362\u539f\u51fd\u6570\u4f1a\u7acb\u5373\u5f71\u54cd\u5230\u65b0\u51fd\u6570\u3002"),(0,l.kt)("p",null,"\uff082\uff09\u5982\u679c\u9884\u5148\u63d0\u4f9b\u7684\u90a3\u4e2a\u503c\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5e76\u4e0d\u4f1a\u5728\u5b9a\u4e49\u65f6\u6c42\u503c\uff0c\u800c\u662f\u5728\u6bcf\u6b21\u8c03\u7528\u65f6\u6c42\u503c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"let a = 3;\nconst f = (x, y) => x + y;\n\nconst g = f(?, a);\ng(1); // 4\n\n// \u6539\u53d8 a \u7684\u503c\na = 10;\ng(1); // 11\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u9884\u5148\u63d0\u4f9b\u7684\u53c2\u6570\u662f\u53d8\u91cf",(0,l.kt)("inlineCode",{parentName:"p"},"a"),"\uff0c\u90a3\u4e48\u6bcf\u6b21\u8c03\u7528\u51fd\u6570",(0,l.kt)("inlineCode",{parentName:"p"},"g"),"\u7684\u65f6\u5019\uff0c\u624d\u4f1a\u5bf9",(0,l.kt)("inlineCode",{parentName:"p"},"a"),"\u8fdb\u884c\u6c42\u503c\u3002"),(0,l.kt)("p",null,"\uff083\uff09\u5982\u679c\u65b0\u51fd\u6570\u7684\u53c2\u6570\u591a\u4e8e\u5360\u4f4d\u7b26\u7684\u6570\u91cf\uff0c\u90a3\u4e48\u591a\u4f59\u7684\u53c2\u6570\u5c06\u88ab\u5ffd\u7565\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const f = (x, ...y) => [x, ...y];\nconst g = f(?, 1);\ng(2, 3, 4); // [2, 1]\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u51fd\u6570",(0,l.kt)("inlineCode",{parentName:"p"},"g"),"\u53ea\u6709\u4e00\u4e2a\u5360\u4f4d\u7b26\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u5b83\u53ea\u80fd\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff0c\u591a\u4f59\u7684\u53c2\u6570\u90fd\u4f1a\u88ab\u5ffd\u7565\u3002"),(0,l.kt)("p",null,"\u5199\u6210\u4e0b\u9762\u8fd9\u6837\uff0c\u591a\u4f59\u7684\u53c2\u6570\u5c31\u6ca1\u6709\u95ee\u9898\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const f = (x, ...y) => [x, ...y];\nconst g = f(?, 1, ...);\ng(2, 3, 4); // [2, 1, 3, 4];\n")),(0,l.kt)("p",null,"\uff084\uff09",(0,l.kt)("inlineCode",{parentName:"p"},"..."),"\u53ea\u4f1a\u88ab\u91c7\u96c6\u4e00\u6b21\uff0c\u5982\u679c\u51fd\u6570\u7684\u90e8\u5206\u6267\u884c\u4f7f\u7528\u4e86\u591a\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"..."),"\uff0c\u90a3\u4e48\u6bcf\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"..."),"\u7684\u503c\u90fd\u5c06\u76f8\u540c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const f = (...x) => x;\nconst g = f(..., 9, ...);\ng(1, 2, 3); // [1, 2, 3, 9, 1, 2, 3]\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"g"),"\u5b9a\u4e49\u4e86\u4e24\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"..."),"\u5360\u4f4d\u7b26\uff0c\u771f\u6b63\u6267\u884c\u7684\u65f6\u5019\uff0c\u5b83\u4eec\u7684\u503c\u662f\u4e00\u6837\u7684\u3002"),(0,l.kt)("h2",{id:"\u7ba1\u9053\u8fd0\u7b97\u7b26"},"\u7ba1\u9053\u8fd0\u7b97\u7b26"),(0,l.kt)("p",null,"Unix \u64cd\u4f5c\u7cfb\u7edf\u6709\u4e00\u4e2a\u7ba1\u9053\u673a\u5236\uff08pipeline\uff09\uff0c\u53ef\u4ee5\u628a\u524d\u4e00\u4e2a\u64cd\u4f5c\u7684\u503c\u4f20\u7ed9\u540e\u4e00\u4e2a\u64cd\u4f5c\u3002\u8fd9\u4e2a\u673a\u5236\u975e\u5e38\u6709\u7528\uff0c\u4f7f\u5f97\u7b80\u5355\u7684\u64cd\u4f5c\u53ef\u4ee5\u7ec4\u5408\u6210\u4e3a\u590d\u6742\u7684\u64cd\u4f5c\u3002\u8bb8\u591a\u8bed\u8a00\u90fd\u6709\u7ba1\u9053\u7684\u5b9e\u73b0\uff0c\u73b0\u5728\u6709\u4e00\u4e2a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tc39/proposal-pipeline-operator"},"\u63d0\u6848"),"\uff0c\u8ba9 JavaScript \u4e5f\u62e5\u6709\u7ba1\u9053\u673a\u5236\u3002"),(0,l.kt)("p",null,"JavaScript \u7684\u7ba1\u9053\u662f\u4e00\u4e2a\u8fd0\u7b97\u7b26\uff0c\u5199\u4f5c",(0,l.kt)("inlineCode",{parentName:"p"},"|>"),"\u3002\u5b83\u7684\u5de6\u8fb9\u662f\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u53f3\u8fb9\u662f\u4e00\u4e2a\u51fd\u6570\u3002\u7ba1\u9053\u8fd0\u7b97\u7b26\u628a\u5de6\u8fb9\u8868\u8fbe\u5f0f\u7684\u503c\uff0c\u4f20\u5165\u53f3\u8fb9\u7684\u51fd\u6570\u8fdb\u884c\u6c42\u503c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"x |> f\n// \u7b49\u540c\u4e8e\nf(x)\n")),(0,l.kt)("p",null,"\u7ba1\u9053\u8fd0\u7b97\u7b26\u6700\u5927\u7684\u597d\u5904\uff0c\u5c31\u662f\u53ef\u4ee5\u628a\u5d4c\u5957\u7684\u51fd\u6570\uff0c\u5199\u6210\u4ece\u5de6\u5230\u53f3\u7684\u94fe\u5f0f\u8868\u8fbe\u5f0f\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"function doubleSay (str) {\n  return str + \", \" + str;\n}\n\nfunction capitalize (str) {\n  return str[0].toUpperCase() + str.substring(1);\n}\n\nfunction exclaim (str) {\n  return str + '!';\n}\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u662f\u4e09\u4e2a\u7b80\u5355\u7684\u51fd\u6570\u3002\u5982\u679c\u8981\u5d4c\u5957\u6267\u884c\uff0c\u4f20\u7edf\u7684\u5199\u6cd5\u548c\u7ba1\u9053\u7684\u5199\u6cd5\u5206\u522b\u5982\u4e0b\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u4f20\u7edf\u7684\u5199\u6cd5\nexclaim(capitalize(doubleSay('hello')))\n// \"Hello, hello!\"\n\n// \u7ba1\u9053\u7684\u5199\u6cd5\n'hello'\n  |> doubleSay\n  |> capitalize\n  |> exclaim\n// \"Hello, hello!\"\n")),(0,l.kt)("p",null,"\u7ba1\u9053\u8fd0\u7b97\u7b26\u53ea\u80fd\u4f20\u9012\u4e00\u4e2a\u503c\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u53f3\u8fb9\u7684\u51fd\u6570\u5fc5\u987b\u662f\u4e00\u4e2a\u5355\u53c2\u6570\u51fd\u6570\u3002\u5982\u679c\u662f\u591a\u53c2\u6570\u51fd\u6570\uff0c\u5c31\u5fc5\u987b\u8fdb\u884c\u67ef\u91cc\u5316\uff0c\u6539\u6210\u5355\u53c2\u6570\u7684\u7248\u672c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"function double (x) { return x + x; }\nfunction add (x, y) { return x + y; }\n\nlet person = { score: 25 };\nperson.score\n  |> double\n  |> (_ => add(7, _))\n// 57\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"add"),"\u51fd\u6570\u9700\u8981\u4e24\u4e2a\u53c2\u6570\u3002\u4f46\u662f\uff0c\u7ba1\u9053\u8fd0\u7b97\u7b26\u53ea\u80fd\u4f20\u5165\u4e00\u4e2a\u503c\uff0c\u56e0\u6b64\u9700\u8981\u4e8b\u5148\u63d0\u4f9b\u53e6\u4e00\u4e2a\u53c2\u6570\uff0c\u5e76\u5c06\u5176\u6539\u6210\u5355\u53c2\u6570\u7684\u7bad\u5934\u51fd\u6570",(0,l.kt)("inlineCode",{parentName:"p"},"_ => add(7, _)"),"\u3002\u8fd9\u4e2a\u51fd\u6570\u91cc\u9762\u7684\u4e0b\u5212\u7ebf\u5e76\u6ca1\u6709\u7279\u522b\u7684\u542b\u4e49\uff0c\u53ef\u4ee5\u7528\u5176\u4ed6\u7b26\u53f7\u4ee3\u66ff\uff0c\u4f7f\u7528\u4e0b\u5212\u7ebf\u53ea\u662f\u56e0\u4e3a\uff0c\u5b83\u80fd\u591f\u5f62\u8c61\u5730\u8868\u793a\u8fd9\u91cc\u662f\u5360\u4f4d\u7b26\u3002"),(0,l.kt)("p",null,"\u7ba1\u9053\u8fd0\u7b97\u7b26\u5bf9\u4e8e",(0,l.kt)("inlineCode",{parentName:"p"},"await"),"\u51fd\u6570\u4e5f\u9002\u7528\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"x |> await f\n// \u7b49\u540c\u4e8e\nawait f(x)\n\nconst userAge = userId |> await fetchUserById |> getAgeFromUser;\n// \u7b49\u540c\u4e8e\nconst userAge = getAgeFromUser(await fetchUserById(userId));\n")),(0,l.kt)("h2",{id:"mathsignbit"},"Math.signbit()"),(0,l.kt)("p",null,"JavaScript \u5185\u90e8\u4f7f\u752864\u4f4d\u6d6e\u70b9\u6570\uff08\u56fd\u9645\u6807\u51c6 IEEE 754\uff09\u8868\u793a\u6570\u503c\u3002IEEE 754 \u89c4\u5b9a\uff0c64\u4f4d\u6d6e\u70b9\u6570\u7684\u7b2c\u4e00\u4f4d\u662f\u7b26\u53f7\u4f4d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"0"),"\u8868\u793a\u6b63\u6570\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"1"),"\u8868\u793a\u8d1f\u6570\u3002\u6240\u4ee5\u4f1a\u6709\u4e24\u79cd\u96f6\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"+0"),"\u662f\u7b26\u53f7\u4f4d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"0"),"\u65f6\u7684\u96f6\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"-0"),"\u662f\u7b26\u53f7\u4f4d\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"1"),"\u65f6\u7684\u96f6\u3002\u5b9e\u9645\u7f16\u7a0b\u4e2d\uff0c\u5224\u65ad\u4e00\u4e2a\u503c\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"+0"),"\u8fd8\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"-0"),"\u975e\u5e38\u9ebb\u70e6\uff0c\u56e0\u4e3a\u5b83\u4eec\u662f\u76f8\u7b49\u7684\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"+0 === -0 // true\n")),(0,l.kt)("p",null,"ES6 \u65b0\u589e\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"Math.sign()"),"\u65b9\u6cd5\uff0c\u53ea\u80fd\u7528\u6765\u5224\u65ad\u6570\u503c\u7684\u6b63\u8d1f\uff0c\u5bf9\u4e8e\u5224\u65ad\u6570\u503c\u7684\u7b26\u53f7\u4f4d\u7528\u5904\u4e0d\u5927\u3002\u56e0\u4e3a\u5982\u679c\u53c2\u6570\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"-0"),"\uff0c\u5b83\u4f1a\u8fd4\u56de",(0,l.kt)("inlineCode",{parentName:"p"},"-0"),"\uff0c\u8fd8\u662f\u4e0d\u80fd\u76f4\u63a5\u77e5\u9053\u7b26\u53f7\u4f4d\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"1"),"\u8fd8\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"0"),"\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"Math.sign(-0) // -0\n")),(0,l.kt)("p",null,"\u76ee\u524d\uff0c\u6709\u4e00\u4e2a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tc39/proposal-Math.signbit"},"\u63d0\u6848"),"\uff0c\u5f15\u5165\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"Math.signbit()"),"\u65b9\u6cd5\u5224\u65ad\u4e00\u4e2a\u6570\u7684\u7b26\u53f7\u4f4d\u662f\u5426\u8bbe\u7f6e\u4e86\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"Math.signbit(2) //false\nMath.signbit(-2) //true\nMath.signbit(0) //false\nMath.signbit(-0) //true\n")),(0,l.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u8be5\u65b9\u6cd5\u6b63\u786e\u8fd4\u56de\u4e86",(0,l.kt)("inlineCode",{parentName:"p"},"-0"),"\u7684\u7b26\u53f7\u4f4d\u662f\u8bbe\u7f6e\u4e86\u7684\u3002"),(0,l.kt)("p",null,"\u8be5\u65b9\u6cd5\u7684\u7b97\u6cd5\u5982\u4e0b\u3002"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u53c2\u6570\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"NaN"),"\uff0c\u8fd4\u56de",(0,l.kt)("inlineCode",{parentName:"li"},"false")),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u53c2\u6570\u662f",(0,l.kt)("inlineCode",{parentName:"li"},"-0"),"\uff0c\u8fd4\u56de",(0,l.kt)("inlineCode",{parentName:"li"},"true")),(0,l.kt)("li",{parentName:"ul"},"\u5982\u679c\u53c2\u6570\u662f\u8d1f\u503c\uff0c\u8fd4\u56de",(0,l.kt)("inlineCode",{parentName:"li"},"true")),(0,l.kt)("li",{parentName:"ul"},"\u5176\u4ed6\u60c5\u51b5\u8fd4\u56de",(0,l.kt)("inlineCode",{parentName:"li"},"false"))),(0,l.kt)("h2",{id:"\u53cc\u5192\u53f7\u8fd0\u7b97\u7b26"},"\u53cc\u5192\u53f7\u8fd0\u7b97\u7b26"),(0,l.kt)("p",null,"\u7bad\u5934\u51fd\u6570\u53ef\u4ee5\u7ed1\u5b9a",(0,l.kt)("inlineCode",{parentName:"p"},"this"),"\u5bf9\u8c61\uff0c\u5927\u5927\u51cf\u5c11\u4e86\u663e\u5f0f\u7ed1\u5b9a",(0,l.kt)("inlineCode",{parentName:"p"},"this"),"\u5bf9\u8c61\u7684\u5199\u6cd5\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"call()"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"apply()"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"bind()"),"\uff09\u3002\u4f46\u662f\uff0c\u7bad\u5934\u51fd\u6570\u5e76\u4e0d\u9002\u7528\u4e8e\u6240\u6709\u573a\u5408\uff0c\u6240\u4ee5\u73b0\u5728\u6709\u4e00\u4e2a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/zenparsing/es-function-bind"},"\u63d0\u6848"),"\uff0c\u63d0\u51fa\u4e86\u201c\u51fd\u6570\u7ed1\u5b9a\u201d\uff08function bind\uff09\u8fd0\u7b97\u7b26\uff0c\u7528\u6765\u53d6\u4ee3",(0,l.kt)("inlineCode",{parentName:"p"},"call()"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"apply()"),"\u3001",(0,l.kt)("inlineCode",{parentName:"p"},"bind()"),"\u8c03\u7528\u3002"),(0,l.kt)("p",null,"\u51fd\u6570\u7ed1\u5b9a\u8fd0\u7b97\u7b26\u662f\u5e76\u6392\u7684\u4e24\u4e2a\u5192\u53f7\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"::"),"\uff09\uff0c\u53cc\u5192\u53f7\u5de6\u8fb9\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53f3\u8fb9\u662f\u4e00\u4e2a\u51fd\u6570\u3002\u8be5\u8fd0\u7b97\u7b26\u4f1a\u81ea\u52a8\u5c06\u5de6\u8fb9\u7684\u5bf9\u8c61\uff0c\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u73af\u5883\uff08\u5373",(0,l.kt)("inlineCode",{parentName:"p"},"this"),"\u5bf9\u8c61\uff09\uff0c\u7ed1\u5b9a\u5230\u53f3\u8fb9\u7684\u51fd\u6570\u4e0a\u9762\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"foo::bar;\n// \u7b49\u540c\u4e8e\nbar.bind(foo);\n\nfoo::bar(...arguments);\n// \u7b49\u540c\u4e8e\nbar.apply(foo, arguments);\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn(obj, key) {\n  return obj::hasOwnProperty(key);\n}\n")),(0,l.kt)("p",null,"\u5982\u679c\u53cc\u5192\u53f7\u5de6\u8fb9\u4e3a\u7a7a\uff0c\u53f3\u8fb9\u662f\u4e00\u4e2a\u5bf9\u8c61\u7684\u65b9\u6cd5\uff0c\u5219\u7b49\u4e8e\u5c06\u8be5\u65b9\u6cd5\u7ed1\u5b9a\u5728\u8be5\u5bf9\u8c61\u4e0a\u9762\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"var method = obj::obj.foo;\n// \u7b49\u540c\u4e8e\nvar method = ::obj.foo;\n\nlet log = ::console.log;\n// \u7b49\u540c\u4e8e\nvar log = console.log.bind(console);\n")),(0,l.kt)("p",null,"\u5982\u679c\u53cc\u5192\u53f7\u8fd0\u7b97\u7b26\u7684\u8fd0\u7b97\u7ed3\u679c\uff0c\u8fd8\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u91c7\u7528\u94fe\u5f0f\u5199\u6cd5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'import { map, takeWhile, forEach } from "iterlib";\n\ngetPlayers()\n::map(x => x.character())\n::takeWhile(x => x.strength > 100)\n::forEach(x => console.log(x));\n')),(0,l.kt)("h2",{id:"realm-api"},"Realm API"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/tc39/proposal-realms"},"Realm API")," \u63d0\u4f9b\u6c99\u7bb1\u529f\u80fd\uff08sandbox\uff09\uff0c\u5141\u8bb8\u9694\u79bb\u4ee3\u7801\uff0c\u9632\u6b62\u90a3\u4e9b\u88ab\u9694\u79bb\u7684\u4ee3\u7801\u62ff\u5230\u5168\u5c40\u5bf9\u8c61\u3002"),(0,l.kt)("p",null,"\u4ee5\u524d\uff0c\u7ecf\u5e38\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"<iframe>"),"\u4f5c\u4e3a\u6c99\u7bb1\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const globalOne = window;\nlet iframe = document.createElement('iframe');\ndocument.body.appendChild(iframe);\nconst globalTwo = iframe.contentWindow;\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"<iframe>"),"\u7684\u5168\u5c40\u5bf9\u8c61\u662f\u72ec\u7acb\u7684\uff08",(0,l.kt)("inlineCode",{parentName:"p"},"iframe.contentWindow"),"\uff09\u3002Realm API \u53ef\u4ee5\u53d6\u4ee3\u8fd9\u4e2a\u529f\u80fd\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const globalOne = window;\nconst globalTwo = new Realm().global;\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Realm API"),"\u5355\u72ec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5168\u5c40\u5bf9\u8c61",(0,l.kt)("inlineCode",{parentName:"p"},"new Realm().global"),"\u3002"),(0,l.kt)("p",null,"Realm API \u63d0\u4f9b\u4e00\u4e2a",(0,l.kt)("inlineCode",{parentName:"p"},"Realm()"),"\u6784\u9020\u51fd\u6570\uff0c\u7528\u6765\u751f\u6210\u4e00\u4e2a Realm \u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"global"),"\u5c5e\u6027\u6307\u5411\u4e00\u4e2a\u65b0\u7684\u9876\u5c42\u5bf9\u8c61\uff0c\u8fd9\u4e2a\u9876\u5c42\u5bf9\u8c61\u8ddf\u539f\u59cb\u7684\u9876\u5c42\u5bf9\u8c61\u7c7b\u4f3c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const globalOne = window;\nconst globalTwo = new Realm().global;\n\nglobalOne.evaluate('1 + 2') // 3\nglobalTwo.evaluate('1 + 2') // 3\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cRealm \u751f\u6210\u7684\u9876\u5c42\u5bf9\u8c61\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"evaluate()"),"\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8fd0\u884c\u4ee3\u7801\u3002"),(0,l.kt)("p",null,"\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u8bc1\u660e\uff0cRealm \u9876\u5c42\u5bf9\u8c61\u4e0e\u539f\u59cb\u9876\u5c42\u5bf9\u8c61\u662f\u4e24\u4e2a\u5bf9\u8c61\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"let a1 = globalOne.evaluate('[1,2,3]');\nlet a2 = globalTwo.evaluate('[1,2,3]');\na1.prototype === a2.prototype; // false\na1 instanceof globalTwo.Array; // false\na2 instanceof globalOne.Array; // false\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cRealm \u6c99\u7bb1\u91cc\u9762\u7684\u6570\u7ec4\u7684\u539f\u578b\u5bf9\u8c61\uff0c\u8ddf\u539f\u59cb\u73af\u5883\u91cc\u9762\u7684\u6570\u7ec4\u662f\u4e0d\u4e00\u6837\u7684\u3002"),(0,l.kt)("p",null,"Realm \u6c99\u7bb1\u91cc\u9762\u53ea\u80fd\u8fd0\u884c ECMAScript \u8bed\u6cd5\u63d0\u4f9b\u7684 API\uff0c\u4e0d\u80fd\u8fd0\u884c\u5bbf\u4e3b\u73af\u5883\u63d0\u4f9b\u7684 API\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"globalTwo.evaluate('console.log(1)')\n// throw an error: console is undefined\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0cRealm \u6c99\u7bb1\u91cc\u9762\u6ca1\u6709",(0,l.kt)("inlineCode",{parentName:"p"},"console"),"\u5bf9\u8c61\uff0c\u5bfc\u81f4\u62a5\u9519\u3002\u56e0\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"console"),"\u4e0d\u662f\u8bed\u6cd5\u6807\u51c6\uff0c\u662f\u5bbf\u4e3b\u73af\u5883\u63d0\u4f9b\u7684\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u4ee3\u7801\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"globalTwo.console = globalOne.console;\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Realm()"),"\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\u5bf9\u8c61\uff0c\u8be5\u53c2\u6570\u5bf9\u8c61\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"intrinsics"),"\u5c5e\u6027\u53ef\u4ee5\u6307\u5b9a Realm \u6c99\u7bb1\u7ee7\u627f\u539f\u59cb\u9876\u5c42\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const r1 = new Realm();\nr1.global === this;\nr1.global.JSON === JSON; // false\n\nconst r2 = new Realm({ intrinsics: 'inherit' });\nr2.global === this; // false\nr2.global.JSON === JSON; // true\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u6c99\u7bb1\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"JSON"),"\u65b9\u6cd5\u4e0d\u540c\u4e8e\u539f\u59cb\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"JSON"),"\u5bf9\u8c61\u3002\u4f46\u662f\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Realm()"),"\u6784\u9020\u51fd\u6570\u63a5\u53d7",(0,l.kt)("inlineCode",{parentName:"p"},"{ intrinsics: 'inherit' }"),"\u4f5c\u4e3a\u53c2\u6570\u4ee5\u540e\uff0c\u5c31\u4f1a\u7ee7\u627f\u539f\u59cb\u9876\u5c42\u5bf9\u8c61\u7684\u65b9\u6cd5\u3002"),(0,l.kt)("p",null,"\u7528\u6237\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49",(0,l.kt)("inlineCode",{parentName:"p"},"Realm"),"\u7684\u5b50\u7c7b\uff0c\u7528\u6765\u5b9a\u5236\u81ea\u5df1\u7684\u6c99\u7bb1\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"class FakeWindow extends Realm {\n  init() {\n    super.init();\n    let global = this.global;\n\n    global.document = new FakeDocument(...);\n    global.alert = new Proxy(fakeAlert, { ... });\n    // ...\n  }\n}\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\u4e2d\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"FakeWindow"),"\u6a21\u62df\u4e86\u4e00\u4e2a\u5047\u7684\u9876\u5c42\u5bf9\u8c61",(0,l.kt)("inlineCode",{parentName:"p"},"window"),"\u3002"),(0,l.kt)("h2",{id:"json-\u6a21\u5757"},"JSON \u6a21\u5757"),(0,l.kt)("p",null,"import\u547d\u4ee4\u76ee\u524d\u53ea\u80fd\u7528\u4e8e\u52a0\u8f7d ES \u6a21\u5757\uff0c\u73b0\u5728\u6709\u4e00\u4e2a",(0,l.kt)("a",{parentName:"p",href:"https://github.com/tc39/proposal-json-modules"},"\u63d0\u6848"),"\uff0c\u5141\u8bb8\u52a0\u8f7d JSON \u6a21\u5757\u3002"),(0,l.kt)("p",null,"\u5047\u5b9a\u6709\u4e00\u4e2a JSON \u6a21\u5757\u6587\u4ef6",(0,l.kt)("inlineCode",{parentName:"p"},"config.json"),"\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'{\n  "appName": "My App"\n}\n')),(0,l.kt)("p",null,"\u76ee\u524d\uff0c\u53ea\u80fd\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"fetch()"),"\u52a0\u8f7d JSON \u6a21\u5757\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const response = await fetch('./config.json');\nconst json = await response.json();\n")),(0,l.kt)("p",null,"import\u547d\u4ee4\u80fd\u591f\u76f4\u63a5\u52a0\u8f7d JSON \u6a21\u5757\u4ee5\u540e\uff0c\u5c31\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u5199\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"import configData from './config.json' assert { type: \"json\" };\nconsole.log(configData.appName);\n")),(0,l.kt)("p",null,"\u4e0a\u9762\u793a\u4f8b\u4e2d\uff0c\u6574\u4e2a JSON \u5bf9\u8c61\u88ab\u5bfc\u5165\u4e3a",(0,l.kt)("inlineCode",{parentName:"p"},"configData"),"\u5bf9\u8c61\uff0c\u7136\u540e\u5c31\u53ef\u4ee5\u4ece\u8be5\u5bf9\u8c61\u83b7\u53d6 JSON \u6570\u636e\u3002"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"import"),"\u547d\u4ee4\u5bfc\u5165 JSON \u6a21\u5757\u65f6\uff0c\u547d\u4ee4\u7ed3\u5c3e\u7684",(0,l.kt)("inlineCode",{parentName:"p"},'assert {type: "json"}'),"\u4e0d\u53ef\u7f3a\u5c11\u3002\u8fd9\u53eb\u505a\u5bfc\u5165\u65ad\u8a00\uff0c\u7528\u6765\u544a\u8bc9 JavaScript \u5f15\u64ce\uff0c\u73b0\u5728\u52a0\u8f7d\u7684\u662f JSON \u6a21\u5757\u3002\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},".json"),"\u540e\u7f00\u540d\u5224\u65ad\u5462\uff1f\u56e0\u4e3a\u6d4f\u89c8\u5668\u7684\u4f20\u7edf\u662f\u4e0d\u901a\u8fc7\u540e\u7f00\u540d\u5224\u65ad\u6587\u4ef6\u7c7b\u578b\uff0c\u6807\u51c6\u59d4\u5458\u4f1a\u5e0c\u671b\u9075\u5faa\u8fd9\u79cd\u505a\u6cd5\uff0c\u8fd9\u6837\u4e5f\u53ef\u4ee5\u907f\u514d\u4e00\u4e9b\u5b89\u5168\u95ee\u9898\u3002"),(0,l.kt)("p",null,"\u5bfc\u5165\u65ad\u8a00\u662f JavaScript \u5bfc\u5165\u5176\u4ed6\u683c\u5f0f\u6a21\u5757\u7684\u6807\u51c6\u5199\u6cd5\uff0cJSON \u6a21\u5757\u5c06\u662f\u7b2c\u4e00\u4e2a\u4f7f\u7528\u8fd9\u79cd\u8bed\u6cd5\u5bfc\u5165\u7684\u6a21\u5757\u3002\u4ee5\u540e\uff0c\u8fd8\u4f1a\u652f\u6301\u5bfc\u5165 CSS \u6a21\u5757\u3001HTML \u6a21\u5757\u7b49\u7b49\u3002"),(0,l.kt)("p",null,"\u52a8\u6001\u52a0\u8f7d\u6a21\u5757\u7684",(0,l.kt)("inlineCode",{parentName:"p"},"import()"),"\u51fd\u6570\u4e5f\u652f\u6301\u52a0\u8f7d JSON \u6a21\u5757\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"import('./config.json', { assert: { type: 'json' } })\n")),(0,l.kt)("p",null,"\u811a\u672c\u52a0\u8f7d JSON \u6a21\u5757\u4ee5\u540e\uff0c\u8fd8\u53ef\u4ee5\u518d\u7528 export \u547d\u4ee4\u8f93\u51fa\u3002\u8fd9\u65f6\uff0c\u53ef\u4ee5\u5c06 export \u548c import \u7ed3\u5408\u6210\u4e00\u4e2a\u8bed\u53e5\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"export { config } from './config.json' assert { type: 'json' };\n")))}d.isMDXComponent=!0}}]);