"use strict";(self.webpackChunknote=self.webpackChunknote||[]).push([[5692],{3905:(n,e,t)=>{t.d(e,{Zo:()=>u,kt:()=>k});var a=t(7294);function l(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function r(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function o(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?r(Object(t),!0).forEach((function(e){l(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function s(n,e){if(null==n)return{};var t,a,l=function(n,e){if(null==n)return{};var t,a,l={},r=Object.keys(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||(l[t]=n[t]);return l}(n,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(a=0;a<r.length;a++)t=r[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(l[t]=n[t])}return l}var p=a.createContext({}),i=function(n){var e=a.useContext(p),t=e;return n&&(t="function"==typeof n?n(e):o(o({},e),n)),t},u=function(n){var e=i(n.components);return a.createElement(p.Provider,{value:e},n.children)},c={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(n,e){var t=n.components,l=n.mdxType,r=n.originalType,p=n.parentName,u=s(n,["components","mdxType","originalType","parentName"]),m=i(t),k=l,d=m["".concat(p,".").concat(k)]||m[k]||c[k]||r;return t?a.createElement(d,o(o({ref:e},u),{},{components:t})):a.createElement(d,o({ref:e},u))}));function k(n,e){var t=arguments,l=e&&e.mdxType;if("string"==typeof n||l){var r=t.length,o=new Array(r);o[0]=m;var s={};for(var p in e)hasOwnProperty.call(e,p)&&(s[p]=e[p]);s.originalType=n,s.mdxType="string"==typeof n?n:l,o[1]=s;for(var i=2;i<r;i++)o[i]=t[i];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},8324:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>i});var a=t(7462),l=(t(7294),t(3905));const r={},o=void 0,s={unversionedId:"\u7b2c 4 \u7ae0 \u8bbe\u8ba1\u6a21\u5f0f",id:"\u7b2c 4 \u7ae0 \u8bbe\u8ba1\u6a21\u5f0f",title:"\u7b2c 4 \u7ae0 \u8bbe\u8ba1\u6a21\u5f0f",description:"\u524d\u8a00",source:"@site/docs\\\u7b2c 4 \u7ae0 \u8bbe\u8ba1\u6a21\u5f0f.md",sourceDirName:".",slug:"/\u7b2c 4 \u7ae0 \u8bbe\u8ba1\u6a21\u5f0f",permalink:"/hijulien/docs/\u7b2c 4 \u7ae0 \u8bbe\u8ba1\u6a21\u5f0f",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u7b2c 3 \u7ae0 \u9762\u5411\u5bf9\u8c61",permalink:"/hijulien/docs/\u7b2c 3 \u7ae0 \u9762\u5411\u5bf9\u8c61"},next:{title:"\u7b2c 5 \u7ae0 \u6a21\u5757\u5316",permalink:"/hijulien/docs/\u7b2c 5 \u7ae0 \u6a21\u5757\u5316"}},p={},i=[{value:"\u524d\u8a00",id:"\u524d\u8a00",level:2},{value:"\u5355\u4e00\u804c\u8d23\u539f\u5219",id:"\u5355\u4e00\u804c\u8d23\u539f\u5219",level:3},{value:"\u91cc\u6c0f\u66ff\u6362\u539f\u5219",id:"\u91cc\u6c0f\u66ff\u6362\u539f\u5219",level:3},{value:"\u4f9d\u8d56\u5012\u7f6e\u539f\u5219",id:"\u4f9d\u8d56\u5012\u7f6e\u539f\u5219",level:3},{value:"\u63a5\u53e3\u9694\u79bb\u539f\u5219",id:"\u63a5\u53e3\u9694\u79bb\u539f\u5219",level:3},{value:"\u8fea\u7c73\u7279\u6cd5\u5219",id:"\u8fea\u7c73\u7279\u6cd5\u5219",level:3},{value:"\u5f00\u95ed\u539f\u5219",id:"\u5f00\u95ed\u539f\u5219",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:3},{value:"1 \u5355\u4f8b\u6a21\u5f0f",id:"1-\u5355\u4f8b\u6a21\u5f0f",level:2},{value:"2  \u5de5\u5382\u6a21\u5f0f",id:"2--\u5de5\u5382\u6a21\u5f0f",level:2},{value:"3 \u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f",id:"3-\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f",level:2},{value:"3.1 \u57fa\u672c\u5b9e\u73b0",id:"31-\u57fa\u672c\u5b9e\u73b0",level:3},{value:"3.2 Vue \u7684\u5b9e\u73b0\u539f\u7406",id:"32-vue-\u7684\u5b9e\u73b0\u539f\u7406",level:3},{value:"3.2.1 Observer",id:"321-observer",level:4},{value:"3.2.2 Dep",id:"322-dep",level:4},{value:"3.2.3 Watcher",id:"323-watcher",level:4},{value:"3.3 Vue",id:"33-vue",level:3},{value:"4 \u4ee3\u7406\u6a21\u5f0f",id:"4-\u4ee3\u7406\u6a21\u5f0f",level:2},{value:"4.1 \u865a\u62df\u4ee3\u7406\uff1a\u56fe\u7247\u52a0\u8f7d",id:"41-\u865a\u62df\u4ee3\u7406\u56fe\u7247\u52a0\u8f7d",level:4},{value:"4.2 \u7f13\u5b58\u4ee3\u7406\uff1a\u8bb0\u5fc6\u51fd\u6570",id:"42-\u7f13\u5b58\u4ee3\u7406\u8bb0\u5fc6\u51fd\u6570",level:4},{value:"5 \u7ae0 \u7b56\u7565\u6a21\u5f0f",id:"5-\u7ae0-\u7b56\u7565\u6a21\u5f0f",level:2},{value:"5.1 \u8ba1\u7b97\u5458\u5de5\u5956\u91d1",id:"51-\u8ba1\u7b97\u5458\u5de5\u5956\u91d1",level:4},{value:"5.2 \u8868\u5355\u9a8c\u8bc1",id:"52-\u8868\u5355\u9a8c\u8bc1",level:4},{value:"6 \u7ae0 \u88c5\u9970\u8005\u6a21\u5f0f",id:"6-\u7ae0-\u88c5\u9970\u8005\u6a21\u5f0f",level:2},{value:"6.1 \u6848\u4f8b",id:"61-\u6848\u4f8b",level:3},{value:"6.2 \u88c5\u9970\u8bed\u6cd5 decorator",id:"62-\u88c5\u9970\u8bed\u6cd5-decorator",level:3}],u={toc:i};function c(n){let{components:e,...t}=n;return(0,l.kt)("wrapper",(0,a.Z)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"\u524d\u8a00"},"\u524d\u8a00"),(0,l.kt)("p",null,"\u5728\u5b66\u4e60\u5c01\u88c5\u65f6\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u5c01\u88c5\u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u6838\u5fc3\u5c31\u662f\u8981\u5b66\u4f1a\u63d0\u70bc\u53ef\u590d\u7528\u7684\u516c\u5171\u903b\u8f91\u3002"),(0,l.kt)("p",null,"\u800c\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5c31\u662f\u5927\u4f6c\u4eec\u5728\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\uff0c\u9010\u6e10\u63d0\u70bc\u51fa\u6765\u7684\u4e00\u7cfb\u5217\u53ef\u590d\u7528\u7684\u516c\u5171\u903b\u8f91\u3002\u8bbe\u8ba1\u6a21\u5f0f\u662f\u5728\u8fd0\u7528\u9762\u5411\u5bf9\u8c61\u601d\u7ef4\u89e3\u51b3\u5b9e\u9645\u95ee\u9898\u65f6\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4ed6\u4eec\u5bf9\u4e8e\u63d0\u9ad8\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u5177\u6709\u91cd\u8981\u7684\u610f\u4e49\u3002\u56e0\u6b64\uff0c\u638c\u63e1\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u662f\u5bf9\u9762\u5411\u5bf9\u8c61\u7684\u8fdb\u4e00\u6b65\u6df1\u5165\u5b66\u4e60\u3002"),(0,l.kt)("p",null,"\u63d0\u70bc\u516c\u5171\u903b\u8f91\u662f\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u6982\u5ff5\uff0c\u63d0\u70bc\u51fa\u6765\u7684\u4e1c\u897f\u662f\u5426\u5408\u7406\uff0c\u662f\u5426\u5177\u5907\u53ef\u7ef4\u62a4\u6027\uff0c\u6bcf\u4e2a\u4eba\u5bf9\u516c\u5171\u903b\u8f91\u7684\u7406\u89e3\u4e0d\u540c\uff0c\u7ed3\u679c\u4e5f\u4f1a\u4ea7\u751f\u53d8\u5316\u3002\u7279\u522b\u662f\u5728\u5bf9\u8c61\u4e0e\u5bf9\u8c61\u8981\u8fdb\u884c\u590d\u6742\u7684\u4ea4\u4e92\u65f6\uff0c\u5bf9\u4e8e\u516c\u5171\u903b\u8f91\u7684\u7406\u89e3\u4f1a\u4ea7\u751f\u66f4\u5927\u7684\u504f\u5dee\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u9762\u5411\u5bf9\u8c61\u7684\u903b\u8f91\u5c01\u88c5\uff0c\u524d\u8f88\u4eec\u603b\u7ed3\u51fa\u6765\u4e86\u516d\u5927\u8bbe\u8ba1\u539f\u5219\uff0c\u6765\u6307\u5bfc\u5927\u5bb6\u66f4\u4f18\u96c5\u7684\u4f7f\u7528\u8bbe\u8ba1\u6a21\u5f0f\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/1443f8fe6108a1af57da453f32382a09.image",alt:"img"})),(0,l.kt)("h3",{id:"\u5355\u4e00\u804c\u8d23\u539f\u5219"},"\u5355\u4e00\u804c\u8d23\u539f\u5219"),(0,l.kt)("p",null,"\u4e00\u4e2a\u7c7b\uff0c\u53ea\u8d1f\u8d23\u4e00\u9879\u804c\u8d23\u3002\u4e00\u4e2a\u65b9\u6cd5\u5c3d\u91cf\u53ea\u5e72\u4e00\u4ef6\u4e8b\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff0c\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u6848\u4f8b\uff0c\u4eba\u8981\u6253\u7403\u3002\u5408\u7406\u7684\u5c01\u88c5\u5e94\u8be5\u662f\uff0c\u5206\u522b\u5c01\u88c5\u4e00\u4e2a\u4eba\u7684\u7c7b\uff0c\u4e0e\u7403\u7684\u7c7b\u3002\u8fd9\u662f\u6211\u4eec\u5f88\u5bb9\u6613\u5c31\u80fd\u591f\u533a\u5206\u51fa\u6765\u7684\u4e8b\u60c5\u3002\u5355\u4e00\u539f\u5219\u7684\u8fd0\u7528\u5f80\u5f80\u5728\u6f5c\u79fb\u9ed8\u5316\u4e2d\uff0c\u867d\u7136\u4f60\u53ef\u80fd\u8fd8\u6ca1\u6709\u542c\u8fc7\u8fd9\u4e2a\u539f\u5219\uff0c\u4f46\u662f\u4f60\u5df2\u7ecf\u5728\u4f7f\u7528\u5b83\u4e86\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Person {}\nclass Ball {}\n")),(0,l.kt)("p",null,"\u4e0d\u5408\u7406\u7684\u5c01\u88c5\uff0c\u5c31\u662f\u628a\u7403\u7684\u5c5e\u6027\uff0c\u653e\u5728 Person \u5bf9\u8c61\u91cc"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Person {\n  constructor(name, ballType) {\n    this.name = name\n    this.ball = ballType\n  }\n}\n")),(0,l.kt)("p",null,"\u4f46\u662f\u8fd9\u6837\u5c01\u88c5\u7684\u6269\u5c55\u6027\u5c31\u975e\u5e38\u5dee\uff0c\u56e0\u4e3a\u5728\u5b9e\u8df5\u4e2d\uff0c\u4eba\u6709\u8bb8\u591a\u7c7b\u522b\uff0c\u4f8b\u5982\u5b66\u751f\uff0c\u6559\u5e08\uff0c\u533b\u751f\u7b49\uff0c\u53ef\u80fd\u4f1a\u8bbe\u8ba1\u4e0d\u540c\u7684\u7c7b\u3002\u7403\u4e5f\u6709\u7fbd\u6bdb\u7403\uff0c\u7bee\u7403\uff0c\u4e52\u4e53\u7403\u7b49\u7b49\u3002\u4eba\u4e0e\u7403\u662f\u4e00\u4e2a\u591a\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u5982\u679c\u5c01\u88c5\u5728\u4e00\u4e2a\u7c7b\u91cc\uff0c\u540e\u7eed\u7684\u6269\u5c55\u5c31\u4f1a\u53d8\u5f97\u975e\u5e38\u56f0\u96be\u3002"),(0,l.kt)("h3",{id:"\u91cc\u6c0f\u66ff\u6362\u539f\u5219"},"\u91cc\u6c0f\u66ff\u6362\u539f\u5219"),(0,l.kt)("p",null,"\u8be5\u539f\u5219\u9488\u5bf9\u7684\u662f\u7236\u7c7b\u4e0e\u5b50\u7c7b\u7684\u66ff\u6362\u5173\u7cfb\u3002"),(0,l.kt)("p",null,"\u6700\u65e9\u662f\u5728 1988 \u5e74\uff0c\u7531\u9ebb\u7701\u7406\u5de5\u5b66\u9662\u7684\u4e00\u4f4d\u5973\u58eb\uff08Barbara Liskov\uff09\u63d0\u51fa\u3002\u8be5\u539f\u5219\u4ee5 liskov \u7684\u540d\u5b57\u547d\u540d\u3002"),(0,l.kt)("p",null,"\u4efb\u4f55\u4f7f\u7528\u7236\u7c7b\u5b9e\u4f8b\u7684\u5730\u65b9\uff0c\u80fd\u591f\u4f7f\u7528\u5b50\u7c7b\u5b9e\u4f8b\u5b8c\u7f8e\u66ff\u6362\u3002\u8fd9\u5c31\u662f\u91cc\u6c0f\u66ff\u6362\u539f\u5219\u7684\u6838\u5fc3\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff0c\u7236\u7c7b\u4e3a Person\uff0c \u5b50\u7c7b\u4e3a\u5b66\u751f Student"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Person {\n  constructor(name) {\n    this.name = name\n  }\n  run(t) {\n    console.log(`${this.name} \u8dd1\u4e86 ${t} \u516c\u91cc`);\n  }\n}\n\nclass Student extends Person {\n  constructor(name, grade) {\n    super(name)\n    this.grade = grade\n  }\n}\n\nconst p1 = new Person('Tom')\np1.run(20)\nconst s1 = new Student('Tom')\ns1.run(20)\n")),(0,l.kt)("p",null,"\u7236\u7c7b\u5b9e\u4f8b p1 \u8c03\u7528 run \u65b9\u6cd5\uff0c\u4e0e\u5b50\u7c7b\u5b9e\u4f8b s1 \u8c03\u7528 run \u65b9\u6cd5\uff0c\u4ed6\u4eec\u7684\u6548\u679c\u662f\u4e00\u6a21\u4e00\u6837\u7684\u3002\u6211\u4eec\u80fd\u591f\u7528 s1 \u66ff\u6362\u6389 p1 \u800c\u4e0d\u4f1a\u5f15\u53d1\u4ec0\u4e48\u989d\u5916\u7684\u95ee\u9898\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u77e5\u9053\uff0c\u7ee7\u627f\u7684\u672c\u8d28\u662f\u4ee3\u7801\u7684\u590d\u5236\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u53ea\u8981\u6211\u4eec\u4e0d\u5728\u5b50\u7c7b\u4e2d\uff0c\u91cd\u5199\u7236\u7c7b\u5df2\u7ecf\u5b8c\u6574\u5b9e\u73b0\u7684\u65b9\u6cd5\uff0c\u5c31\u80fd\u591f\u8fbe\u5230\u91cc\u6c0f\u66ff\u6362\u539f\u5219\u60f3\u8981\u7684\u6548\u679c\u3002"),(0,l.kt)("p",null,"\u8fd9\u91cc\u5f3a\u8c03\u7684\u662f\uff0c\u5b50\u7c7b\u4e00\u5b9a\u53ea\u80fd\u662f\u7236\u7c7b\u7684\u6269\u5c55\uff0c\u800c\u975e\u5728\u7236\u7c7b\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u7578\u53d8\u548c\u9b54\u6539\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u4e00\u5b9a\u9700\u8981\u91cd\u5199\u7236\u7c7b\u7684\u65b9\u6cd5\uff0c\u90a3\u4e48\u4e5f\u4e00\u5b9a\u662f\u5728\u7236\u7c7b\u65b9\u6cd5\u4e0a\u8fdb\u884c\u6269\u5c55\uff0c\u8981\u786e\u4fdd\u539f\u6709\u903b\u8f91\u7684\u7a33\u5b9a\u6027\u3002"),(0,l.kt)("p",null,"\u5f88\u660e\u663e\uff0c\u8be5\u539f\u5219\u4e5f\u662f\u786e\u4fdd\u6211\u4eec\u5199\u7684\u7a0b\u5e8f\u80fd\u5177\u5907\u5f3a\u5927\u7684\u6269\u5c55\u6027\u3002"),(0,l.kt)("h3",{id:"\u4f9d\u8d56\u5012\u7f6e\u539f\u5219"},"\u4f9d\u8d56\u5012\u7f6e\u539f\u5219"),(0,l.kt)("p",null,"\u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u7684\u539f\u59cb\u5b9a\u4e49\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,"High-level modules should not depend on low-level modules. Both should depend on abstractions.\n",(0,l.kt)("strong",{parentName:"p"},"\u9ad8\u5c42\u6a21\u5757\u4e0d\u5e94\u8be5\u4f9d\u8d56\u4f4e\u5c42\u6a21\u5757\uff0c\u4e24\u8005\u90fd\u5e94\u8be5\u4f9d\u8d56\u5176\u62bd\u8c61")),(0,l.kt)("p",null,"Abstractions should not depend upon details. Details should depend upon abstractions.\n",(0,l.kt)("strong",{parentName:"p"},"\u62bd\u8c61\u4e0d\u5e94\u8be5\u4f9d\u8d56\u7ec6\u8282\uff0c\u7ec6\u8282\u5e94\u8be5\u4f9d\u8d56\u62bd\u8c61")),(0,l.kt)("p",null,"\u8fd9\u4e2a\u7406\u89e3\u8d77\u6765\u6709\u70b9\u56f0\u96be\uff0c\u4f46\u662f\u638c\u63e1\u4e4b\u540e\u5a01\u529b\u5de8\u5927\u3002"),(0,l.kt)("p",null,"\u7406\u89e3\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u9996\u5148\u9700\u8981\u7406\u89e3\u4e09\u4e2a\u6982\u5ff5\uff0c\u9ad8\u5c42\u6a21\u5757\uff0c\u5e95\u5c42\u6a21\u5757\uff0c\u4ee5\u53ca\u62bd\u8c61\u3002"),(0,l.kt)("p",null,"\u6709\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u573a\u666f\uff0c\u6211\u770b\u4e66\u3002"),(0,l.kt)("p",null,"\u8fd9\u4e2a\u573a\u666f\u91cc\uff0c\u9ad8\u5c42\u6a21\u5757\u5c31\u662f \u201c\u6211\u201d\uff0c\u4f4e\u5c42\u6a21\u5757\u5c31\u662f \u201c\u4e66\u201d\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u6765\u4f7f\u7528\u4ee3\u7801\u5b9a\u4e49\u8fd9\u4e2a\u573a\u666f\uff0c\u5927\u6982\u5c31\u662f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"myself.read(book)\n")),(0,l.kt)("p",null,"\u8fd9\u91cc\u7684 myself \u4e0e book\uff0c\u5c31\u662f\u6211\u4eec\u8981\u5c01\u88c5\u7684\u4e24\u4e2a\u7c7b\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u4f4e\u5c42\u6a21\u5757\nclass Book {\n  // \u5b9a\u4e49\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u65b9\u6cd5\n  getContent() {\n    return '\u4e66\u7c4d\u7684\u5185\u5bb9'\n  }\n}\n")),(0,l.kt)("p",null,"\u4f4e\u5c42\u6a21\u5757\u662f\u4e00\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u7c7b\uff0c\u4ed6\u4e0d\u4f9d\u8d56\u4efb\u4f55\u5176\u4ed6\u7684\u7c7b\u6765\u5b9e\u73b0\u81ea\u5df1\u7684\u529f\u80fd\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"import Book from './Book'\n\n// \u9ad8\u5c42\u6a21\u5757\nclass Person {\n  // \u6b64\u65f6\u9700\u8981\u4f20\u5165\u4e00\u4e2a Book \u7684\u5b9e\u4f8b\uff0c\u7528\u4e8e\u83b7\u53d6\u4e66\u7c4d\u7684\u5185\u5bb9\n  read(book: Book) {\n    console.log('\u6211\u5f00\u59cb\u770b\u4e66\u4e86')\n    console.log(`\u4e66\u7684\u5185\u5bb9\u662f\uff1a${book.getContent()}`)\n  }\n}\n")),(0,l.kt)("p",null,"\u5173\u6ce8\u6b64\u5904 read \u65b9\u6cd5\u7684\u5b9e\u73b0\u3002\u5982\u679c\u6211\u4eec\u8981\u505a\u7c7b\u578b\u7ea6\u675f\uff0c\u90a3\u4e48\u671f\u671b\u4f20\u5165\u7684\u53c2\u6570\uff0c\u5c31\u6700\u597d\u53ea\u80fd\u662f Book \u7c7b\u7684\u5b9e\u4f8b\uff0c\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u8fdb\u4e00\u6b65\u786e\u8ba4\u8fd0\u7528\u65f6\u7684\u51c6\u786e\u6027\u3002\u4e8e\u662f\uff0cPerson \u7c7b\u5728\u5c01\u88c5\u65f6\uff0c\u5c31\u4e0d\u53ef\u907f\u514d\u7684\u4f9d\u8d56\u4e86\u5e95\u5c42\u6a21\u5757 Book \u7c7b\u3002"),(0,l.kt)("p",null,"\u5728\u5b9e\u8df5\u4e2d\uff0c\u8fd9\u6837\u7684\u65b9\u5f0f\u5176\u5b9e\u6ca1\u6709\u4ec0\u4e48\u95ee\u9898\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const myself = new Person()\nconst book = new Book()\n\nmyself.read(book)\n")),(0,l.kt)("p",null,"\u771f\u5b9e\u573a\u666f\u4e2d\uff0c\u8fd9\u6837\u7684\u5b9e\u73b0\uff0c\u6269\u5c55\u6027\u53d7\u5230\u4e86\u9650\u5236\u3002"),(0,l.kt)("p",null,"\u6211\u53ef\u80fd\u4e0d\u4ec5\u4ec5\u53ea\u662f\u60f3\u8bfb\u4e66\uff0c\u8fd8\u60f3\u8981\u8bfb\u62a5\u7eb8\uff0c\u8bfb\u624b\u673a\u5185\u5bb9\u7b49\u7b49\u3002\u90a3\u6b64\u65f6\uff0cread \u65b9\u6cd5\u7684\u7c7b\u578b\u9650\u5236\u5c31\u5f88\u96be\u53d7\u4e86"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"import Book from './Book'\nimport Newspaper from './NewsPaper'\nimport Phone from './Phone'\n\n// \u9ad8\u5c42\u6a21\u5757\nclass Person {\n  // \u6b64\u65f6\u9700\u8981\u4f20\u5165\u4e00\u4e2a Book \u7684\u5b9e\u4f8b\uff0c\u7528\u4e8e\u83b7\u53d6\u4e66\u7c4d\u7684\u5185\u5bb9\n  read(book: Book | Newspaper | Phone) {\n    console.log('\u6211\u5f00\u59cb\u770b\u4e66\u4e86')\n    console.log(`\u4e66\u7684\u5185\u5bb9\u662f\uff1a${book.getContent()}`)\n  }\n}\n")),(0,l.kt)("p",null,"\u8fd9\u91cc\u7684\u6539\u52a8\uff0c\u6211\u4eec\u505a\u4e86\u4e00\u4ef6\u6210\u672c\u504f\u9ad8\u7684\u4e8b\u60c5\uff0c\u5c31\u662f\u4fee\u6539\u4e86 Person \u7c7b\u3002\u5b9e\u8df5\u573a\u666f\u8fdc\u4e0d\u6b62\u5982\u6b64\u7b80\u5355\u3002 Person \u7c7b\u7684\u4fee\u6539\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u5b58\u5728\u672a\u77e5\u98ce\u9669\uff0c\u76f8\u5173\u7684\u529f\u80fd\u90fd\u9700\u8981\u91cd\u65b0\u9a8c\u8bc1\u4e00\u6b21\u3002\u800c Person \u7c7b\u7684\u4f9d\u8d56\u4e5f\u8d8a\u6765\u8d8a\u591a\uff0c\u540e\u671f\u7684\u8c03\u6574\u6210\u5206\u672c\u5728\u9010\u6e10\u53d8\u5f97\u5f88\u9ad8\u3002"),(0,l.kt)("p",null,"\u90a3\u4e48\u6709\u6ca1\u6709\u66f4\u597d\u7684\u65b9\u6848\uff0c\u80fd\u591f\u5728\u6269\u5c55\u7684\u65f6\u5019\uff0c\u4e0d\u6539\u52a8 Person \u7c7b\u5462\uff1f\u5f53\u7136\u6709"),(0,l.kt)("p",null,"\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u5f15\u5165\u62bd\u8c61\u7684\u6982\u5ff5\u3002\u4e66\u3001\u62a5\u7eb8\u3001\u624b\u673a\uff0c\u4ed6\u4eec\u867d\u7136\u90fd\u662f\u4e0d\u540c\u7684\u7c7b\uff0c\u6709\u975e\u5e38\u591a\u7684\u4e0d\u4e00\u6837\uff0c\u4f46\u662f\u5bf9\u4e8e Person \u7c7b\u6765\u8bf4\uff0c\u4ed6\u4eec\u53ef\u4ee5\u63d0\u70bc\u51fa\u6765\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff1a\u8bfb\u7269\u3002\u901a\u4fd7\u4e00\u70b9\u8bf4\uff0c\u5c31\u662f",(0,l.kt)("strong",{parentName:"p"},"\u4f9d\u636e\u4ed6\u4eec\u7684\u5171\u6027\uff0c\u7ed9\u4ed6\u4eec\u5206\u4e2a\u7c7b"),"\u3002"),(0,l.kt)("p",null,"\u6709\u4e86\u8bfb\u7269\u8fd9\u4e2a\u62bd\u8c61\u6982\u5ff5\uff0c\u4e8b\u60c5\u5c31\u597d\u529e\u591a\u4e86"),(0,l.kt)("p",null,"\u5148\u5b9a\u4e49\u62bd\u8c61\u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface Reader {\n  getContent: () => string\n}\n")),(0,l.kt)("p",null,"\u7136\u540e\u5b9a\u4e49\u5404\u81ea\u5177\u4f53\u7684\u8bfb\u7269"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"class Book impements Reader {\n  getContent() {\n    return '\u8fd4\u56de\u5177\u4f53\u7684\u5185\u5bb9'\n  }\n}\n")),(0,l.kt)("p",null,"\u6700\u540e\u5b9a\u4e49 Person \u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"import Reader from './Reader'\n\n// \u9ad8\u5c42\u6a21\u5757\nclass Person {\n  // \u6b64\u65f6\u9700\u8981\u4f20\u5165\u4e00\u4e2a Book \u7684\u5b9e\u4f8b\uff0c\u7528\u4e8e\u83b7\u53d6\u4e66\u7c4d\u7684\u5185\u5bb9\n  read(reader: Reader) {\n    console.log('\u6211\u5f00\u59cb\u770b\u4e66\u4e86')\n    console.log(`\u4e66\u7684\u5185\u5bb9\u662f\uff1a${reader.getContent()}`)\n  }\n}\n")),(0,l.kt)("p",null,"\u6b64\u65f6\u6211\u4eec\u53d1\u73b0\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u65b0\u589e\u62a5\u7eb8\u8fd9\u79cd\u8bfb\u7269\u65f6\uff0c\u5c31\u53ea\u9700\u8981\u65b0\u589e\u62a5\u7eb8\u7c7b\u300c\u5b9e\u73b0 Reader\u300d\u5373\u53ef\u3002Person \u7c7b\u5b8c\u5168\u4e0d\u9700\u8981\u4efb\u4f55\u6539\u52a8\uff0c\u56e0\u4e3a Person \u4f9d\u8d56\u7684\u662f\u8bfb\u7269\u3002"),(0,l.kt)("p",null,"\u4e8e\u662f \u9ad8\u5c42\u7ec4\u4ef6\u300cPerson\u300d\u4ec5\u4ec5\u53ea\u4f9d\u8d56\u4e86\u62bd\u8c61\u7c7b\u300cReader\u300d\u3002Person\uff0cBook\uff0cNewspaper\uff0cPhone \u5f97\u4ee5\u89e3\u8026\u3002"),(0,l.kt)("p",null,"\u8fd9\u5176\u5b9e\u4e5f\u662f\u9762\u5411\u63a5\u53e3\u7f16\u7a0b\u3002"),(0,l.kt)("p",null,"\u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5927\u91cf\u8fd0\u7528\u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u6765\u63d0\u9ad8\u4ee3\u7801\u7684\u6269\u5c55\u6027\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff0c\u5c06\u76d2\u5b50\u3001\u76c6\u5b50\u3001\u6876\uff0c\u63d0\u70bc\u51fa\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff1a\u5bb9\u5668\uff0c\u7528\u4e8e\u88c5\u6c34\u3002"),(0,l.kt)("p",null,"\u53c8\u4f8b\u5982\uff0c\u5c01\u88c5\u7684\u5730\u56fe\u7ec4\u4ef6\uff0c\u4e0d\u660e\u786e\u4f9d\u8d56\u5230\u5e95\u662f\u767e\u5ea6\u5730\u56fe\u8fd8\u662f\u9ad8\u5fb7\u5730\u56fe\u6216\u8005\u662f\u8c37\u6b4c\u5730\u56fe\u3002\u800c\u662f\u5c06\u8fd9\u4e9b\u5730\u56fe\u63d0\u70bc\u51fa\u6765\u4e00\u4e2a\u62bd\u8c61\u6982\u5ff5\uff1a\u5730\u56fe\u3002\u65e0\u8bba\u662f\u4ec0\u4e48\u5730\u56fe\uff0c\u53ea\u9700\u8981\u63d0\u4f9b\u6211\u4eec\u7ec4\u5efa\u9700\u8981\u7684\u65b9\u6cd5\u5373\u53ef"),(0,l.kt)("h3",{id:"\u63a5\u53e3\u9694\u79bb\u539f\u5219"},"\u63a5\u53e3\u9694\u79bb\u539f\u5219"),(0,l.kt)("p",null,"\u5b9a\u4e49\uff1a\u4e00\u4e2a\u7c7b\uff0c\u4e0d\u5e94\u8be5\u4f9d\u8d56\u5b83\u4e0d\u9700\u8981\u7684\u63a5\u53e3\u3002"),(0,l.kt)("p",null,"\u4e00\u672c\u4e66\uff0c\u53ef\u4ee5\u62bd\u8c61\u4e3a\u8bfb\u7269\uff0c\u8fd9\u4e2a\u662f\u57fa\u4e8e\u80fd\u591f\u63d0\u4f9b\u5185\u5bb9\u7684\u89d2\u5ea6\u53bb\u505a\u7684\u5206\u7c7b\u3002\n\u4e00\u672c\u4e66\uff0c\u53ef\u4ee5\u62bd\u8c61\u4e3a\u53ef\u71c3\u7269\uff0c\u8fd9\u4e2a\u662f\u57fa\u4e8e\u80fd\u591f\u7eb8\u5f20\u80fd\u591f\u71c3\u70e7\u7684\u89d2\u5ea6\u505a\u7684\u5206\u7c7b\u3002"),(0,l.kt)("p",null,"\u540c\u6837\u7684\u5bf9\u8c61\uff0c\u4ece\u4e0d\u540c\u7684\u89d2\u5ea6\u53bb\u5206\u7c7b\uff0c\u53ef\u4ee5\u63d0\u70bc\u51fa\u4e0d\u540c\u7684\u62bd\u8c61\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ef\u4ee5\u63d0\u70bc\u51fa\u4e0d\u540c\u7684\u63a5\u53e3\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"interface Book {\n  // \u63d0\u4f9b\u5185\u5bb9\n  getContent: () => string,\n\n  // \u71c3\u70e7\n  burn: () => void\n}\n")),(0,l.kt)("p",null,"\u4f46\u662f\u5bf9\u4e8e Person \u5bf9\u8c61\u6765\u8bf4\uff0c\u5e76\u4e0d\u5173\u6ce8\u4e66\u7684\u53ef\u71c3\u70e7\u5c5e\u6027\u3002\u56e0\u6b64\uff0c\u5f53\u6211\u4eec\u5b9a\u4e49 Person \u7c7b\u7684\u65f6\u5019\uff0c\u4f9d\u8d56\u7684\u62bd\u8c61\u7c7b\uff0c\u5c31\u4e0d\u5e94\u8be5\u5305\u542b\u6b64\u5904\u7684 burn \u65b9\u6cd5\u3002"),(0,l.kt)("p",null,"\u867d\u7136\u8bfb\u7269\u548c\u53ef\u71c3\u7269\uff0c\u90fd\u662f\u4ece\u4e66\u7c4d\u91cc\u63d0\u70bc\u51fa\u6765\u7684\uff0c\u4f46\u662f\u4ed6\u4eec\u9488\u5bf9\u7684\u573a\u666f\u4e0d\u4e00\u6837\uff0c\u56e0\u6b64\u5c31\u4e0d\u5e94\u8be5\u628a\u4ed6\u4eec\u7684\u62bd\u8c61\u7c7b\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u800c\u5e94\u8be5\u62c6\u5206\u5f00\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u8bfb\u7269\ninterface Reader {\n  getContent: () => string\n}\n\u53ef\u71c3\u7269\ninterface CombustibleMaterial {\n  burn: () => void\n}\n")),(0,l.kt)("p",null,"\u7136\u540e\u6839\u636e\u4e0d\u540c\u7684\u573a\u666f\u9009\u62e9\u4f9d\u8d56\u5373\u53ef\u3002"),(0,l.kt)("p",null,"\u5f53\u7136\uff0c\u63a5\u53e3\u9694\u79bb\u539f\u5219\u7684\u4f7f\u7528\uff0c\u4e00\u5b9a\u8981\u9002\u5ea6\uff0c\u8981\u7ed3\u5408\u573a\u666f\u8fdb\u884c\u5408\u7406\u7684\u62c6\u5206\uff0c\u5982\u679c\u62c6\u5206\u5f97\u8fc7\u7ec6\uff0c\u4e5f\u5c31\u9020\u6210\u63a5\u53e3\u8fc7\u591a\u800c\u7ef4\u62a4\u56f0\u96be\u7684\u5c40\u9762\u3002"),(0,l.kt)("h3",{id:"\u8fea\u7c73\u7279\u6cd5\u5219"},"\u8fea\u7c73\u7279\u6cd5\u5219"),(0,l.kt)("p",null,"\u8fea\u7c73\u7279\u6cd5\u5219\u8981\u6c42\u7684\u662f\uff1a\u4e00\u4e2a\u5bf9\u8c61\u5e94\u8be5\u5bf9\u5176\u4ed6\u7684\u5bf9\u8c61\u4fdd\u6301\u6700\u5c11\u7684\u4e86\u89e3\u3002"),(0,l.kt)("p",null,"\u901a\u4fd7\u6765\u8bf4\uff0c\u5c31\u662f\u8981\u60f3\u529e\u6cd5\u964d\u4f4e\u7c7b\u4e0e\u7c7b\u4e4b\u95f4\u7684\u8026\u5408\u3002\u5982\u679c\u7c7b\u4e0e\u7c7b\u4e4b\u95f4\u7684\u5173\u7cfb\u592a\u8fc7\u4e8e\u5bc6\u5207\uff0c\u90a3\u4e48\uff0c\u4e00\u4e2a\u7c7b\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u5c31\u4f1a\u5bf9\u53e6\u5916\u4e00\u4e2a\u7c7b\u9020\u6210\u66f4\u5927\u7684\u5f71\u54cd\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\u8fd9\u6837\u4e00\u4e2a\u573a\u666f\uff0c\u4e00\u4e2a\u96c6\u56e2\u4e0b\u6709\u8bb8\u591a\u5206\u516c\u53f8\u3002"),(0,l.kt)("p",null,"\u4ece\u9700\u6c42\u4e0a\u6765\u8bf4\uff0c\u96c6\u56e2\u9700\u8981\u8ba1\u7b97\u516c\u53f8\u6bcf\u4e2a\u5458\u5de5\u7684\u85aa\u8d44\u60c5\u51b5\uff0c\u5305\u62ec\u96c6\u56e2\u76f4\u5c5e\u5458\u5de5\u4e0e\u5404\u5206\u516c\u53f8\u5458\u5de5\u3002"),(0,l.kt)("p",null,"\u90a3\u4e48\u6211\u4eec\u5728\u8bbe\u8ba1\u7c7b\u7684\u65f6\u5019\uff0c\u8fd9\u91cc\u7684\u5c31\u5305\u62ec\u4e24\u4e2a\u7c7b\uff0c\u4e00\u4e2a\u96c6\u56e2\u516c\u53f8 HeadOffice\uff0c\u4e00\u4e2a\u5206\u516c\u53f8 BranchOffice\u3002"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u96c6\u56e2\u516c\u53f8\u6765\u8bf4\uff0c\u81f3\u5c11\u9700\u8981\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5c31\u662f\u8be5\u573a\u666f\u9700\u8981\u7684\u8ba1\u7b97\u85aa\u8d44 calculate\u3002"),(0,l.kt)("p",null,"\u4f46\u662f\u8ba1\u7b97\u85aa\u8d44\uff0c\u8fd8\u9700\u8981\u83b7\u53d6\u5230\u975e\u5e38\u591a\u7684\u4fe1\u606f\u624d\u80fd\u591f\u6b63\u786e\u7684\u8ba1\u7b97\uff0c\u4f8b\u5982\u5458\u5de5\u57fa\u672c\u4fe1\u606f\uff0c\u5c97\u4f4d\u4fe1\u606f\uff0c\u57fa\u672c\u5de5\u8d44\uff0c\u63d0\u6210\u65b9\u5f0f\u7b49\u3002"),(0,l.kt)("p",null,"\u4e0d\u5408\u7406\u7684\u8bbe\u8ba1\u65b9\u5f0f\uff0c\u5c31\u662f\u628a\u5206\u516c\u53f8\u5458\u5de5\u7684\u85aa\u8d44\u8ba1\u7b97\u4ea4\u7ed9\u96c6\u56e2\u516c\u53f8\u7c7b\u6765\u505a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u5b9a\u4e49\u5206\u516c\u53f8\u7c7b\nclass BranchOffice {\n  // \u83b7\u53d6\u5458\u5de5\u5217\u8868\uff0c\u5305\u542b\u5458\u5de5\u57fa\u672c\u4fe1\u606f\n  getEmployeeList() {\n    return []\n  }\n\n  // \u901a\u8fc7\u5458\u5de5id\u8fdb\u4e00\u6b65\u83b7\u53d6\u5458\u5de5\u66f4\u591a\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u57fa\u672c\u5de5\u8d44\uff0c\u7ee9\u6548\u4fe1\u606f\uff0c\u63d0\u6210\u65b9\u5f0f\u7b49\n  getEmployeeInfo(id) {\n    return '\u5458\u5de5\u4fe1\u606f'\n  }\n}\n")),(0,l.kt)("p",null,"\u5b9a\u4e49\u96c6\u56e2\u516c\u53f8\uff0c\u8fd8\u9700\u8981\u5206\u516c\u53f8\u85aa\u8d44\uff0c\u56e0\u6b64\u6b64\u65f6\u5fc5\u987b\u4f9d\u8d56\u5206\u516c\u53f8\uff0c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"import BranchOffice from './BranchOffice'\n\n// \u5b9a\u4e49\u96c6\u56e2\u516c\u53f8\u7c7b\nclass HeadOffice {\n  // \u83b7\u53d6\u96c6\u56e2\u516c\u53f8\u5458\u5de5\u5217\u8868\uff0c\u5305\u542b\u5458\u5de5\u57fa\u672c\u4fe1\u606f\n  getEmployeeList() {}\n\n  // \u8fdb\u4e00\u6b65\u83b7\u53d6\u5458\u5de5\u4fe1\u606f\n  getEmployeeInfo(id) {}\n\n  // \u8bbe\u7f6e\u5458\u5de5\u85aa\u8d44 -> \u8ba1\u7b97\u5355\u4e2a\u5458\u5de5\u7684\u4fe1\u606f\n  setEmployeeSalary(useInfo) {}\n\n  // \u4f20\u5165\u5206\u516c\u53f8\u5bf9\u8c61\n  calculate(office: BranchOffice) {\n    // \u8ba1\u7b97\u96c6\u56e2\u7684\u5458\u5de5\u85aa\u8d44\n    const headEmployees = this.getEmployeeList()\n    headEmployees.forEach((emp, i) => {\n      const info = this.getEmployeeInfo(emp.id)\n      this.setEmployeeSalary({...emp, ...info})\n    })\n\n    // \u9700\u8981\u901a\u8fc7\u5206\u516c\u53f8\uff0c\u83b7\u53d6\u5230\u5206\u516c\u53f8\u7684\u5458\u5de5\u4fe1\u606f\uff0c\u4ee5\u53ca\u5458\u5de5\u7684\u8be6\u7ec6\u4fe1\u606f\n    const employees = office.getEmployeeList()\n    employees.forEach((emp, i) => {\n      const info = office.getEmployeeInfo(emp.id)\n      this.setEmployeeSalary({...emp, ...info})\n    })\n  }\n}\n")),(0,l.kt)("p",null,"\u6b64\u65f6\u6211\u4eec\u53d1\u73b0\uff0c\u5728\u96c6\u56e2\u516c\u53f8\u4e2d\uff0c\u4e3a\u4e86\u8ba1\u7b97\u5b50\u516c\u53f8\u5458\u5de5\u7684\u85aa\u8d44\uff0c\u83b7\u53d6\u4e86\u5f88\u591a\u53ea\u5c5e\u4e8e\u5b50\u516c\u53f8\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u5b50\u516c\u53f8\u7684\u5458\u5de5\u5217\u8868\uff0c\u5b50\u516c\u53f8\u7684\u5458\u5de5\u8be6\u60c5\uff0c\u90a3\u4e48\u96c6\u56e2\u516c\u53f8\u4e0e\u5b50\u516c\u53f8\u5c31\u53d8\u5f97\u975e\u5e38\u5bc6\u5207\u3002\u5982\u679c\u5b50\u516c\u53f8\u53d1\u751f\u53d8\u5316\uff0c\u6709\u6781\u5927\u7684\u98ce\u9669\u4f1a\u5f71\u54cd\u5230\u96c6\u56e2\u516c\u53f8\u7684\u6b63\u5e38\u8fd0\u884c\u3002"),(0,l.kt)("p",null,"\u9075\u5b88\u8fea\u7c73\u7279\u6cd5\u5219\u7684\u8bbe\u8ba1\uff0c\u662f\u5e94\u8be5\u5c3d\u91cf\u5c11\u7684\u8ba9\u96c6\u56e2\u516c\u53f8\u83b7\u53d6\u5230\u5b50\u516c\u53f8\u7684\u4fe1\u606f\u3002\u6211\u4eec\u53ea\u9700\u8981\u5728\u8bbe\u8ba1\u65b9\u6cd5\u65f6\uff0c\u8ba9\u5b50\u516c\u53f8\u81ea\u5df1\u8ba1\u7b97\u81ea\u5df1\u5458\u5de5\u7684\u85aa\u8d44\u5373\u53ef\u3002"),(0,l.kt)("p",null,"\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"// \u5b9a\u4e49\u5206\u516c\u53f8\u7c7b\nclass BranchOffice {\n  // \u83b7\u53d6\u5458\u5de5\u5217\u8868\uff0c\u5305\u542b\u5458\u5de5\u57fa\u672c\u4fe1\u606f\n  getEmployeeList() {\n    return []\n  }\n\n  // \u901a\u8fc7\u5458\u5de5id\u8fdb\u4e00\u6b65\u83b7\u53d6\u5458\u5de5\u66f4\u591a\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u57fa\u672c\u5de5\u8d44\uff0c\u7ee9\u6548\u4fe1\u606f\uff0c\u63d0\u6210\u65b9\u5f0f\u7b49\n  getEmployeeInfo(id) {\n    return {}\n  }\n  // \u8ba1\u7b97\u67d0\u4e00\u4e2a\u5458\u5de5\u7684\u85aa\u8d44\n  setEmployeeSalary(useInfo) {}\n\n  // \u8ba1\u7b97\u6240\u6709\u5458\u5de5\u7684\u85aa\u8d44\n  calAllEmployeeSalary() {\n    const employees = this.getEmployeeList()\n    employees.forEach(employee => {\n      const info = this.getEmployeeInfo(employee.id)\n      this.setEmployeeSalary({...employee, ...info})\n    })\n  }\n}\nimport BranchOffice from './BranchOffice'\n\n// \u5b9a\u4e49\u96c6\u56e2\u516c\u53f8\u7c7b\nclass HeadOffice {\n  // \u83b7\u53d6\u96c6\u56e2\u516c\u53f8\u5458\u5de5\u5217\u8868\uff0c\u5305\u542b\u5458\u5de5\u57fa\u672c\u4fe1\u606f\n  getEmployeeList() {}\n\n  // \u8fdb\u4e00\u6b65\u83b7\u53d6\u5458\u5de5\u4fe1\u606f\n  getEmployeeInfo(id) {}\n\n  // \u8bbe\u7f6e\u5458\u5de5\u85aa\u8d44 -> \u8ba1\u7b97\u5355\u4e2a\u5458\u5de5\u7684\u4fe1\u606f\n  setEmployeeSalary(useInfo) {}\n\n  // \u8ba1\u7b97\u96c6\u56e2\u516c\u53f8\u6240\u6709\u5458\u5de5\u7684\u85aa\u8d44\n  calAllEmployeeSalary() {\n    const employees = this.getEmployeeList()\n    employees.forEach(employee => {\n      const info = this.getEmployeeInfo(employee.id)\n      this.setEmployeeSalary({ ...employee, ...info })\n    })\n  }\n\n  // \u4f20\u5165\u5206\u516c\u53f8\u5bf9\u8c61\n  // \u8ba1\u7b97\u6240\u6709\u5458\u5de5\uff0c\u5305\u62ec\u96c6\u56e2\u603b\u90e8\u548c\u5206\u516c\u53f8\n  calculate(office: BranchOffice) {\n    this.calAllEmployeeSalary()\n    office.calAllEmployeeSalary()\n  }\n}\n")),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u4f18\u5316\u4e4b\u540e\uff0c\u96c6\u56e2\u516c\u53f8\u4e0e\u5206\u516c\u53f8\u7684\u8026\u5408\u964d\u4f4e\u4e86\uff0c\u5bf9\u4e8e\u96c6\u56e2\u516c\u53f8\u6765\u8bf4\uff0c\u53ea\u9700\u8981\u8c03\u7528\u4e00\u4e0b\u5206\u516c\u53f8\u8ba1\u7b97\u85aa\u8d44\u7684\u65b9\u6cd5\u5373\u53ef\u3002\u81f3\u4e8e\u5206\u516c\u53f8\u5982\u4f55\u8ba1\u7b97\uff0c\u662f\u5426\u4e0e\u96c6\u56e2\u516c\u53f8\u7684\u8ba1\u7b97\u65b9\u5f0f\u4fdd\u6301\u4e00\u81f4\uff0c\u8fd9\u4e9b\u90fd\u662f\u96c6\u56e2\u516c\u53f8\u5e76\u4e0d\u5173\u5fc3\u7684\u95ee\u9898\u3002\u56e0\u6b64\uff0c\u8fd9\u6837\u7684\u8bbe\u8ba1\u4e5f\u6781\u5927\u7684\u63d0\u9ad8\u4e86\u6269\u5c55\u6027\u3002"),(0,l.kt)("p",null,"\u5f53\u7136\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5229\u7528\u4f9d\u8d56\u5012\u7f6e\u539f\u5219\u8fdb\u4e00\u6b65\u4f18\u5316\u3002\u8fd9\u91cc\u5c31\u4e0d\u518d\u6269\u5c55\u3002"),(0,l.kt)("h3",{id:"\u5f00\u95ed\u539f\u5219"},"\u5f00\u95ed\u539f\u5219"),(0,l.kt)("p",null,"\u5f00\u95ed\u539f\u5219\u662f\u9762\u5411\u5bf9\u8c61\u7a0b\u5e8f\u8bbe\u8ba1\u7684\u7ec8\u6781\u76ee\u6807\u3002"),(0,l.kt)("p",null,"\u4e0a\u8bc9\u6211\u4eec\u63d0\u5230\u7684\u6240\u6709\u7684\u8bbe\u8ba1\u539f\u5219\uff0c\u4ee5\u53ca\u4e4b\u540e\u6211\u4eec\u8fd8\u4f1a\u5b66\u4e60\u5230\u7684\u5404\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u90fd\u5728\u9075\u5faa\u5f00\u95ed\u539f\u5219\u3002"),(0,l.kt)("p",null,"\u5f53\u9700\u6c42\u53d8\u5316\u65f6\uff0c\u5982\u679c\u76f4\u63a5\u4fee\u6539\u65e7\u4ee3\u7801\uff0c\u4e00\u4e2a\u662f\u6210\u672c\u5f88\u9ad8\uff0c\u6211\u4eec\u65e0\u6cd5\u786e\u4fdd\u4fee\u6539\u4e0d\u4f1a\u5bf9\u4e4b\u524d\u7684\u529f\u80fd\u9020\u6210\u5f71\u54cd\uff0c\u751a\u81f3\u53ef\u80fd\u4f1a\u5bf9\u5df2\u6709\u7684\u529f\u80fd\u9020\u6210\u7834\u574f\u6027\u4fee\u6539\uff0c\u4e8c\u4e2a\u662f\u98ce\u9669\u5f88\u9ad8\uff0c\u6211\u4eec\u65e0\u6cd5\u786e\u4fdd\u5728\u6539\u52a8\u8fc7\u7a0b\u4e2d\uff0c\u662f\u5426\u4f1a\u9020\u6210\u4e86\u4e00\u4e9b\u9519\u8bef\u3002\u4e0d\u597d\u7684\u8bbe\u8ba1\uff0c\u5728\u8f6f\u4ef6\u8fed\u4ee3\u4e00\u5e74\u4e24\u5e74\uff0c\u5c31\u53ef\u80fd\u4e0d\u5f97\u4e0d\u8fdb\u884c\u91cd\u6784\u3002\u8fd9\u5728\u5b9e\u8df5\u4e2d\u5f88\u5e38\u89c1\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\u5f00\u95ed\u539f\u5219\u7684\u7406\u60f3\u60c5\u51b5\u5c31\u662f\uff0c\u5bf9\u5df2\u6709\u529f\u80fd\u95ed\u5408\uff0c\u5bf9\u6269\u5c55\u5f00\u653e\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u529f\u80fd\u7684\u6269\u5c55\uff0c\u90fd\u901a\u8fc7\u8bbe\u8ba1\u7684\u6269\u5c55\u6765\u5b9e\u73b0\uff0c\u800c\u4e0d\u662f\u901a\u8fc7\u4fee\u6539\u6765\u5b9e\u73b0\u3002"),(0,l.kt)("p",null,"\u5f53\u7136\uff0c\u5f00\u95ed\u539f\u5219\u662f\u4e00\u4e2a\u975e\u5e38\u62bd\u8c61\u548c\u7406\u60f3\u7684\u60c5\u51b5\uff0c\u5b9e\u8df5\u4e2d\u5f88\u96be\u5b8c\u5168\u7684\u8fbe\u5230\u8fd9\u6837\u7684\u7406\u60f3\u6548\u679c\u3002\u6211\u4eec\u53ea\u9700\u8981\u5728\u5b9e\u8df5\u65f6\uff0c\u5bf9\u7a0b\u5e8f\u7684\u6269\u5c55\u6027\u548c\u53ef\u7ef4\u62a4\u6027\u4fdd\u6301\u8db3\u591f\u7684\u91cd\u89c6\uff0c\u5c31\u81ea\u7136\u4f1a\u9075\u5faa\u5f00\u95ed\u539f\u5219\u3002"),(0,l.kt)("h3",{id:"\u603b\u7ed3"},"\u603b\u7ed3"),(0,l.kt)("p",null,"\u5728\u5b9e\u8df5\u4e2d\uff0c\u8bbe\u8ba1\u539f\u5219\u8ba8\u8bba\u7684\u4e0d\u662f\u662f\u4e0e\u5426\u7684\u95ee\u9898\uff0c\u800c\u662f\u591a\u4e0e\u5c11\u7684\u95ee\u9898\u3002\u6709\u7684\u573a\u666f\u56e0\u4e3a\u573a\u666f\u539f\u56e0\uff0c\u6216\u8005\u5386\u53f2\u539f\u56e0\uff0c\u5e76\u4e0d\u80fd\u5b8c\u5168\u7684\u9075\u5faa\u8fd9\u4e9b\u8bbe\u8ba1\u539f\u5219\u3002\u6211\u4eec\u5728\u5b9e\u8df5\u4e2d\uff0c\u8981\u5b66\u4f1a\u7075\u6d3b\u8fd0\u7528\u8fd9\u4e9b\u539f\u5219\uff0c\u8fd9\u5c31\u662f\u5f88\u7406\u60f3\u7684\u60c5\u51b5\u3002"),(0,l.kt)("h2",{id:"1-\u5355\u4f8b\u6a21\u5f0f"},"1 \u5355\u4f8b\u6a21\u5f0f"),(0,l.kt)("p",null,"\u5355\u4f8b\u6a21\u5f0f\u662f\u6700\u7b80\u5355\u7684\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u3002\u540c\u65f6\u4e5f\u662f\u4f7f\u7528\u6700\u591a\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002\u6211\u4eec\u5728\u65e0\u610f\u8bc6\u4e2d\u53ef\u80fd\u4f1a\u5927\u91cf\u4f7f\u7528\u5b83\u3002"),(0,l.kt)("p",null,"\u987e\u540d\u601d\u4e49\uff0c\u5355\u4f8b\u6a21\u5f0f\u5f3a\u8c03\u7684\u5c31\u662f",(0,l.kt)("strong",{parentName:"p"},"\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5b9e\u4f8b"),"\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"JavaScript \u4e2d\u53bb\u601d\u8003\u5355\u4f8b\uff0c\u8981\u6bd4\u5728\u5176\u4ed6\u5f00\u53d1\u8bed\u8a00\u91cc\u601d\u8003\u5355\u4f8b\u8981\u7b80\u5355\u5f88\u591a\u3002\u56e0\u4e3a JavaScript \u672c\u8eab\u5c31\u662f\u5355\u7ebf\u7a0b\u8bed\u8a00\uff0c\u4e0d\u9700\u8981\u8003\u8651\u591a\u7ebf\u7a0b\u7684\u60c5\u51b5\u4e0b\u7684\u540c\u6b65\u9501\u95ee\u9898\u3002")),(0,l.kt)("p",null,"\u4f8b\u5982\uff0c\u6211\u4eec\u968f\u4fbf\u4f7f\u7528\u5bf9\u8c61\u5b57\u9762\u91cf\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\uff0c\u8fd9\u5c31\u662f\u6700\u7b80\u5355\u7684\u5355\u4f8b\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const p1 = {\n  token: '1xd33xsk21',\n  time: 20201219\n}\n")),(0,l.kt)("p",null,"\u5728\u5b9e\u8df5\u4e2d\uff0c\u67d0\u4e9b\u573a\u666f\u53ea\u9700\u521b\u5efa\u4e00\u6b21\u5b9e\u4f8b\uff0c\u800c\u4e0d\u7528\u53cd\u590d\u521b\u5efa\u5b9e\u4f8b\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\uff0c\u5355\u9875\u5e94\u7528\u4e2d\u7684\u767b\u9646\u5f39\u7a97\u7ec4\u4ef6\u3002\u8be5\u7ec4\u4ef6\u53ef\u80fd\u4f1a\u51fa\u73b0\u591a\u6b21\uff0c\u4f46\u6211\u4eec\u5b8c\u5168\u6ca1\u6709\u5fc5\u8981\u5728\u4ed6\u6bcf\u6b21\u51fa\u73b0\u65f6\u90fd\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\u3002\u800c\u53ea\u9700\u5728\u9879\u76ee\u4e2d\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\u5c31\u53ef\u4ee5\u6ee1\u8db3\u8981\u6c42\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/0fd3aa975e3781ce6c3d4b41d08509e1.image",alt:"img"})),(0,l.kt)("p",null,"\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u624d\u80fd\u786e\u4fdd\u8be5\u767b\u9646\u7ec4\u4ef6\u53ea\u4f1a\u521b\u5efa\u4e00\u4e2a\u5b9e\u4f8b\u5462\uff1f"),(0,l.kt)("p",null,"\u5148\u6309\u7167\u6b63\u5e38\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Login {\n  constructor() {}\n  show() {}\n  hide() {}\n  // \u6e32\u67d3 DOM \u8282\u70b9\n  render() {}\n}\n")),(0,l.kt)("p",null,"\u5f53\u524d\u7684\u5199\u6cd5\uff0c\u5f53\u6211\u4eec\u591a\u6b21\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"new")," \u5173\u952e\u65f6\uff0c\u5c31\u4f1a\u521b\u5efa\u591a\u4e2a\u5b9e\u4f8b\uff0c\u8fd8\u4e0d\u7b26\u5408\u5355\u4f8b\u6a21\u5f0f\u7684\u8981\u6c42\u3002\u90a3\u4e48\u6211\u4eec\u9700\u8981\u601d\u8003\u7684\u95ee\u9898\uff0c\u5c31\u662f\u5982\u4f55\u5728\u591a\u6b21\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"new")," \u7684\u65f6\u5019\uff0c\u4e0d\u4f1a\u91cd\u590d\u521b\u5efa\u5b9e\u4f8b\u5462\uff1f"),(0,l.kt)("p",null,"\u6211\u4eec\u77e5\u9053\uff0c\u521b\u5efa\u5b9e\u4f8b\u7684\u5173\u952e\u5c31\u5728\u4e8e\u6784\u9020\u51fd\u6570\uff0c\u56e0\u6b64\uff0c\u53ea\u9700\u8981\u5728\u6784\u9020\u51fd\u6570\u4e2d\u505a\u4e00\u4e2a\u91cd\u590d\u7684\u5224\u65ad\uff0c\u5c31\u53ef\u4ee5\u8fbe\u5230\u8981\u6c42\u3002\u5728\u4e00\u4e2a\u53ef\u4ee5\u5728\u5185\u5b58\u4e2d\u6301\u4e45\u5b58\u5728\u7684\u5730\u65b9\u6dfb\u52a0\u4e00\u4e2a\u5f15\u7528\uff0c\u7528\u4e8e\u5b58\u50a8\u5df2\u7ecf\u521b\u5efa\u597d\u7684\u5b9e\u4f8b\uff0c\u5728\u6784\u9020\u51fd\u6570\u4e2d\u5224\u65ad\uff0c\u5982\u679c\u8be5\u5f15\u7528\u5df2\u7ecf\u5b58\u5728\u4e86\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u90a3\u4e48\u5c31\u4e0d\u518d\u8fd4\u56de\u65b0\u7684\u5b9e\u4f8b\u3002"),(0,l.kt)("p",null,"\u53ef\u4ee5\u4f7f\u7528\u9759\u6001\u5c5e\u6027\u6765\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u5df2\u521b\u5efa\u597d\u7684\u5b9e\u4f8b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Login {\n  // \u4f7f\u7528\u9759\u6001\u5c5e\u6027\u5728\u5185\u5b58\u5b58\u50a8\u5b9e\u4f8b\n  static instance = null\n  constructor(parentNode) {\n    // \u5224\u65ad\uff0c\u5982\u679c\u5df2\u7ecf\u5b58\u5728\u5b9e\u4f8b\uff0c\u76f4\u63a5\u8fd4\u56de\u8be5\u5b9e\u4f8b\n    if (Login.instance) {\n      return Login.instance\n    }\n    this.parentNode = parentNode\n    this.render()\n    Login.instance = this\n    return this\n  }\n\n  show() { }\n  hide() { }\n  // \u6e32\u67d3 DOM \u8282\u70b9\n  render() { }\n}\n\nconst p2 = new Login()\nconst p1 = new Login()\n\nconsole.log(p1 === p2) // true\n")),(0,l.kt)("p",null,"\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u95ed\u5305\u5728\u5185\u5b58\u5b58\u50a8\u5b9e\u4f8b\uff0c\u53ea\u662f\u5199\u6cd5\u4e0d\u4e00\u6837\uff0c\u601d\u8def\u4e0e\u4e0a\u9762\u7684\u65b9\u6848\u65e0\u5dee\u522b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const Login = (function () {\n  // \u4f7f\u7528 \u95ed\u5305 \u5728\u5185\u5b58\u5b58\u50a8\u5b9e\u4f8b\n  let instance = null\n  class LoginComponent {\n    constructor(parentNode) {\n      // \u5224\u65ad\uff0c\u5982\u679c\u5df2\u7ecf\u5b58\u5728\u5b9e\u4f8b\uff0c\u76f4\u63a5\u8fd4\u56de\u8be5\u5b9e\u4f8b\n      if (instance) {\n        return instance\n      }\n      this.parentNode = parentNode\n      this.render()\n      instance = this\n      return this\n    }\n\n    show() { }\n    hide() { }\n    // \u6e32\u67d3 DOM \u8282\u70b9\n    render() { }\n  }\n  return LoginComponent\n})()\n\nconst p2 = new Login()\nconst p1 = new Login()\n\nconsole.log(p1 === p2) // true\n")),(0,l.kt)("p",null,"\u4ed4\u7ec6\u89c2\u5bdf\u7528\u95ed\u5305\u5b58\u50a8\u5b9e\u4f8b\uff0c\u6211\u4eec\u4f7f\u7528\u51fd\u6570\u81ea\u6267\u884c\u7684\u65b9\u5f0f\u6784\u5efa\u4e86\u95ed\u5305\u73af\u5883\uff0c\u5982\u679c\u6211\u4eec\u6362\u4e00\u79cd\u65b9\u5f0f\uff0c\u5047\u8bbe\u6211\u4eec\u7684\u5f00\u53d1\u73af\u5883\u5df2\u7ecf\u652f\u6301\u4e86\u6a21\u5757\u5316\u300cimport\u65b9\u5f0f\u300d\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u8fd9\u79cd\u65b9\u5f0f\u8fdb\u884c\u4e00\u4e2a\u7b80\u5355\u7684\u8c03\u6574"),(0,l.kt)("p",null,"\u9996\u5148\u5b9a\u4e49"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// components/login.js\nlet instance = null\nclass LoginComponent {\n  constructor(parentNode) {\n    // \u5224\u65ad\uff0c\u5982\u679c\u5df2\u7ecf\u5b58\u5728\u5b9e\u4f8b\uff0c\u76f4\u63a5\u8fd4\u56de\u8be5\u5b9e\u4f8b\n    if (instance) {\n      return instance\n    }\n    this.parentNode = parentNode\n    this.render()\n    instance = this\n    return this\n  }\n\n  show() { }\n  hide() { }\n  // \u6e32\u67d3 DOM \u8282\u70b9\n  render() { }\n}\n\nexport default LoginComponent\n")),(0,l.kt)("p",null,"\u5728\u5176\u4ed6\u6a21\u5757\u4e2d\u4f7f\u7528"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"import Login from 'components/login'\n\nconst p1 = new Login()\nconst p2 = new Login()\n\nconsole.log(p1 === p2)  // true\n")),(0,l.kt)("p",null,"\u57fa\u4e8e\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u5927\u5bb6\u53ef\u4ee5\u4f53\u4f1a\u4e00\u4e0b\uff1a\u6a21\u5757\u3001\u95ed\u5305\u3001\u5355\u4f8b \u4e4b\u95f4\u7684\u5173\u7cfb\u3002"),(0,l.kt)("p",null,"\u8fdb\u4e00\u6b65\u601d\u8003\uff0c\u5982\u679c\u6211\u60f3\u8981\u628a\u5df2\u7ecf\u5c01\u88c5\u597d\u7684\u7c7b\uff0c\u8f6c\u5316\u4e3a\u5355\u4f8b\u6a21\u5f0f\u5e94\u8be5\u600e\u4e48\u529e\uff1f\u524d\u63d0\u662f\u6211\u671f\u671b\u4e4b\u524d\u7684\u4ee3\u7801\u4e0d\u4f1a\u66f4\u6539\uff0c\u6216\u8005\u662f\u7b2c\u4e09\u65b9\u4f9d\u8d56\u65e0\u6cd5\u66f4\u6539\u3002"),(0,l.kt)("p",null,"\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u501f\u52a9\u4ee3\u7406\u7684\u601d\u7ef4\u65b9\u5f0f\u6765\u5904\u7406\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Login {\n  constructor() { }\n  show() { }\n  hide() { }\n  // \u6e32\u67d3 DOM \u8282\u70b9\n  render() { }\n}\n\nconst LoginProxy = (function () {\n  let instance = null\n  return function() {\n    if (!instance) {\n      instance = new Login()\n    }\n    return instance\n  }\n})()\n\nconst p1 = new LoginProxy()\nconst p2 = new LoginProxy()\n\nconsole.log(p1 === p2)\n")),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u79cd\u65b9\u5f0f\u8fdb\u884c\u4e00\u4e2a\u7b80\u5355\u7684\u8c03\u6574\uff0c\u8ba9\u5176\u6269\u5c55\u6027\u53d8\u5f97\u66f4\u5f3a\u3002"),(0,l.kt)("p",null,"\u6838\u5fc3\u7684\u601d\u60f3\u662f\u521b\u5efa\u4e00\u4e2a\u5355\u4f8b\u521b\u5efa\u65b9\u6cd5 singleCreator\u3002"),(0,l.kt)("p",null,"singleCreator \u501f\u52a9\u9ad8\u9636\u51fd\u6570\u7684\u601d\u60f3\uff0c\u7528\u4e8e\u6269\u5c55\u6784\u9020\u51fd\u6570\u7684\u903b\u8f91\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Login {\n  constructor() { }\n  show() { }\n  hide() { }\n  // \u6e32\u67d3 DOM \u8282\u70b9\n  render() { }\n}\n\n// \u8be5\u65b9\u6cd5\u53ef\u4ee5\u5c06\u5176\u4ed6\u7684\u4efb\u4f55\u7c7b\u6539\u9020\u6210\u4e3a\u5355\u4f8b\u6a21\u5f0f\nfunction singleCreator(constructor) {\n  let instance = null\n  return function() {\n    if (!instance) {\n      instance = new constructor()\n    }\n    return instance\n  }\n}\n\nconst _Login = singleCreator(Login)\n\nconst p1 = new _Login()\nconst p2 = new _Login()\nconsole.log(p1)\nconsole.log(p1 === p2)\n")),(0,l.kt)("h2",{id:"2--\u5de5\u5382\u6a21\u5f0f"},"2  \u5de5\u5382\u6a21\u5f0f"),(0,l.kt)("p",null,"\u8981\u51c6\u786e\u7684\u7406\u89e3\u5de5\u5382\u6a21\u5f0f\u5e76\u4e0d\u7b80\u5355\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"JavaScript \u4e2d\u6ca1\u6709\u63a5\u53e3\u548c\u62bd\u8c61\u7c7b\u7684\u6982\u5ff5\uff0c\u56e0\u6b64\u57fa\u4e8e JavaScript \u7406\u89e3\u5de5\u5382\u6a21\u5f0f\uff0c\u5728\u5b9e\u73b0\u4e0a\u4e0e\u5176\u4ed6\u8bed\u8a00\u6709\u6240\u4e0d\u540c\u3002\u56e0\u6b64\u5b66\u4e60\u65f6\u8981\u6ce8\u610f\u533a\u5206")),(0,l.kt)("p",null,"\u5047\u8bbe\u6211\u6709\u4e00\u4e2a\u624b\u673a\u5de5\u5382\uff0c\u5de5\u5382\u91cc\u80fd\u751f\u4ea7\u5404\u79cd\u624b\u673a\u3002\u5c0f\u7c73\u3001\u82f9\u679c\u3001\u534e\u4e3a\u7b49\u3002"),(0,l.kt)("p",null,"\u6bcf\u4e00\u79cd\u624b\u673a\u7684\u751f\u4ea7\u6d41\u7a0b\u57fa\u672c\u76f8\u540c\uff0c\u4f46\u662f\u9700\u8981\u7684\u539f\u6750\u6599\u4e0d\u4e00\u6837\u3002"),(0,l.kt)("p",null,"\u4e8e\u662f\u6211\u4eec\u6309\u7167\u666e\u901a\u7684\u601d\u7ef4\u5b9a\u4e49\u7c7b\u65f6\uff0c\u5c31\u4f1a\u51fa\u73b0\u4e00\u79cd\u60c5\u51b5\uff0c\u4ed6\u4eec\u53ea\u662f\u5728\u521b\u5efa\u65f6\u4f20\u5165\u7684\u53c2\u6570\u4e0d\u540c\uff0c\u4f46\u662f\u5176\u4ed6\u7684\u65b9\u6cd5\u90fd\u76f8\u540c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Xiaomi {\n  constructor() {\n    this.materials = {\n      1: 'xiaomi_material1',\n      2: 'xiaomi_material2',\n      3: 'xiaomi_material3',\n    }\n  }\n  step1() {}\n  step2() {}\n  step3() {}\n  step4() {}\n}\n\nclass IPhone {\n  constructor() {\n    this.materials = {\n      1: 'iphone_material1',\n      2: 'iphone_material2',\n      3: 'iphone_material3',\n    }\n  }\n  step1() {}\n  step2() {}\n  step3() {}\n  step4() {}\n}\n\nclass Huawei {\n  constructor() {\n    this.materials = {\n      1: 'huawei_material1',\n      2: 'huawei_material2',\n      3: 'huawei_material3',\n    }\n  }\n  step1() {}\n  step2() {}\n  step3() {}\n  step4() {}\n}\n")),(0,l.kt)("p",null,"\u8fd9\u6837\u5c01\u88c5\u6ca1\u4ec0\u4e48\u95ee\u9898\u3002\u4e0d\u8fc7\u6211\u4eec\u5728\u5b9e\u8df5\u65f6\uff0c\u53ef\u80fd\u4f1a\u9047\u5230\u4e00\u4e9b\u7ef4\u62a4\u4e0a\u7684\u5c0f\u95ee\u9898\u3002"),(0,l.kt)("p",null,"\u65f6\u5149\u98de\u901d\uff0c\u7c7b Xiaomi \u5df2\u7ecf\u5728\u4ee3\u7801\u4e2d\u7528\u4e86\u5f88\u4e45\uff0c\u9879\u76ee\u4e2d\u6709\u51e0\u5341\u5904\u4ee3\u7801\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"new Xiaomi()")," \u521b\u5efa\u4e86\u5927\u91cf\u7684\u5b9e\u4f8b\u3002\u53ef\u662f\u540e\u6765\u6211\u4eec\u53d1\u73b0\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"Xiaomi")," \u5df2\u7ecf\u51fa\u4e86\u5f88\u591a\u79cd\u54c1\u724c\u4e86\uff0c\u4f8b\u5982 \u5c0f\u7c736\uff0c\u5c0f\u7c737\uff0c\u5c0f\u7c738\uff0c\u800c\u4e14\u8fd9\u4e9b\u5c0f\u7c73\u624b\u673a\u4f7f\u7528\u7684\u6750\u6599\u4e5f\u4e0d\u4e00\u6837\u3002\u800c\u6211\u4eec\u6700\u5f00\u59cb\u4f7f\u7528\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"Xiaomi"),"\uff0c\u5176\u5b9e\u662f\u60f3\u8981\u58f0\u660e\u7684\u662f \u5c0f\u7c73 4\u3002"),(0,l.kt)("p",null,"\u4e3a\u4e86\u9002\u5e94\u573a\u666f\u7684\u53d8\u52a8\u548c\u8c03\u6574\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539\u4ee3\u7801\u3002\u4f46\u662f Xiaomi \u7c7b\u5df2\u7ecf\u53d8\u6210\u4e86\u7956\u4f20\u4ee3\u7801\uff0c\u6b64\u65f6\u5982\u679c\u8f7b\u6613\u4fee\u6539\uff0c\u98ce\u9669\u975e\u5e38\u5927\u3002\u5373\u4f7f\u53ea\u662f\u6539\u4e00\u4e2a\u7c7b\u540d Xiaomi -> Xiaomi4\uff0c\u5c31\u8981\u6539\u52a8\u51e0\u5341\u5904\u3002\u56e0\u6b64\u6211\u4eec\u5728\u8bbe\u8ba1\u4e4b\u521d\uff0c\u5982\u4f55\u907f\u514d\u672a\u6765\u4fee\u6539\u4ee3\u7801\u7684\u98ce\u9669\u5462\uff1f"),(0,l.kt)("p",null,"\u5de5\u5382\u6a21\u5f0f\u5c31\u662f\u8fd9\u91cc\u63d0\u4f9b\u7684\u4e00\u4e2a\u89e3\u51b3\u65b9\u6848\u3002"),(0,l.kt)("p",null,"\u5de5\u5382\u6a21\u5f0f\u7528\u4e8e\u5c01\u88c5\u548c\u7ba1\u7406\u5bf9\u8c61\u7684\u521b\u5efa\u3002\u5de5\u5382\u6a21\u5f0f\u671f\u671b\u6211\u4eec\u5728\u521b\u5efa\u5bf9\u8c61\u65f6\uff0c\u4e0d\u4f1a\u5bf9\u5916\u66b4\u9732\u521b\u5efa\u903b\u8f91\uff0c\u5e76\u4e14\u662f\u901a\u8fc7\u4f7f\u7528\u4e00\u4e2a\u5171\u540c\u7684\u63a5\u53e3\u6765\u521b\u5efa\u65b0\u7684\u5bf9\u8c61\u3002"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u521b\u5efa\u4e00\u4e2a\u5de5\u5382\u65b9\u6cd5\uff0c\u901a\u8fc7\u4f20\u5165\u4e0d\u540c\u7684\u53c2\u6570\uff0c\u7136\u540e\u58f0\u660e\u4e0d\u540c\u7684\u7c7b\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function factory(type) {\n  if (type == 'xiaomi') {\n    return new Xiaomi()\n  }\n  if (type == 'iphone') {\n    return new IPhone()\n  }\n  if (type == 'huawei') {\n    return new Huawei()\n  }\n}\n")),(0,l.kt)("p",null,"\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u901a\u8fc7\u5de5\u5382\u65b9\u6cd5\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u5b57\u7b26\u4e32\uff0c\u4e0e\u5177\u4f53\u7684\u7c7b\u4e4b\u95f4\uff0c\u5efa\u7acb\u4e86\u4e00\u4e2a\u6620\u5c04\u5173\u7cfb\u3002"),(0,l.kt)("p",null,"\u90a3\u4e48\uff0c\u6211\u4eec\u5728\u4f7f\u7528\u65f6\uff0c\u5c31\u4e0d\u518d\u76f4\u63a5\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"new Xiaomi()")," \u7684\u65b9\u5f0f\u76f4\u63a5\u521b\u5efa\u5b9e\u4f8b\u4e86\u3002\u800c\u662f\u4f7f\u7528 factory \u65b9\u6cd5\u8fdb\u884c\u521b\u5efa\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const xm = factory('xiaomi')\nconst ip = factory('iphone')\nconst hw = factory('huawei')\n")),(0,l.kt)("p",null,"\u672a\u6765\u9700\u8981\u5c06\u7c7b\u540d\u8fdb\u884c\u66f4\u6539\u65f6\uff0c\u4f8b\u5982\u5c06 Xiaomi \u4fee\u6539\u4e3a Xiaomi4\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u5728\u7c7b\u7684\u58f0\u660e\u548c\u5de5\u5382\u65b9\u6cd5\u91cc\u8fdb\u884c\u4fee\u6539\u5373\u53ef\u3002\u800c\u5176\u4ed6\u4f7f\u7528\u7684\u5730\u65b9\uff0c\u53ef\u4ee5\u4e0d\u505a\u4fee\u6539\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-diff"},"- class Xiaomi {\n+ class Xiaomi4 {\n  constructor() {\n    this.materials = {\n      1: 'xiaomi_material1',\n      2: 'xiaomi_material2',\n      3: 'xiaomi_material3',\n    }\n  }\n  step1() {}\n  step2() {}\n  step3() {}\n  step4() {}\n}\n\n\nfunction factory(type) {\n  if (type == 'xiaomi') {\n-    return new Xiaomi()\n+    return new Xiaomi4()\n  }\n  if (type == 'iphone') {\n    return new IPhone()\n  }\n  if (type == 'huawei') {\n    return new Huawei()\n  }\n}\n")),(0,l.kt)("p",null,"\u8fd9\u5c31\u662f\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u3002"),(0,l.kt)("p",null,"\u8fd9\u6837\u80fd\u591f\u89e3\u51b3\u4e00\u90e8\u5206\u95ee\u9898\u3002"),(0,l.kt)("p",null,"\u8fdb\u4e00\u6b65\u601d\u8003\uff0c\u540e\u7eed\u624b\u673a\u7684\u54c1\u79cd\u4f1a\u8d8a\u6765\u8d8a\u591a\uff0c\u5c0f\u7c738\uff0c\u5c0f\u7c739\uff0c \u5c0f\u7c7310\uff0c\u534e\u4e3a mete10\uff0c\u534e\u4e3a p40 \u7b49\u7b49\u3002\u90a3\u8fd9\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u9664\u4e86\u8981\u65b0\u589e\u4e00\u4e2a\u7c7b\u4e4b\u5916\uff0c\u5de5\u5382\u65b9\u6cd5 factory \u4e5f\u4f1a\u6301\u7eed\u88ab\u66f4\u6539\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u8fdd\u80cc\u4e86\u5f00\u95ed\u539f\u5219")),(0,l.kt)("p",null,"\u90a3\u6211\u4eec\u5e94\u8be5\u600e\u4e48\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\u6709\u6ca1\u6709\u4e00\u79cd\u65b9\u5f0f\uff0c\u80fd\u591f\u8ba9\u5de5\u5382\u65b9\u6cd5\u5728\u540e\u7eed\u7684\u8fed\u4ee3\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u8fdb\u884c\u4fee\u6539\uff1f"),(0,l.kt)("p",null,"\u5f53\u7136\u6709\uff1a\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5982\u4e0b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function factory(type) {\n  // window \u8868\u793a\u58f0\u660e\u7684\u7c7b \u6302\u8f7d\u7684\u5bf9\u8c61\uff0c\u53ef\u80fd\u662fwindow\uff0c\u53ef\u80fd\u662fglobal\uff0c\u53ef\u80fd\u662f\u5176\u4ed6\u81ea\u5b9a\u4e49\u7684\u5bf9\u8c61\n  return new window[type]()\n}\n")),(0,l.kt)("p",null,"\u8fd9\u6837\u5904\u7406\u4e4b\u540e\uff0c\u90a3\u4e48\u4f20\u5165\u7684 type \u5b57\u7b26\u4e32\uff0c\u5c31\u5fc5\u987b\u4e0e\u7c7b\u540d\u4fdd\u6301\u4e00\u81f4\u3002\u56e0\u6b64\u5728\u4f7f\u7528\u65f6\u4f1a\u6709\u4e00\u4e9b\u9650\u5236"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const hw = factory('Huawei')\n")),(0,l.kt)("p",null,"\u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u7ef4\u62a4\u4e00\u4efd\u914d\u7f6e\u6587\u4ef6\uff0c\u8be5\u914d\u7f6e\u6587\u4ef6\u5c31\u662f\u663e\u5f0f\u7684\u6807\u660e\u7c7b\u578b\u5b57\u7b26\u4e32\u4e0e\u7c7b\u540d\u7684\u6620\u5c04\u5173\u7cfb\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4efd\u914d\u7f6e\u6587\u4ef6\uff0c\u5b9a\u4e49\u5728\u5de5\u5382\u51fd\u6570\u7684\u539f\u578b\u5bf9\u8c61\u4e2d\u3002"),(0,l.kt)("p",null,"\u4e8e\u662f\uff0c\u4e0a\u9762\u7684\u5de5\u5382\u51fd\u6570\u53ef\u4ee5\u6f14\u53d8\u6210\u4e3a\u5de5\u5382\u7c7b\u3002\u5e76\u4e14\u5177\u5907\u4e86\u81ea\u5df1\u7684\u65b9\u6cd5\uff0cconfig \u914d\u7f6e\u6587\u4ef6\u7ef4\u62a4\u5728\u5de5\u5382\u5bf9\u8c61\u7684\u539f\u578b\u4e2d\uff0c\u88ab\u6240\u6709\u5b9e\u4f8b\u5171\u4eab\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function Factory() {}\nFactory.prototype.create = function(type) {\n  var cur = this.config[type]\n  if (cur) {\n    return new cur()\n  }\n}\nFactory.prototype.config = {}\nFactory.prototype.setConfig = function(type, sub) {\n  this.config[type] = sub\n}\n")),(0,l.kt)("p",null,"\u4e4b\u540e\uff0c\u6bcf\u65b0\u589e\u4e00\u4e2a\u7c7b\uff0c\u90fd\u9700\u8981\u4f7f\u7528\u5de5\u5382\u5bf9\u8c61\u4fee\u6539\u5b58\u50a8\u5728\u539f\u578b\u5bf9\u8c61\u4e2d\u7684\u914d\u7f6e"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Xiaomi5 {\n  constructor() {\n    this.materials = {\n      1: 'xiaomi_material1',\n      2: 'xiaomi_material2',\n      3: 'xiaomi_material3',\n    }\n  }\n  step1() {}\n  step2() {}\n  step3() {}\n  step4() {}\n}\n\nnew Factory().setConfig('xiaomi5', Xiaomi5)\n")),(0,l.kt)("p",null,"\u6211\u4eec\u4e5f\u53ef\u4ee5\u4e13\u95e8\u624b\u52a8\u7ef4\u62a4\u4e00\u4e2a\u5355\u72ec\u7684\u6a21\u5757\u4f5c\u4e3a\u914d\u7f6e\u6587\u4ef6\u3002\u8fd9\u6837\u7684\u65b9\u5f0f\u66f4\u76f4\u89c2\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"import Xiaomi from './Xiaomi'\nimport Xiaomi5 from './Xiaomi5'\n\nexport default {\n  xiaomi: Xiaomi,\n  xiaomi5: Xiaomi5\n}\nimport config from './config'\n\nexport default function factory(type) {\n  if (config[type]) {\n    return new config[type]()\n  }\n}\n")),(0,l.kt)("p",null,"\u5f88\u663e\u7136\uff0c\u5728\u4ee3\u7801\u5c42\u9762\uff0c\u8fd8\u53ef\u4ee5\u5bf9\u7c7b\u578b\u58f0\u660e\u8fdb\u884c\u4f18\u5316\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u5206\u6790\u4e0a\u9762\u4e09\u4e2a\u7c7b\u7684\u60c5\u51b5\uff0c\u90fd\u662f\u751f\u6210\u624b\u673a\uff0c\u6240\u4ee5\u6240\u6709\u7684\u65b9\u6cd5\u90fd\u5b8c\u5168\u76f8\u540c\u3002\u4f46\u662f\u56e0\u4e3a\u6bcf\u4e00\u79cd\u624b\u673a\u7684\u539f\u6750\u6599\u4e0d\u4e00\u6837\uff0c\u56e0\u6b64\u6784\u9020\u51fd\u6570\u91cc\u4f1a\u4e0d\u4e00\u6837\u3002\u5229\u7528\u5c01\u88c5\u7684\u601d\u7ef4\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e09\u4e2a\u7c7b\uff0c\u5408\u5e76\u6210\u4e3a\u4e00\u4e2a\u7c7b\uff0c\u4e0d\u540c\u7684\u624b\u673a\u5728\u6784\u9020\u51fd\u6570\u4e2d\u8fdb\u884c\u5224\u65ad\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class PhoneFactory {\n  constructor(type) {\n    if (type == 'xiaomi') {\n      this.materials = {\n        1: 'xiaomi_material1',\n        2: 'xiaomi_material2',\n        3: 'xiaomi_material3',  \n      }\n    }\n    if (type == 'iphone') {\n      this.materials = {\n        1: 'iphone_material1',\n        2: 'iphone_material2',\n        3: 'iphone_material3',\n      }\n    }\n    if (type == 'huawei') {\n      this.materials = {\n        1: 'huawei_material1',\n        2: 'huawei_material2',\n        3: 'huawei_material3',\n      }\n    }\n  }\n  step1() {}\n  step2() {}\n  step3() {}\n  step4() {}\n}\n\nconst xm = new PhoneFactory('xiaomi')\nconst ip = new PhoneFactory('iphone')\nconst hw = new PhoneFactory('huawei')\n")),(0,l.kt)("p",null,"\u8fd9\u79cd\u65b9\u5f0f\u7684\u5e95\u5c42\u601d\u7ef4\u662f\u5c06\u6240\u6709\u7684\u624b\u673a\u62bd\u8c61\u6210\u4e3a\u540c\u4e00\u79cd\u7c7b\u578b\uff0c\u7136\u540e\u5728\u6784\u9020\u51fd\u6570\u65f6\u9488\u5bf9\u4e0d\u540c\u7684\u7ec6\u8282\u8fdb\u884c\u533a\u5206\u3002\u4e4b\u6240\u4ee5\u80fd\u591f\u8fd9\u6837\u5904\u7406\u7684\u539f\u56e0\uff0c\u662f\u56e0\u4e3a Xiaomi\uff0cIPhone\uff0cHuawei \u8fd9\u51e0\u4e2a\u7c7b\u9ad8\u5ea6\u76f8\u4f3c\uff0c\u56e0\u6b64\u53ef\u4ee5\u62bd\u8c61\u6210\u4e3a\u540c\u4e00\u79cd\u7c7b\u578b\u3002\u4f46\u662f\u5982\u679c\u53ea\u6709\u90e8\u5206\u76f8\u4f3c\uff0c\u5c31\u9700\u8981\u533a\u522b\u5bf9\u5f85\u3002"),(0,l.kt)("p",null,"\u5728 jQuery \u7684\u5c01\u88c5\u91cc\uff0c\u4e5f\u6709\u540c\u6837\u7684\u573a\u666f\u3002\u4f8b\u5982 jQuery \u7684\u6784\u9020\u51fd\u6570 ",(0,l.kt)("inlineCode",{parentName:"p"},"jQuery.fn.init")," \u4e2d\u6709\u8fd9\u6837\u7684\u903b\u8f91\u5224\u65ad"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'init = jQuery.fn.init = function (selector, context, root) {\n  var match, elem;\n\n  // $(""), $(null), $(undefined), $(false)\n  if (!selector) {\n    return this;\n  }\n\n  // $(\'.wrapper\')\n  if (typeof selector === "string") {\n\n    //...\n\n    // $(DOMElement)\n  } else if (selector.nodeType) {\n\n  // $(function)\n  // Shortcut for document ready\n  } else if (jQuery.isFunction(selector)) {\n    //....\n  }\n\n  return jQuery.makeArray(selector, this);\n};\n')),(0,l.kt)("p",null,"\u4e3a\u4e86\u6269\u5c55\u65f6\uff0c\u4e0d\u76f4\u63a5\u4fee\u6539\u5bf9\u8c61\u800c\u662f\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u8c03\u6574\u4e00\u4e0b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const config = {\n  xiaomi: {\n    1: 'xiaomi_material1',\n    2: 'xiaomi_material2',\n    3: 'xiaomi_material3',\n  },\n  iphone: {\n    1: 'iphone_material1',\n    2: 'iphone_material2',\n    3: 'iphone_material3',\n  },\n  huawei: {\n    1: 'huawei_material1',\n    2: 'huawei_material2',\n    3: 'huawei_material3',\n  }\n}\n\nclass PhoneFactory {\n  constructor(type) {\n    this.materials = config[type]\n  }\n  step1() {}\n  step2() {}\n  step3() {}\n  step4() {}\n}\n\nconst xm = new PhoneFactory('xiaomi')\nconst ip = new PhoneFactory('iphone')\nconst hw = new PhoneFactory('huawei')\n")),(0,l.kt)("p",null,"\u4f46\u662f\u5982\u679c\u8fd9\u51e0\u4e2a\u7c7b\u53ea\u662f\u90e8\u5206\u76f8\u4f3c\uff0c\u53ea\u6709\u90e8\u5206\u63a5\u53e3\u662f\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u533a\u522b\u5bf9\u8c61\uff0c\u800c\u4e0d\u80fd\u76f4\u63a5\u5408\u5728\u4e00\u8d77\u3002\u540c\u6837\u7684\u65b9\u6cd5\u4f7f\u7528\u7ee7\u627f\u7684\u65b9\u5f0f\u6765\u7b80\u5316"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Phone {\n  step1() {}\n  step2() {}\n  step3() {}\n  step4() {}\n}\n\nclass Xiaomi extends Phone {\n  constructor() {\n    this.materials = {\n      1: 'xiaomi_material1',\n      2: 'xiaomi_material2',\n      3: 'xiaomi_material3',\n    }\n  }\n}\n\nclass IPhone extends Phone {\n  constructor() {\n    this.materials = {\n      1: 'iphone_material1',\n      2: 'iphone_material2',\n      3: 'iphone_material3',\n    }\n  }\n}\n\nclass Huawei extends Phone {\n  constructor() {\n    this.materials = {\n      1: 'huawei_material1',\n      2: 'huawei_material2',\n      3: 'huawei_material3',\n    }\n  }\n}\n\nconst config = {\n  xiaomi: Xiaomi,\n  iphone: IPhone,\n  huawei: Huawei\n}\n\nfunction factory(type) {\n  if (config[type]) {\n    return new config[type]()\n  }\n}\n\nconst xm = factory('xiaomi')\nconst ip = factory('iphone')\nconst hw = factory('huawei')\n")),(0,l.kt)("p",null,"\u5de5\u5382\u6a21\u5f0f\u7684\u6838\u5fc3\u601d\u7ef4\u5728\u4e8e\u4e0d\u76f4\u63a5\u901a\u8fc7 new \u6765\u521b\u5efa\u5b9e\u4f8b\uff0c\u800c\u662f\u4f7f\u7528\u5de5\u5382\u65b9\u6cd5\u8fdb\u884c\u4e00\u5c42\u5c01\u88c5\uff0c\u9690\u85cf\u5b9e\u4f8b\u7684\u521b\u5efa\u7ec6\u8282\u3002\u56e0\u6b64\u4e0a\u9762\u63d0\u5230\u7684\u8bb8\u591a\u65b9\u5f0f\uff0c\u90fd\u662f\u80fd\u591f\u57fa\u672c\u6ee1\u8db3\u8fd9\u4e2a\u7279\u70b9\uff0c\u90a3\u4e48\u5bf9\u5e94\u5230\u5b9e\u8df5\u573a\u666f\u4e2d\uff0c\u5c31\u9700\u8981\u7ed3\u5408\u573a\u666f\u9009\u62e9\u6700\u9002\u5408\u7684\u65b9\u5f0f\u7075\u6d3b\u4f7f\u7528\u3002"),(0,l.kt)("h2",{id:"3-\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f"},"3 \u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f"),(0,l.kt)("p",null,"\u89c2\u5bdf\u8005\u6a21\u5f0f\u4e5f\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u76d1\u542c\u8005\u6a21\u5f0f\u3002"),(0,l.kt)("p",null,"\u5b83\u7531\u89c2\u5bdf\u8005\u300cObserver\u300d\u4e0e\u88ab\u89c2\u5bdf\u8005\u300cSubject\u300d\u5171\u540c\u7ec4\u6210\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/6001aeb33595058010bcaf8891cd895a.image",alt:"img"})),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u53c8\u540d\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\uff0c\u5728\u590d\u6742\u573a\u666f\u4e0b\uff0c\u4e3a\u4e86\u9002\u5e94\u66f4\u591a\u9700\u6c42\uff0c\u9664\u4e86\u89c2\u5bdf\u8005\u4e0e\u88ab\u89c2\u5bdf\u8005\uff0c\u8fd8\u4f1a\u5f15\u5165\u66f4\u591a\u7684\u89d2\u8272\uff0c\u56e0\u6b64\u590d\u6742\u573a\u666f\u4e0b\uff0c\u5927\u5bb6\u66f4\u613f\u610f\u79f0\u4e4b\u4e3a\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\u3002")),(0,l.kt)("p",null,"\u6211\u4eec\u4f1a\u9047\u5230\u5f88\u591a\u8fd9\u79cd\u573a\u666f\uff0c\u4f8b\u5982\u4e8b\u4ef6\u76d1\u542c\u3002\u5f53\u6211\u4eec\u70b9\u51fb\u6309\u94ae\u65f6\uff0c\u5bf9\u5e94\u6309\u94ae\u5982\u679c\u6dfb\u52a0\u4e86\u70b9\u51fb\u4e8b\u4ef6\u76d1\u542c\uff0c\u90a3\u4e48\u5bf9\u5e94\u7684\u903b\u8f91\u5c31\u4f1a\u81ea\u52a8\u6267\u884c\u3002\u800c\u4e0d\u9700\u8981\u6211\u4eec\u663e\u793a\u7684\u8c03\u7528\u8be5\u903b\u8f91\u53bb\u6267\u884c\u4ed6\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var event = new Event('build')\n\n// \u6dfb\u52a0\u89c2\u5bdf\u8005\ndocument.addEventListener('build', function () {\n  console.log('\u6211\u662f\u65b0\u589e\u7684\u4e00\u4e2a\u89c2\u5bdf\u80051\uff0c\u6211\u73b0\u5728\u89c2\u5bdf\u5230 document \u89e6\u53d1\u4e86 build \u4e8b\u4ef6')\n})\n\n// \u6dfb\u52a0\u89c2\u5bdf\u8005\ndocument.addEventListener('build', function () {\n  console.log('\u6211\u662f\u65b0\u589e\u7684\u4e00\u4e2a\u89c2\u5bdf\u80052\uff0c\u6211\u73b0\u5728\u89c2\u5bdf\u5230 document \u89e6\u53d1\u4e86 build \u4e8b\u4ef6')\n})\n\n// \u88ab\u89c2\u5bdf\u8005\u89e6\u53d1\u4e8b\u4ef6\ndocument.dispatchEvent(event)\n")),(0,l.kt)("p",null,"\u89c2\u5bdf\u8005\u6a21\u5f0f\u89e3\u51b3\u7684\u5c31\u662f\u8fd9\u6837\u7684\u95ee\u9898\u3002\u5f53\u67d0\u4e00\u4e2a\u6761\u4ef6\u6ee1\u8db3\u8981\u6c42\u6216\u8005\u89e6\u53d1\u67d0\u4e00\u79cd\u4e8b\u4ef6\u65f6\uff0c\u6240\u6709\u7684\u89c2\u5bdf\u8005\u90fd\u4f1a\u611f\u77e5\u5230\u5e76\u6267\u884c\u5bf9\u5e94\u7684\u903b\u8f91\u3002"),(0,l.kt)("p",null,"\u5728\u524d\u7aef\u91cc\u6700\u5e38\u89c1\u7684\u5c31\u662f React/Vue \u7684\u6570\u636e\u601d\u7ef4\uff1a\u5f53\u6211\u4eec\u6539\u53d8 state/data \u91cc\u7684\u6570\u636e\u65f6\uff0c\u5c31\u4f1a\u81ea\u52a8\u6e32\u67d3 UI\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/4daf74ff1ecb2f3ed8006b0c533b9676.image",alt:"img"})),(0,l.kt)("p",null,"\u4e0a\u56fe\u5c31\u662f Vue \u7684\u5185\u90e8\u539f\u7406\uff0c\u89c2\u5bdf\u8005 Observer \u89c2\u5bdf\u6570\u636e Data \u7684\u53d8\u5316\uff0c\u5982\u679c\u4e00\u65e6\u53d1\u73b0\u6570\u636e\u4ea7\u751f\u4e86\u53d8\u5316\u5c31\u4f1a\u901a\u77e5\u540e\u7eed\u7684\u6d41\u7a0b\uff0c\u6700\u7ec8\u5b8c\u6210 View \u7684\u66f4\u65b0\u3002"),(0,l.kt)("h3",{id:"31-\u57fa\u672c\u5b9e\u73b0"},"3.1 \u57fa\u672c\u5b9e\u73b0"),(0,l.kt)("p",null,"\u4ee3\u7801\u903b\u8f91\u6bd4\u8f83\u7b80\u5355\uff0c\u76f4\u63a5\u4e0a\u4ee3\u7801\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"let subjectid = 0\nlet observerid = 0\n\nclass Subject {\n  constructor(name) {\n    // \u89c2\u5bdf\u8005\u961f\u5217\n    this.observers = []\n    this.id = subjectid++\n    this.name = name\n  }\n\n  // \u6dfb\u52a0\u89c2\u5bdf\u8005\n  addListener(observer) {\n    this.observers.push(observer)\n  }\n\n  // \u5220\u9664\u89c2\u5bdf\u8005\n  removeListener(observer) {\n    this.observers = this.observers.filter(item => item.id !== observer.id)\n  }\n\n  // \u901a\u77e5\n  dispatch() {\n    this.observers.forEach(item => {\n      item.watch(this.name)\n    })\n  }\n}\n\nclass Observer {\n  constructor() {\n    this.id = observerid++\n  }\n  watch(subjectName) {\n    console.log(`\u89c2\u5bdf\u8005${this.id}\u53d1\u73b0\u4e86\u88ab\u89c2\u5bdf\u8005 ${subjectName} \u4ea7\u751f\u4e86\u53d8\u5316\u3002`)\n  }\n}\n\nconst sub = new Subject('div\u5143\u7d20')\nconst observer1 = new Observer()\nconst observer2 = new Observer()\n\nsub.addListener(observer1)\nsub.addListener(observer2)\n\nsub.dispatch()\n")),(0,l.kt)("p",null,"\u88ab\u89c2\u5bdf\u8005\uff0c\u901a\u8fc7 addListener \u6dfb\u52a0\u89c2\u5bdf\u8005\u3002"),(0,l.kt)("p",null,"\u5f53\u88ab\u89c2\u5bdf\u8005\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"sub.dispatch")," \u901a\u77e5\u6240\u6709\u89c2\u5bdf\u8005\u3002"),(0,l.kt)("p",null,"\u89c2\u5bdf\u8005\u901a\u8fc7 watch \u63a5\u6536\u5230\u901a\u77e5\u4e4b\u540e\uff0c\u6267\u884c\u9884\u5907\u597d\u7684\u903b\u8f91\u3002"),(0,l.kt)("p",null,"\u4ee5 DOM \u5143\u7d20\u4e8b\u4ef6\u7ed1\u5b9a\u4e3a\u4f8b\uff0c\u6211\u4eec\u8fdb\u884c\u4e00\u4e2a\u7c7b\u6bd4"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"div.addEventListener('click', fn, false)\ndiv.addEventListener('mousemove', fn, false)\ndiv.addEventListener('mouseup', fn, false)\n")),(0,l.kt)("p",null,"\u6b64\u65f6\uff0c\u88ab\u89c2\u5bdf\u8005\uff0c\u5c31\u662f div \u5143\u7d20\u3002"),(0,l.kt)("p",null,"\u6ca1\u6709\u660e\u786e\u7684\u89c2\u5bdf\u8005\uff0c\u800c\u662f\u76f4\u63a5\u4f20\u5165\u56de\u8c03\u51fd\u6570 fn\uff0c\u4e8b\u4ef6\u89e6\u53d1\u65f6\uff0c\u56de\u8c03\u51fd\u6570\u5168\u90e8\u6267\u884c\u3002\u56e0\u6b64\u4e5f\u53ef\u4ee5\u5c06\u6b64\u5904\u7684\u56de\u8c03\u51fd\u6570\u7406\u89e3\u4e3a\u89c2\u5bdf\u8005\u3002"),(0,l.kt)("p",null,"\u8fd9\u79cd\u4ee5\u56de\u8c03\u51fd\u6570\u4f5c\u4e3a\u89c2\u5bdf\u8005\u7684\u65b9\u5f0f\u66f4\u7b26\u5408\u4e8b\u4ef6\u7ed1\u5b9a\u673a\u5236\u3002"),(0,l.kt)("p",null,"\u6b64\u5904\u8fd8\u9700\u8981\u4f20\u5165\u4e00\u4e2a\u5b57\u7b26\u4e32\u7528\u4e8e\u533a\u5206\u4e8b\u4ef6\u7c7b\u578b\u3002\u8fd9\u79cd\u65b9\u5f0f\u53c8\u5e94\u8be5\u600e\u4e48\u5b9e\u73b0\u5462\uff1f"),(0,l.kt)("p",null,"\u601d\u8003\u4e00\u4e0b\uff0c\u76f4\u63a5\u4e0a\u4ee3\u7801"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Subject {\n  constructor(name) {\n    // \u89c2\u5bdf\u8005\u961f\u5217\n    // \u683c\u5f0f\u4e3a\uff1a { click: [fn1, fn2], scroll: [fn1, fn2] }\n    this.events = {}\n    this.name = name\n  }\n\n  // \u6dfb\u52a0\u89c2\u5bdf\u8005\n  addListener(type, fn) {\n    const cbs = this.events[type]\n    if (cbs && cbs.length > 0) {\n      const _cbs = cbs.filter(cb => cb != fn)\n      _cbs.push(fn)\n      this.events[type] = _cbs\n    } else {\n      this.events[type] = [fn]\n    }\n  }\n\n  // \u5220\u9664\u89c2\u5bdf\u8005\n  removeListener(type) {\n    delete this.events[type]\n  }\n\n  // \u901a\u77e5\n  dispatch(type) {\n    this.events[type].forEach(cb => cb())\n  }\n}\n\nconst sub = new Subject('div')\n\nsub.addListener('build', function() {\n  console.log('build \u4e8b\u4ef6\u89e6\u53d11')\n})\nsub.addListener('build', function () {\n  console.log('build \u4e8b\u4ef6\u89e6\u53d12')\n})\nsub.addListener('click', function() {\n  console.log('click \u4e8b\u4ef6\u89e6\u53d1')\n})\n\nsub.dispatch('build')\n")),(0,l.kt)("h3",{id:"32-vue-\u7684\u5b9e\u73b0\u539f\u7406"},"3.2 Vue \u7684\u5b9e\u73b0\u539f\u7406"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/e5ae8d295215e9a32b6b4ed56589435e.image",alt:"img"})),(0,l.kt)("p",null,"Vue \u7684\u6838\u5fc3\u662f\u76d1\u542c data \u4e2d\u7684\u6570\u636e\u53d8\u5316\uff0c\u7136\u540e\u8ba9\u6570\u636e\u7684\u53d8\u5316\u81ea\u52a8\u54cd\u5e94\u5230 View \u7684\u53d8\u5316\u3002"),(0,l.kt)("p",null,"\u7531\u4e8e Vue \u7684\u573a\u666f\u66f4\u4e3a\u590d\u6742\uff0c\u56e0\u6b64\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u5f15\u5165\u4e86\u8bb8\u591a\u5176\u4ed6\u7684\u89d2\u8272\u3002"),(0,l.kt)("p",null,"Data\uff1a\u6570\u636e\uff0c\u6700\u521d\u7684\u88ab\u89c2\u5bdf\u8005"),(0,l.kt)("p",null,"Observer\uff1aData \u7684\u89c2\u5bdf\u8005\uff0c\u6570\u636e\u52ab\u6301\uff0c\u76d1\u542c\u6570\u636e\u7684\u53d8\u5316"),(0,l.kt)("p",null,"Dep\uff1a\u8ba2\u9605\u5668\uff0c\u6536\u96c6 Watcher\u3002"),(0,l.kt)("p",null,"Watcher\uff1aDep \u7684\u8ba2\u9605\u8005\uff0c\u6536\u5230\u901a\u77e5\u4e4b\u540e\u66f4\u65b0\u8bd5\u56fe"),(0,l.kt)("p",null,"\u6570\u636e\u7684\u53d8\u5316\uff0c\u4f1a\u88ab Observer \u52ab\u6301\uff0c\u5e76\u4e14\u901a\u77e5\u8ba2\u9605\u5668 Dep\u3002Dep \u6536\u5230\u901a\u77e5\u4e4b\u540e\uff0c\u53c8\u4f1a\u901a\u77e5 Watcher\uff0cWatcher \u6536\u5230\u5c5e\u6027\u7684\u53d8\u5316\u901a\u77e5\u5e76\u6267\u884c\u54cd\u5e94\u7684\u51fd\u6570\u53bb\u66f4\u65b0\u8bd5\u56fe View\u3002"),(0,l.kt)("h4",{id:"321-observer"},"3.2.1 Observer"),(0,l.kt)("p",null,"data \u6570\u636e\u7684\u76d1\u542c\u673a\u5236\u4e0d\u9700\u8981\u6211\u4eec\u53bb\u5b9e\u73b0\uff0c\u56e0\u4e3a\u5728 JavaScript \u4e2d\uff0c\u5bf9\u8c61\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5c5e\u6027\u90fd\u5177\u5907\u81ea\u8eab\u7684\u63cf\u8ff0\u5bf9\u8c61 ",(0,l.kt)("inlineCode",{parentName:"p"},"descriptor"),"\u3002"),(0,l.kt)("p",null,"\u5f53\u8bbf\u95ee\u6570\u636e\u65f6\uff0c\u63cf\u8ff0\u5bf9\u8c61\u4e2d get \u65b9\u6cd5\u4f1a\u6267\u884c\u3002"),(0,l.kt)("p",null,"\u5f53\u4fee\u6539\u6570\u636e\u65f6\uff0c\u63cf\u8ff0\u5bf9\u8c61\u4e2d\u7684 set \u65b9\u6cd5\u4f1a\u6267\u884c\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5229\u7528\u8fd9\u4e2a\u673a\u5236\uff0c\u53bb\u76d1\u542c\u6570\u636e\u5373\u53ef\u3002\u6838\u5fc3\u7684\u65b9\u6cd5\u662f JavaScript \u63d0\u4f9b\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},"Object.defineProperty"),"\u3002"),(0,l.kt)("p",null,"\u6b64\u5904\u6211\u4eec\u4f7f\u7528\u9012\u5f52\u7684\u65b9\u5f0f\uff0c\u76d1\u542c\u6570\u636e\u7684\u6240\u6709\u5c5e\u6027\u3002"),(0,l.kt)("p",null,"\u4e0e\u6b64\u540c\u65f6\uff0c\u8fd8\u9700\u8981\u5173\u6ce8\u7684\u4e00\u4e2a\u70b9\u662f\uff0c\u6211\u4eec\u9700\u8981"),(0,l.kt)("p",null,"\u5728 get \u6267\u884c\u65f6\uff0c\u8ba9 Dep \u6536\u96c6 Watcher\u3002"),(0,l.kt)("p",null,"\u5728 set \u6267\u884c\u65f6\uff0c\u901a\u77e5 Watcher \u6267\u884c\u66f4\u65b0\u903b\u8f91\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\uff0c\u5b8c\u6574\u7684\u5b9e\u73b0\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Observer {\n  constructor(data) {\n    this.data = data;\n    this.walk(data);\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      this.defineReactive(data, key, data[key]);\n    });\n  }\n  defineReactive(data, key, val) {\n    const dep = new Dep();\n    Object.defineProperty(data, key, {\n      enumerable: true,\n      configurable: true,\n      get: () => {\n        if (Dep.target) {\n          dep.addSub(Dep.target);\n        }\n        return val;\n      },\n      set: function (newVal) {\n        if (newVal === val) {\n          return;\n        }\n        val = newVal;\n        dep.notify();\n      }\n    });\n  }\n}\n")),(0,l.kt)("p",null,"\u4f7f\u7528\u65f6\uff0c\u53ef\u4ee5\u76f4\u63a5 new\uff0c\u4e5f\u53ef\u4ee5\u589e\u52a0\u4e00\u4e2a\u989d\u5916\u7684\u5224\u65ad"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function observe(value, vm) {\n  if (!value || typeof value !== 'object') {\n    return;\n  }\n  return new Observer(value);\n};\n")),(0,l.kt)("h4",{id:"322-dep"},"3.2.2 Dep"),(0,l.kt)("p",null,"\u6b64\u5904\u7684 Dep\uff0c\u4e5f\u662f\u4e00\u4e2a\u88ab\u89c2\u5bdf\u8005\uff0c\u5b83\u4e0e Watcher \u4e5f\u662f\u88ab\u89c2\u5bdf\u8005\u4e0e\u89c2\u5bdf\u8005\u7684\u5173\u7cfb\u3002\u56e0\u6b64 Dep \u7684\u5b9e\u73b0\u4e5f\u975e\u5e38\u7b80\u5355\uff0c\u4f5c\u7528\u5c31\u662f\u6536\u96c6\u89c2\u5bdf\u8005 Watcher\uff0c\u4ee5\u53ca\u901a\u77e5 Watcher \u66f4\u65b0\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Dep {\n  constructor() {\n    this.subs = []\n  }\n  addSub(sub) {\n    this.subs.push(sub);\n  }\n  notify() {\n    this.subs.forEach(function (sub) {\n      sub.update();\n    });\n  }\n}\n")),(0,l.kt)("h4",{id:"323-watcher"},"3.2.3 Watcher"),(0,l.kt)("p",null,"\u5bf9\u4e8e\u8ba2\u9605\u8005 Watcher \u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u601d\u8003\u5c31\u662f\u4f55\u65f6\u5c06\u81ea\u5df1\u6dfb\u52a0\u5230 Dep \u4e2d\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u521a\u624d\u5728 Observer \u7684\u5b9e\u73b0\u4e2d\uff0c\u5df2\u7ecf\u660e\u786e\u597d\u4e86\u65f6\u673a\uff0c\u4e5f\u5c31\u662f\u5728\u8bbf\u95ee\u6570\u636e\u65f6\uff0c\u53ef\u4ee5\u5c06 Watcher \u6dfb\u52a0\u8fdb\u53bb\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\uff0c\u6211\u4eec\u5728\u521d\u59cb\u5316 Watcher \u65f6\uff0c\u53ef\u4ee5\u624b\u52a8\u53bb\u8bbf\u95ee\u4e00\u6b21 data \u4e2d\u7684\u6570\u636e\uff0c\u5f3a\u5236\u89e6\u53d1 get \u6267\u884c\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5728 get \u7684\u903b\u8f91\u4e2d\uff0c\u5c06 Watcher \u6dfb\u52a0\u5230 Dep \u91cc\u4e86\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Watcher {\n  constructor(vm, exp, cb) {\n    this.vm = vm;\n    this.exp = exp;\n    this.cb = cb;\n    this.value = this.get();\n  }\n  update() {\n    this.run()\n  }\n  run() {\n    var value = this.vm.data[this.exp];\n    var oldVal = this.value;\n    if (value !== oldVal) {\n      this.value = value;\n      this.cb.call(this.vm, value, oldVal);\n    }\n  }\n  get() {\n    Dep.target = this;\n    // \u8bbf\u95eedata\uff0c\u89e6\u53d1 get \u6267\u884c\uff0c\u628a\u5f53\u524d\u7684 Watcher \u5b9e\u4f8b\uff0c\u6dfb\u52a0\u5230 Dep \u4e2d\n    var value = this.vm.data[this.exp]  \n    // \u6dfb\u52a0\u6210\u529f\u4e4b\u540e\uff0c\u91ca\u653e\u6389\u81ea\u8eab\uff0c\u5176\u4ed6\u7684\u5b9e\u4f8b\u8fd8\u9700\u8981\u8be5\u5f15\u7528\n    Dep.target = null;\n    return value;\n  }\n}\n")),(0,l.kt)("h3",{id:"33-vue"},"3.3 Vue"),(0,l.kt)("p",null,"\u6700\u540e\uff0c\u6211\u4eec\u9700\u8981\u5c06 data\uff0cObserver\uff0cWatcher \u5173\u8054\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u6574\u4f53\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Vue {\n  constructor(options, el, exp) {\n    this.data = options.data;\n\n    // \u52ab\u6301 data\n    observe(this.data);\n\n    // \u521d\u59cb\u5316\u663e\u793a\n    el.innerHTML = this.data[exp];\n\n    // \u521b\u5efa Watcher \u5b9e\u4f8b\n    new Watcher(this, exp, function (value) {\n      el.innerHTML = value;\n    });\n    return this;\n  }\n}\n")),(0,l.kt)("p",null,"\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5 new \u4e00\u4e2a Vue \u5bf9\u8c61\uff0c\u7136\u540e\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"vue.data.text = 'xxx'")," \u53bb\u6539\u53d8 View \u7684\u663e\u793a\u4e86\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u4e5f\u53ef\u4ee5\u5bf9 Vue \u7684\u6570\u636e\u505a\u4e00\u4e2a\u4ee3\u7406\u5904\u7406\uff0c\u8ba9 ",(0,l.kt)("inlineCode",{parentName:"p"},"vue.data.text")," \u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"vue.text")," \u7684\u64cd\u4f5c\u662f\u7b49\u4ef7\u7684\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Vue {\n  constructor(options, el, exp) {\n    this.data = options.data;\n    Object.keys(this.data).forEach((key) => {\n      this.proxyKeys(key);\n    });\n\n    // \u52ab\u6301 data\n    observe(this.data);\n\n    // \u521d\u59cb\u5316\u663e\u793a\n    el.innerHTML = this.data[exp];  \n    new Watcher(this, exp, function (value) {\n      el.innerHTML = value;\n    });\n    return this;\n  }\n  proxyKeys(key) {\n    Object.defineProperty(this, key, {\n      enumerable: false,\n      configurable: true,\n      get: () => {\n        return this.data[key];\n      },\n      set: (newVal) => {\n        this.data[key] = newVal;\n      }\n    });\n  }\n}\n")),(0,l.kt)("p",null,"\u5c01\u88c5\u597d\u4e4b\u540e\uff0c\u6700\u540e\u7684\u4f7f\u7528\u4ee3\u7801\u5c31\u5f88\u7b80\u5355\u4e86\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var ele = document.querySelector('#wrap');\nvar vue = new Vue({\n  data: {\n    text: 'hello world'\n  }\n}, ele, 'text');\n\ndocument.addEventListener('click', function() {\n  vue.data.text = `${vue.data.text} vue click.`\n}, false)\n")),(0,l.kt)("h2",{id:"4-\u4ee3\u7406\u6a21\u5f0f"},"4 \u4ee3\u7406\u6a21\u5f0f"),(0,l.kt)("p",null,"\u7406\u89e3\u4ee3\u7406\u6a21\u5f0f\uff0c\u5f88\u5f62\u8c61\u7684\u4f8b\u5b50\u5c31\u662f\u660e\u661f\u7684\u7ecf\u7eaa\u4eba\u3002"),(0,l.kt)("p",null,"\u6211\u5e0c\u671b\u80fd\u591f\u8ba9\u67d0\u4f4d\u660e\u661f\u6210\u4e3a\u6211\u7684\u4ee3\u8a00\u4eba\uff0c\u4f46\u662f\u4e00\u822c\u60c5\u51b5\u53ea\u80fd\u8ddf\u7ecf\u7eaa\u4eba\u6d3d\u8c08\u3002\u800c\u4e0d\u4f1a\u8ddf\u660e\u661f\u76f4\u63a5\u8054\u7cfb\u3002"),(0,l.kt)("p",null,"\u7ecf\u7eaa\u4eba\u5c31\u662f\u660e\u661f\u7684\u4ee3\u7406\u3002"),(0,l.kt)("p",null,"\u751f\u6d3b\u4e2d\u4e5f\u6709\u8bb8\u591a\u4ee3\u7406\u6a21\u5f0f\u7684\u6848\u4f8b\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982\u6211\u60f3\u8d2d\u4e70\u98de\u673a\u7968\uff0c\u4f46\u662f\u6211\u53ef\u4ee5\u4e0d\u7528\u76f4\u63a5\u5728\u673a\u573a\u8d2d\u4e70\uff0c\u6211\u4eec\u5c0f\u533a\u697c\u4e0b\u5c31\u6709\u4e00\u5bb6\u4ee3\u7406\u51fa\u552e\u673a\u7968\u706b\u8f66\u7968\u7684\u5c0f\u673a\u6784\u3002"),(0,l.kt)("p",null,"\u89e3\u51b3\u8de8\u57df\u95ee\u9898\u4e5f\u53ef\u4ee5\u4f7f\u7528\u4ee3\u7406\u3002"),(0,l.kt)("p",null,"\u6d4f\u89c8\u5668\u4e2d\u67d0\u4e00\u9875\u9762\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u5176\u4ed6\u57df\u540d\u7684\u63a5\u53e3\u3002\u90a3\u5982\u679c\u5c31\u662f\u6709\u9700\u6c42\u8981\u8bbf\u95ee\u5176\u4ed6\u57df\u540d\u7684\u63a5\u53e3\u600e\u4e48\u529e\u5462\uff1f"),(0,l.kt)("p",null,"\u6211\u5728\u81ea\u5df1\u57df\u540d\u670d\u52a1\u5668\u4e0b\uff0c\u521b\u5efa\u4e00\u4e2a\u4ee3\u7406\u3002"),(0,l.kt)("p",null,"\u6d4f\u89c8\u5668\u8bbf\u95ee\u81ea\u5df1\u57df\u540d\u670d\u52a1\u5668\u7684\u4ee3\u7406\u63a5\u53e3\uff0c\u4ee3\u7406\u63a5\u53e3\u5728\u670d\u52a1\u7aef\uff0c\u4e0d\u5728\u6d4f\u89c8\u5668\uff0c\u5c31\u4e0d\u4f1a\u6709\u8de8\u57df\u9650\u5236\uff0c\u4e8e\u662f\u670d\u52a1\u7aef\u7684\u4ee3\u7406\u63a5\u53e3\u53ef\u4ee5\u53bb\u8bbf\u95ee\u5176\u4ed6\u57df\u540d\u7684\u6570\u636e\u3002\u8fd9\u6837\u5c31\u8fbe\u5230\u4e86\u76ee\u7684\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/0e5c7bed23f235c6485820a83fefbdb6.image",alt:"img"})),(0,l.kt)("p",null,"\u4ee3\u7406\u6a21\u5f0f\u7684\u597d\u5904\uff0c\u5728\u660e\u661f\u7ecf\u7eaa\u4eba\u8fd9\u91cc\u4f53\u73b0\u7684\u975e\u5e38\u660e\u663e\u3002"),(0,l.kt)("p",null,"\u60f3\u8981\u627e\u8d75\u4e3d\u9896\u8c08\u5546\u4e1a\u5408\u4f5c\u7684\u5546\u5bb6\u975e\u5e38\u591a\uff0c\u4f46\u662f\u5982\u4f55\u5bf9\u6bd4\u5f00\u4ef7\u66f4\u9ad8\u7684\u5546\u5bb6\uff0c\u5982\u4f55\u6dd8\u6c70\u6076\u610f\u6363\u4e71\u7684\u5546\u5bb6\uff0c\u5982\u4f55\u5e94\u4ed8\u8bda\u610f\u4e0d\u8db3\u7684\u5546\u5bb6\uff0c\u5982\u4f55\u5b89\u6392\u901a\u544a\u884c\u7a0b\u7b49\u7b49\uff0c\u8fd9\u4e9b\u4e71\u4e03\u516b\u7cdf\u7684\u4e8b\u60c5\u90fd\u7531\u7ecf\u7eaa\u4eba\u6765\u5904\u7406\u3002"),(0,l.kt)("p",null,"\u800c\u8d75\u4e3d\u9896\u53ea\u9700\u8981\u786e\u5b9a\u6700\u7ec8\u9009\u62e9\u5546\u5bb6\u5373\u53ef\u3002\u4ee3\u7406\u6a21\u5f0f\u8ba9\u5979\u907f\u514d\u4e86\u5f88\u591a\u6742\u52a1\u3002"),(0,l.kt)("p",null,"\u5728\u6211\u4eec\u7684\u4ee3\u7801\u8bbe\u8ba1\u4e2d\uff0c\u4ee3\u7406\u6a21\u5f0f\uff0c\u662f\u4e3a\u5176\u4ed6\u5bf9\u8c61\u63d0\u4f9b\u4e00\u79cd\u4ee3\u7406\u4ee5\u63a7\u5236\u5bf9\u8be5\u5bf9\u8c61\u7684\u8bbf\u95ee\u3002"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/993e1a77406c8b6ea03b8b8c28782caf.image",alt:"img"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u4ee3\u7406\u5bf9\u8c61\uff0c\u662f\u5bf9\u76ee\u6807\u5bf9\u8c61\u7684\u4e00\u6b21\u5c01\u88c5"),(0,l.kt)("li",{parentName:"ul"},"\u4ee3\u7406\u5bf9\u8c61\u53ef\u9884\u5148\u5904\u7406\u8bbf\u95ee\u8bf7\u6c42\uff0c\u518d\u51b3\u5b9a\u662f\u5426\u8f6c\u4ea4\u7ed9\u76ee\u6807\u5bf9\u8c61"),(0,l.kt)("li",{parentName:"ul"},"\u4ee3\u7406\u5bf9\u8c61\u548c\u76ee\u6807\u5bf9\u8c61\uff0c\u5bf9\u5916\u63d0\u4f9b\u7684\u53ef\u64cd\u4f5c\u6027\u65b9\u5f0f\u4fdd\u6301\u4e00\u81f4")),(0,l.kt)("p",null,"\u9488\u5bf9\u4e0d\u540c\u7684\u573a\u666f\uff0c\u5b9e\u73b0\u4ee3\u7406\u7684\u65b9\u5f0f\u53ef\u80fd\u4e0d\u4e00\u6837\u3002"),(0,l.kt)("p",null,"\u5728 JavaScript \u4e2d\uff0c\u63d0\u4f9b\u4e86\u9ed8\u8ba4\u7684 Proxy \u5bf9\u8c61\uff0c\u7528\u4e8e\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u7684\u4ee3\u7406\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const t = {m: 1}\nconst p1 = new Proxy(t, {\n  get: function(obj, prop) {\n    return obj[prop]\n  }\n})\n\n// \u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\uff0c\u8bbf\u95ee\u76ee\u6807\u5bf9\u8c61\nconsole.log(p1.m)  // 1\n\n// \u901a\u8fc7\u4ee3\u7406\u5bf9\u8c61\u4fee\u6539\u76ee\u6807\u5bf9\u8c61\np1.m = 2\nconsole.log(t) // {m: 2}\n")),(0,l.kt)("p",null,"Proxy \u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3a\u76ee\u6807\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u53c2\u6570\u662f\u76d1\u542c\u4e8b\u4ef6\uff0c\u53ef\u4ee5\u76d1\u542c\u4ee3\u7406\u5bf9\u8c61\u7684\u8bbf\u95ee\u4e0e\u4fee\u6539\u64cd\u4f5c\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5229\u7528\u4ee3\u7406\u5bf9\u8c61\uff0c\u5bf9\u76ee\u6807\u5bf9\u8c61\u7684\u8bbf\u95ee\u8fdb\u884c\u6570\u636e\u7684\u52ab\u6301\u3002"),(0,l.kt)("p",null,"Vue3.0 \u6b63\u662f\u5229\u7528\u4e86 Proxy \u8fd9\u6837\u7684\u7279\u70b9\uff0c\u624d\u80fd\u5f97\u4ee5\u4f7f\u7528 Proxy \u66ff\u6362\u6389 getter/setter\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5b9e\u73b0\u4e00\u4e2a Proxy \u5bf9\u8c61\u3002"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"ProxyPolyfill \u7b80\u5316\u7248\uff0c\u4ec5\u4ec5\u53ea\u63d0\u4f9b\u4e86 Object \u7684\u517c\u5bb9\u3002\u4ec5\u4f9b\u53c2\u8003\u9605\u8bfb")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Internal {\n  constructor(target, handler) {\n    this.target = target\n    this.handler = handler\n  }\n  get(property, receiver) {\n    var handler = this.handler;\n    if (handler.get ==undefined) {\n      return this.target[property];\n    }\n    if (typeof handler.get === 'function') {\n      return handler.get(this.target, property, receiver);\n    }\n  }\n  set(property, value, receiver) {\n    var handler = this.handler;\n    if (handler.set == undefined) {\n      this.target[property] = value;\n    } else if (typeof handler.set === 'function') {\n      var result = handler.set(this.target, property, value, receiver);\n      if (!result) {\n        console.error(`set \u5f02\u5e38\uff1a ${property}`)\n      }\n    } else {\n      console.error(\"Trap 'set' is not a function: \" + handler.set);\n    }\n  }\n}\n\nfunction ProxyPolyfill(target, handler) {\n  return proxyObject(new Internal(target, handler));\n}\n\n/**\n * Proxy object \u8fd9\u91cc\u662f\u6838\u5fc3\u5173\u952e\uff0c\u4f7f\u7528 Object.create \u7684\u65b9\u5f0f\u4e0e \u76ee\u6807\u5bf9\u8c61\u5efa\u7acb\u7ed1\u5b9a\u5173\u7cfb\n * @param {Internal} internal \n * @returns {object}\n */\nfunction proxyObject(internal) {\n  var target = internal.target;\n  var descMap, newProto;\n\n  descMap = observeProto(internal);\n  newProto = Object.create(Object.getPrototypeOf(target), descMap);\n\n  descMap = observeProperties(target, internal);\n  return Object.create(newProto, descMap);\n}\n\n/**\n * Observe [[Prototype]]\n * @param {Internal} internal \n * @returns {object} descriptors\n */\nfunction observeProto(internal) {\n  var descMap = {};\n  var proto = internal.target;\n  while (proto = Object.getPrototypeOf(proto)) {\n    var props = observeProperties(proto, internal);\n    Object.assign(descMap, props);\n  }\n  descMap.__PROXY__ = {\n    get: function () {\n      return internal.target ? undefined : 'REVOKED';\n    }\n  };\n  return descMap;\n}\n\n/**\n * Observe properties\n * @param {object} obj\n * @param {Internal} internal \n * @returns {object} descriptors\n */\nfunction observeProperties(obj, internal) {\n  var names = Object.getOwnPropertyNames(obj);\n  var descMap = {};\n  for (var i = names.length - 1; i >= 0; --i) {\n    descMap[names[i]] = observeProperty(obj, names[i], internal);\n  }\n  return descMap;\n}\n\n/**\n * Observe property\uff0c\u8ba9 \u4ee3\u7406\u5bf9\u8c61\u7684\u5c5e\u6027\u64cd\u4f5c\uff0c\u6620\u5c04\u5230\u76ee\u6807\u5bf9\u8c61\n * @param {object} obj\n * @param {string} prop\n * @param {Internal} internal \n * @returns {{get: function, set: function, enumerable: boolean, configurable: boolean}}\n */\nfunction observeProperty(obj, prop, internal) {\n  var desc = Object.getOwnPropertyDescriptor(obj, prop);\n  return {\n    get: function () {\n      return internal.get(prop, this);\n    },\n    set: function (value) {\n      internal.set(prop, value, this);\n    },\n    enumerable: desc.enumerable,\n    configurable: desc.configurable\n  };\n}\n")),(0,l.kt)("p",null,"\u7b80\u5355\u9a8c\u8bc1\u4e00\u4e0b\uff0c\u53d1\u73b0\u521d\u6b65\u8fbe\u5230\u4e86\u76ee\u7684"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const t = {m: 1}\nconst p1 = new ProxyPolyfill(t, {\n  get: function(obj, prop) {\n    return obj[prop]\n  }\n})\n\np1.m = 2\nconsole.log(t) // {m: 2}\n")),(0,l.kt)("h4",{id:"41-\u865a\u62df\u4ee3\u7406\u56fe\u7247\u52a0\u8f7d"},"4.1 \u865a\u62df\u4ee3\u7406\uff1a\u56fe\u7247\u52a0\u8f7d"),(0,l.kt)("p",null,"\u6709\u7684\u65f6\u5019\u56fe\u7247\u8fc7\u5927\uff0c\u5728\u9875\u9762\u4e0a\u4e0d\u80fd\u591f\u5feb\u901f\u7684\u5b8c\u6574\u663e\u793a\u3002\u8fd9\u4e2a\u65f6\u5019\u4f53\u9a8c\u5c31\u975e\u5e38\u4e0d\u597d\u3002"),(0,l.kt)("p",null,"\u5f53\u56fe\u7247\u8fd8\u6ca1\u6709\u5b8c\u6574\u52a0\u8f7d\u5b8c\u6210\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u9ed8\u8ba4\u56fe\u7247\u6216\u8005 loading \u56fe\u7247\u8fdb\u884c\u5360\u4f4d\u3002\u76ee\u6807\u56fe\u7247\u52a0\u8f7d\u5b8c\u6210\u4e4b\u540e\uff0c\u518d\u5c06 loading \u56fe\u7247\u66ff\u6362\u6210\u76ee\u6807\u56fe\u7247\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var targetImage = (function () {\n  var imgNode = document.createElement('img');\n  document.body.appendChild(imgNode);\n  return {\n    setSrc: function (src) {\n      imgNode.src = src;\n    }\n  }\n})();\n\nvar proxyImage = (function() {\n  var img = new Image();\n  // \u5148\u52a0\u8f7d loading \u6216\u8005\u9ed8\u8ba4\u56fe\u7247\u7528\u4e8e\u5feb\u901f\u663e\u793a\n  targetImage.setSrc('loading.gif')\n  img.onload = img.onerror = function () {\n    // \u52a0\u8f7d\u5b8c\u6210\u4e4b\u540e\uff0c\u66ff\u6362\u76ee\u6807\u56fe\u7247\n    targetImage.setSrc(img.src);\n  };\n\n  return {\n    setSrc: function (src) {\n      // \u6b64\u65f6\u5f00\u59cb\u52a0\u8f7d\u56fe\u7247\n      img.src = src;\n    }\n  }\n})();\n\nproxyImage.setSrc('https://cn.bing.com/sa/simg/hpb/LaDigue_EN-CA1115245085_1920x1080.jpg');\n")),(0,l.kt)("h4",{id:"42-\u7f13\u5b58\u4ee3\u7406\u8bb0\u5fc6\u51fd\u6570"},"4.2 \u7f13\u5b58\u4ee3\u7406\uff1a\u8bb0\u5fc6\u51fd\u6570"),(0,l.kt)("p",null,"\u6709\u8fd9\u6837\u4e00\u4e2a\u51fd\u6570\u3002\u8be5\u51fd\u6570\u63a5\u6536\u4e24\u4e2a\u6574\u6570\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u8868\u793a\u5f00\u59cb\u6570\u5b57\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8868\u793a\u7ed3\u675f\u6570\u5b57\uff0c\u8be5\u51fd\u6570\u7684\u529f\u80fd\u662f\u8ba1\u7b97\u5f00\u59cb\u5230\u7ed3\u675f\u7684\u8303\u56f4\u4e2d\uff0c\u6240\u6709\u6574\u6570\u7684\u548c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function sum(start, end) {\n  let res = 0\n  for (let i = start; i <= end; i++) {\n    res += i\n  }\n  return res\n}\n")),(0,l.kt)("p",null,"\u4e8e\u662f\u95ee\u9898\u6765\u4e86\uff0c\u5982\u679c\u662f\u5927\u989d\u7684\u8ba1\u7b97\uff0c\u8ba1\u7b97\u6210\u672c\u5f88\u9ad8\u3002\u4f8b\u5982\uff0c\u6211\u591a\u6b21\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u8ba1\u7b97 1 ~ 100000 \u7684\u548c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"sum(1, 100000)\nsum(1, 100000)\nsum(1, 100000)\nsum(1, 100000)\n")),(0,l.kt)("p",null,"\u6211\u4eec\u4ed4\u7ec6\u5206\u6790\u4e00\u4e0b\uff0c\u4f1a\u53d1\u73b0\u6709\u5927\u91cf\u7684\u5197\u4f59\u8ba1\u7b97\u8fc7\u7a0b\u30021 ~ 100000 \u7684\u8ba1\u7b97\uff0c\u4f1a\u88ab\u91cd\u590d\u8ba1\u7b97\u5f88\u591a\u6b21\u3002"),(0,l.kt)("p",null,"\u65e2\u7136\u90fd\u662f\u8ba1\u7b97 1 ~ 100000\uff0c\u90a3\u80fd\u4e0d\u80fd\u4f18\u5316\u4e00\u4e0b\uff0c\u53ea\u8ba1\u7b97\u4e00\u6b21\u5c31\u597d\u4e86\uff1f"),(0,l.kt)("p",null,"\u5f53\u7136\u53ef\u4ee5\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u8054\u60f3\u4e00\u4e0b\u7eaf\u51fd\u6570\u7684\u7279\u70b9\uff0c\u76f8\u540c\u7684\u8f93\u5165\uff0c\u603b\u80fd\u5f97\u5230\u76f8\u540c\u7684\u8f93\u51fa\u3002\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u80fd\u5224\u65ad\uff0c\u8f93\u5165\u7684\u53c2\u6570\u662f\u76f8\u540c\u7684\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u76f4\u63a5\u4e0a\u4e0a\u4e00\u6b21\u7684\u8ba1\u7b97\u7ed3\u679c\u8fd4\u56de\u51fa\u6765\u3002"),(0,l.kt)("p",null,"\u4f18\u5316\u65b9\u6848\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function withSum(base) {\n  const cache = {}\n\n  return (...args) => {\n    const str = `${args[0]}-${args[1]}`\n    if (!cache[str]) {\n      cache[str] = base.apply(null, args)\n    }\n    return cache[str]\n  }\n}\n")),(0,l.kt)("p",null,"\u4f7f\u7528\u65f6\u5f88\u7b80\u5355"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const _sum = withSum(sum)\n\n_sum(1, 100000)\n_sum(1, 100000)\n_sum(1, 100000)\n_sum(1, 100000)\n")),(0,l.kt)("p",null,"\u8be5\u65b9\u6848\u5229\u7528\u4e86\u95ed\u5305\uff0c\u5c06\u8ba1\u7b97\u7ed3\u679c\u7f13\u5b58\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"cache")," \u5b57\u6bb5\u4e2d\uff0c\u5f53\u518d\u4e00\u6b21\u9700\u8981\u8ba1\u7b97\u65f6\uff0c\u5c31\u4ece\u95ed\u5305\u4e2d\u5148\u5224\u65ad\u662f\u5426\u5df2\u7ecf\u6709\u8ba1\u7b97\u7ed3\u679c\u4e86\uff0c\u5982\u679c\u6709\u5c31\u76f4\u63a5\u8fd4\u56de\u7ed3\u679c\uff0c\u5982\u679c\u6ca1\u6709\u624d\u4f1a\u91cd\u65b0\u8ba1\u7b97\u3002"),(0,l.kt)("p",null,"\u5982\u679c\u4ec5\u4ec5\u4ece\u8ba1\u7b97\u6210\u672c\u6765\u8003\u8651\uff0c\u65b0\u7684\u65b9\u6848\u6709\u4e24\u4e2a\u6210\u672c\uff0c\u4e00\u4e2a\u662f\u6bd4\u8f83\u7684\u6210\u672c\uff0c\u4e00\u4e2a\u662f\u8ba1\u7b97\u7ed3\u679c\u7684\u6210\u672c\u3002"),(0,l.kt)("p",null,"\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6bd4\u8f83\u6210\u672c\u90fd\u662f\u8fdc\u8fdc\u4f4e\u4e8e\u8ba1\u7b97\u6210\u672c\u7684\uff0c\u56e0\u6b64\u80fd\u591f\u8fbe\u5230\u63d0\u9ad8\u8ba1\u7b97\u901f\u5ea6\u7684\u6548\u679c\uff0c\u4f46\u662f\u6709\u7684\u60c5\u51b5\u4e0b\uff0c\u6bd4\u8f83\u65f6\u95f4\u53ef\u80fd\u4f1a\u5927\u4e8e\u8ba1\u7b97\u65f6\u95f4\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\uff0c\u5728\u5b9e\u8df5\u4e2d\u8fd0\u7528\u6b64\u65b9\u6cd5\u65f6\uff0c\u8981\u660e\u786e\u597d\u5224\u65ad\u6761\u4ef6\uff0c\u786e\u4fdd\u5224\u65ad\u6761\u4ef6\u90fd\u662f\u7b80\u5355\u7684\uff0c\u5982\u679c\u592a\u8fc7\u4e8e\u590d\u6742\u7684\u6bd4\u8f83\u6761\u4ef6\uff0c\u4e5f\u6709\u53ef\u80fd\u5bfc\u81f4\u6ca1\u6709\u8d77\u5230\u4f18\u5316\u7684\u6548\u679c\uff0c\u53cd\u800c\u6d88\u8017\u66f4\u5927\u3002"),(0,l.kt)("p",null,"\u5728 React \u4e2d\uff0c\u6709\u8bb8\u591a\u7528\u5230\u4e86\u8fd9\u79cd\u65b9\u6cd5\u7684\u573a\u666f\u3002"),(0,l.kt)("p",null,"\u4f8b\u5982 React.memo\uff0cuseState\uff0cuseCallback\uff0cuseMemo \u7b49\u7b49\u3002"),(0,l.kt)("p",null,"\u4e5f\u5c31\u610f\u5473\u7740\uff0c\u6211\u4eec\u5728 React \u5b9e\u9645\u573a\u666f\u4e2d\uff0c\u4e5f\u8981\u5c3d\u91cf\u7b80\u5316\u6bd4\u8f83\u6761\u4ef6\u3002"),(0,l.kt)("p",null,"\u4ee3\u7406\u7684\u65b9\u5f0f\u8fd8\u6709\u5f88\u591a\uff0c\u6839\u636e\u4e0d\u540c\u7684\u573a\u666f\u5904\u7406\u624b\u6bb5\u4e5f\u4e0d\u4e00\u6837\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u4e00\u4e00\u5217\u4e3e\u3002"),(0,l.kt)("h2",{id:"5-\u7ae0-\u7b56\u7565\u6a21\u5f0f"},"5 \u7ae0 \u7b56\u7565\u6a21\u5f0f"),(0,l.kt)("p",null,"\u7b56\u7565\u6a21\u5f0f\uff0c\u662f\u4e00\u79cd\u5c01\u88c5\u7b97\u6cd5\u4e0e\u89c4\u5219\u7684\u8bbe\u8ba1\u6a21\u5f0f\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u5728\u5b66\u4e60\u5c01\u88c5\u7684\u7ec8\u6781\u5965\u4e49\u65f6\u5df2\u7ecf\u77e5\u9053\uff0c\u5c01\u88c5\u5c31\u662f\u63d0\u70bc\u51fa\u6765\u76f8\u540c\u70b9\uff0c\u5c06\u4e0d\u540c\u70b9\u4f5c\u4e3a\u53d8\u91cf\u3002"),(0,l.kt)("p",null,"\u5f53\u4e0d\u540c\u70b9\u662f\u4e00\u6bb5\u903b\u8f91\u3001\u4e00\u4e2a\u7b97\u6cd5\u3001\u4e00\u4e2a\u89c4\u5219\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5c06\u8fd9\u4e2a\u4e0d\u540c\u70b9\u8fdb\u884c\u5c01\u88c5\u3002"),(0,l.kt)("p",null,"\u8fd9\u5c31\u662f\u7b56\u7565\u6a21\u5f0f\u89e3\u51b3\u95ee\u9898\u7684\u601d\u8def\u3002"),(0,l.kt)("h4",{id:"51-\u8ba1\u7b97\u5458\u5de5\u5956\u91d1"},"5.1 \u8ba1\u7b97\u5458\u5de5\u5956\u91d1"),(0,l.kt)("p",null,"\u516c\u53f8\u91cc\u6bcf\u4f4d\u5458\u5de5\u7684\u5956\u91d1\u90fd\u4e0d\u4e00\u6837\u3002"),(0,l.kt)("p",null,"\u5458\u5de5\u7684\u5956\u91d1\uff0c\u7531\u5458\u5de5\u57fa\u672c\u5de5\u8d44\u4e0e\u5458\u5de5\u7b49\u7ea7\u76f8\u5173\u3002"),(0,l.kt)("p",null,"\u5956\u91d1 = \u57fa\u672c\u5de5\u8d44 * \u7b49\u7ea7\u5bf9\u5e94\u7684\u500d\u6570"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"A \u7ea7 -> 5 \u500d"),(0,l.kt)("li",{parentName:"ul"},"B \u7ea7 -> 4 \u500d"),(0,l.kt)("li",{parentName:"ul"},"C \u7ea7 -> 3 \u500d"),(0,l.kt)("li",{parentName:"ul"},"D \u7ea7 -> 2 \u500d"),(0,l.kt)("li",{parentName:"ul"},"E \u7ea7 -> 1 \u500d")),(0,l.kt)("p",null,"\u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5c01\u88c5\u4e00\u4e2a\u8ba1\u7b97\u5956\u91d1\u7684\u65b9\u6cd5\u5982\u4e0b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function getBouns(base, level) {\n  if (level == 'A') {\n    return base * 5\n  }\n  if (level == 'B') {\n    return base * 4\n  }\n  if (level == 'C') {\n    return base * 3\n  }\n  if (level == 'D') {\n    return base * 2\n  }\n  if (level == 'E') {\n    return base * 1\n  }\n}\n")),(0,l.kt)("p",null,"\u6709\u4e86\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u8ba1\u7b97\u5956\u91d1\u5c31\u5f88\u7b80\u5355"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const p1 = {\n  name: '\u5f20\u4e09',\n  base: 1000,\n  level: 'A'\n}\np1.bouns = getBouns(p1.base, p1.level)\n\nconsole.log(p1)\n")),(0,l.kt)("p",null,"\u8fd9\u6837\u5c01\u88c5\u867d\u7136\u5f88\u7b80\u5355\uff0c\u4f46\u662f\u5b58\u5728\u6f5c\u5728\u7684\u98ce\u9669\uff1a",(0,l.kt)("strong",{parentName:"p"},"\u5956\u91d1\u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u968f\u65f6\u53ef\u80fd\u4f1a\u6539\u53d8"),"\u3002"),(0,l.kt)("p",null,"\u5f53\u5956\u91d1\u7684\u8ba1\u7b97\u65b9\u5f0f\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u65b0\u589e\u4e86\u66f4\u591a\u7684\u5458\u5de5\u7b49\u7ea7\uff0c\u6211\u4eec\u5c31\u4e0d\u5f97\u4e0d\u4fee\u6539 ",(0,l.kt)("inlineCode",{parentName:"p"},"getBouns")," \u65b9\u6cd5\u3002"),(0,l.kt)("p",null,"\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5bf9\u8be5\u65b9\u6cd5\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u63d0\u70bc\uff0c\u628a\u8be5\u65b9\u6cd5\u4e2d\u7684\u53d8\u91cf\uff1a\u5956\u91d1\u7684\u8ba1\u7b97\u65b9\u5f0f\u63d0\u70bc\u51fa\u6765\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u4e0d\u62c5\u5fc3\u53d8\u91cf\u53d1\u751f\u6539\u53d8\u4e86\u3002"),(0,l.kt)("p",null,"\u6b64\u5904\uff0c\u6211\u4eec\u9700\u8981\u5173\u6ce8\u4e24\u4e2a\u5730\u65b9"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53d8\u91cf\uff1a\u5956\u91d1\u7684\u8ba1\u7b97\u65b9\u5f0f\uff0c\u662f\u4e00\u6bb5\u903b\u8f91\uff0c\u53ef\u4ee5\u5c01\u88c5\u4e3a\u4e00\u4e2a\u51fd\u6570"),(0,l.kt)("li",{parentName:"ul"},"\u5956\u91d1\u7684\u8ba1\u7b97\u65b9\u6cd5\uff1a\u4e0e\u5458\u5de5\u7b49\u7ea7\u662f\u4e00\u5bf9\u4e00\u7684\u6620\u5c04\u5173\u7cfb")),(0,l.kt)("p",null,"\u56e0\u6b64\uff0c\u6211\u4eec\u5e94\u8be5\u5efa\u7acb\u4e00\u4e2a\u5458\u5de5\u7b49\u7ea7\u4e0e\u5956\u91d1\u8ba1\u7b97\u65b9\u5f0f\u7684\u9690\u5c04\u5173\u7cfb"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const map = {\n  A: function(base) {\n    return base * 5\n  },\n  B: function (base) {\n    return base * 4\n  },\n  C: function (base) {\n    return base * 3\n  },\n  D: function (base) {\n    return base * 2\n  },\n  E: function (base) {\n    return base * 1\n  },\n}\n")),(0,l.kt)("p",null,"\u5373\u4f7f\u4ee5\u540e\u6709\u6240\u4fee\u6539\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4fee\u6539\u8be5\u914d\u7f6e\u6587\u4ef6\u6216\u8005\u914d\u7f6e\u8868\u5373\u53ef\u3002"),(0,l.kt)("p",null,"\u5458\u5de5\u7684\u5956\u91d1\u4f9d\u636e\u8be5\u914d\u7f6e\u8fdb\u884c\u8ba1\u7b97"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function getBouns(base, level) {\n  return map[level](base)\n}\nconst p2 = {\n  name: '\u674e\u56db',\n  base: 1200,\n  level: 'B'\n}\np2.bouns = getBouns(p2.base, p2.level)\n\nconsole.log(p2)\n")),(0,l.kt)("h4",{id:"52-\u8868\u5355\u9a8c\u8bc1"},"5.2 \u8868\u5355\u9a8c\u8bc1"),(0,l.kt)("p",null,"\u8868\u5355\u9a8c\u8bc1\u662f\u4e00\u4e2a\u975e\u5e38\u5e38\u89c1\u7684\u6848\u4f8b\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7b56\u7565\u6a21\u5f0f\u6765\u89e3\u51b3\u89c4\u5219\u7684\u9a8c\u8bc1\u95ee\u9898\u3002"),(0,l.kt)("p",null,"\u501f\u9274 antdesign \u7684\u8868\u5355\u89c4\u5219\uff0c\u5047\u8bbe\u6211\u4eec\u4ece\u7ec4\u4ef6\u4e2d\uff0c\u83b7\u53d6\u5f97\u5230\u7684\u5b57\u6bb5\u6570\u636e\u4e0e\u5176\u5bf9\u5e94\u7684\u89c4\u5219\u5982\u4e0b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u4ece\u7ec4\u4ef6\u4e2d\u83b7\u53d6\u5230\u7684\u5b57\u6bb5\u5185\u5bb9\uff0c\u5176\u4e2d\u5305\u62ec\u4e86\u5177\u4f53\u7684\u503c\uff0c\u4e0e\u4f20\u5165\u7684\u6821\u9a8c\u89c4\u5219\nconst fields = {\n  username: {\n    value: '\u5f20\u4e09',\n    rules: [{required: true, message: '\u8be5\u5b57\u6bb5\u4e3a\u5fc5\u586b'}, {max: 10}]\n  },\n  password: {\n    value: '123',\n    rules: [{required: true}, {min: 6}]\n  },\n  phone: {\n    value: '123123',\n    rules: [{pattern: /(^1[3|5|8][0-9]{9}$)/, message: '\u624b\u673a\u53f7\u7801\u89c4\u5219\u4e0d\u5339\u914d'}]\n  }\n}\n")),(0,l.kt)("p",null,"\u5206\u6790\u4e4b\u540e\u6211\u4eec\u53d1\u73b0\uff0c\u8868\u5355\u5b57\u6bb5\u7684\u89c4\u5219\uff0c\u5df2\u7ecf\u88ab\u63d0\u70bc\u6210\u4e3a\u53d8\u91cf\uff0c\u901a\u8fc7\u5728\u8868\u5355\u7ec4\u4ef6\u4e2d\u914d\u7f6e ",(0,l.kt)("inlineCode",{parentName:"p"},"rules")," \u6765\u5bf9\u6bcf\u4e00\u4e2a\u5b57\u6bb5\u8bbe\u5b9a\u4e0d\u540c\u7684\u89c4\u5219\u3002"),(0,l.kt)("p",null,"\u540c\u6837\u7684\u9053\u7406\uff0c\u6bcf\u4e00\u4e2a\u89c4\u5219\uff0c\u90fd\u5e94\u8be5\u6709\u5bf9\u5e94\u7684\u9a8c\u8bc1\u51fd\u6570\uff0c\u8be5\u9a8c\u8bc1\u51fd\u6570\u4e0e rules \u4e2d\u7684\u5b57\u6bb5\u662f\u4e00\u5bf9\u4e00\u7684\u6620\u5c04\u5173\u7cfb\u3002\u56e0\u6b64\u6211\u4eec\u4e5f\u56e0\u4e3a\u7ef4\u62a4\u4e00\u4efd\u914d\u7f6e\u8868"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var strategys = {\n  required: function (value, rule) {\n    if (value === '') {\n      return rule.message || '\u8be5\u5b57\u6bb5\u4e0d\u80fd\u4e3a\u7a7a';\n    }\n  },\n  // \u9650\u5236\u6700\u5c0f\u957f\u5ea6\n  min: function (value, rule) {\n    if (value.length < rule.min) {\n      return rule.message || `\u8be5\u5b57\u6bb5\u6700\u5c0f\u957f\u5ea6\u4e3a${rule.min}`;\n    }\n  },\n  // \u9650\u5236\u6700\u5c0f\u957f\u5ea6\n  max: function (value, rule) {\n    if (value.length > rule.max) {\n      return rule.message || `\u8be5\u5b57\u6bb5\u6700\u5927\u957f\u5ea6\u4e3a${rule.max}`;\n    }\n  },\n  // \u624b\u673a\u53f7\u7801\u683c\u5f0f\n  pattern: function (value, rule) {\n    if (!rule.pattern.test(value)) {\n      return rule.message || '\u6b63\u5219\u5339\u914d\u5931\u8d25';\n    }\n  }\n};\n")),(0,l.kt)("p",null,"\u89c4\u5219\u4f5c\u4e3a\u53d8\u91cf\u88ab\u63d0\u70bc\u51fa\u6765\uff0c\u89c4\u5219\u7684\u6620\u5c04\u8868\u4e5f\u6709\u4e86\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u518d\u5c01\u88c5\u4e00\u4e2a\u9a8c\u8bc1\u5bf9\u8c61\u5373\u53ef\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function Validator () {\n  // \u683c\u5f0f { username: { value: '\u5f20\u4e09', rules: [{}, {}] } }\n  this.fields = {};\n};\n\n// \u6dfb\u52a0\u4e00\u4e2a\u5b57\u6bb5\nValidator.prototype.addField = function (name, value, rules) {\n  this.fields[name] = {\n    value,\n    rules\n  }\n};\n\n// \u6dfb\u52a0\u591a\u4e2a\u5b57\u6bb5\nValidator.prototype.addFields = function(fields) {\n  this.fields = fields\n}\n\n// \u9a8c\u8bc1\uff0c\u5e76\u8fd4\u56de\u9a8c\u8bc1\u7ed3\u679c\nValidator.prototype.validate = function() {\n  // \u901a\u8fc7\u7684\u5b57\u6bb5\uff0c\u4e0e\u9519\u8bef\u7684\u5b57\u6bb5\n  const result = { fields: [], errorFields: [] }\n  Object.keys(this.fields).forEach(key => {\n    // \u9519\u8bef\u9a8c\u8bc1\u7ed3\u679c\n    let errorMessage = ''\n    const value = this.fields[key].value\n    const rules = this.fields[key].rules\n\n    for (var i = 0; i < rules.length; i++) {\n      Object.keys(rules[i]).forEach(validateField => {\n        if (strategys[validateField]) {\n          const message = strategys[validateField](value, rules[i])\n          if (message) {\n            errorMessage = message\n          }\n        }\n      })\n      if (errorMessage) {\n        break\n      }\n    }\n\n    if (errorMessage) {\n      result.errorFields.push({field: key, value, message: errorMessage})\n    } else {\n      result.fields.push({field: key, value})\n    }\n  })\n\n  return result\n};\n")),(0,l.kt)("p",null,"\u8fd9\u6837\uff0c\u6211\u4eec\u5728\u4f7f\u7528\u65f6\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"p"},"validate")," \u65b9\u6cd5\uff0c\u5f97\u5230\u8868\u5355\u9a8c\u8bc1\u7684\u7ed3\u679c"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var validator = new Validator();\nvalidator.addFields(fields)\nconst result = validator.validate()\nconsole.log(result)\n\nif (result.errorFields.length > 0) {\n  console.error('\u5b57\u6bb5\u9a8c\u8bc1\u4e0d\u901a\u8fc7')\n}\n")),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u5b57\u6bb5\uff0c\u6765\u9a8c\u8bc1\u4e00\u4e0b\u8be5\u5c01\u88c5\u662f\u5426\u5408\u7406\u3002"),(0,l.kt)("h2",{id:"6-\u7ae0-\u88c5\u9970\u8005\u6a21\u5f0f"},"6 \u7ae0 \u88c5\u9970\u8005\u6a21\u5f0f"),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u60f3\u8981\u6269\u5c55\u4e00\u4e2a\u5bf9\u8c61\u7684\u80fd\u529b\u65f6\uff0c\u53ef\u4ee5\u91c7\u7528\u7684\u65b9\u6848\u6709"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6dfb\u52a0\u539f\u578b\u65b9\u6cd5"),(0,l.kt)("li",{parentName:"ul"},"\u4fee\u6539\u6784\u9020\u51fd\u6570"),(0,l.kt)("li",{parentName:"ul"},"\u7ee7\u627f"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"\u88c5\u9970\u8005\u6a21\u5f0f"))),(0,l.kt)("p",null,"\u524d\u9762\u4e09\u79cd\u65b9\u6cd5\uff0c\u90fd\u4e0d\u53ef\u907f\u514d\u7684\u4f1a\u4fee\u6539\u539f\u6709\u5bf9\u8c61\u7684\u4ee3\u7801\u3002"),(0,l.kt)("p",null,"\u800c\u5982\u679c\u4e0d\u4fee\u6539\u539f\u6709\u5bf9\u8c61\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\uff0c\u88c5\u9970\u8005\u6a21\u5f0f\u662f\u5f88\u597d\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\u3002"),(0,l.kt)("h3",{id:"61-\u6848\u4f8b"},"6.1 \u6848\u4f8b"),(0,l.kt)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u6709\u8bbe\u8ba1\u4e86\u51e0\u4ef6\u88c5\u5907\uff0c\u4ed6\u4eec\u7684\u4fe1\u606f\u4fdd\u5b58\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"config.js")," \u4e2d"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// config.js\nexport const cloth = {\n  name: '\u4e03\u5f69\u70ab\u5149\u8863',\n  hp: 1000\n}\nexport const weapon = {\n  name: '\u9752\u9f99\u5043\u6708\u5200',\n  attack: 2000\n}\nexport const shoes = {\n  name: '\u795e\u884c\u75be\u6b65\u9774',\n  speed: 300\n}\nexport const defaultRole = {\n  hp: 100,\n  atk: 50,\n  speed: 125,\n  cloth: null,\n  weapon: null,\n  shoes: null,\n  career: null,\n  gender: null\n}\n")),(0,l.kt)("p",null,"\u7136\u540e\u521b\u5efa\u4e00\u4e2a\u57fa\u7840\u7684\u89d2\u8272\u5bf9\u8c61\uff0c\u6dfb\u52a0\u57fa\u7840\u7684\u5c5e\u6027\u4e0e\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u57fa\u7840\u89d2\u8272\u7c7b\n// \u6709\u8840\u6761\uff0c\u653b\u51fb\u529b\uff0c\u901f\u5ea6\u4e09\u4e2a\u57fa\u7840\u5c5e\u6027\n// \u4ee5\u53ca\u8863\u670d\uff0c\u6b66\u5668\uff0c\u978b\u5b50\u4e09\u4e2a\u88c5\u5907\u63d2\u69fd\nclass Role {\n  constructor(role) {\n    this.hp = role.hp;\n    this.atk = role.atk;\n    this.speed = role.speed;\n    this.cloth = role.cloth;\n    this.weapon = role.weapon;\n    this.shoes = role.shoes;\n  }\n  run() {}\n  attack() {}\n}\n")),(0,l.kt)("p",null,"\u7136\u540e\u57fa\u4e8e\u57fa\u7840\u89d2\u8272\u7c7b\u521b\u5efa\u804c\u4e1a\u4e3a",(0,l.kt)("strong",{parentName:"p"},"\u6218\u58eb"),"\u7684\u89d2\u8272\u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u6218\u58eb\nclass Soldier extends Role {\n  constructor(role) {\n    const r = Object.assign({}, defaultRole, role)\n    super(r)\n    this.nickname = r.nickname\n    this.gender = r.gender\n    this.career = '\u6218\u58eb'\n    // \u6218\u58eb\u7684\u57fa\u7840\u8840\u6761 +20\n    if (role.hp == defaultRole.hp) {\n      this.hp = defaultRole.hp + 20\n    }\n    // \u6218\u58eb\u7684\u57fa\u7840\u79fb\u52a8\u901f\u5ea6 +5\n    if (role.speed == defaultRole.speed) {\n      this.speed = defaultRole.speed + 5\n    }\n  }\n  run() {\n    console.log('\u6218\u58eb\u7684\u5954\u8dd1\u52a8\u4f5c')\n  }\n  attack() {\n    console.log('\u6218\u58eb\u7684\u653b\u51fb\u52a8\u4f5c')\n  }\n}\n")),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8981\u521b\u5efa\u88c5\u9970\u7c7b\u3002"),(0,l.kt)("p",null,"\u88c5\u9970\u7c7b\u4e0d\u5fc5\u77e5\u9053\u88ab\u88c5\u9970\u7c7b\u7684\u5b58\u5728\u3002\u4ed6\u662f\u76f8\u5bf9\u72ec\u7acb\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u79f0\u4e4b\u4e3a\u88c5\u9970\u8005\u3002"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"\u88c5\u9970\u7c7b\u7684\u5173\u952e\uff0c\u662f\u4ee5\u88ab\u88c5\u9970\u8005\u7684\u5b9e\u4f8b\uff0c\u4f5c\u4e3a\u521d\u59cb\u5316\u53c2\u6570\u3002")),(0,l.kt)("p",null,"\u88c5\u9970\u7c7b\u53ef\u80fd\u4f1a\u6709\u8bb8\u591a\uff0c\u8863\u670d\u6b66\u5668\u978b\u5b50\u7b49\u90fd\u53ef\u4ee5\u5404\u8bbe\u8ba1\u4e00\u4e2a\u88c5\u9970\u7c7b\u5206\u522b\u8d1f\u8d23\u4e0d\u540c\u7684\u884c\u4e3a\u4e0e\u53d8\u5316\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u8bbe\u8ba1\u4e00\u4e2a\u57fa\u7840\u88c5\u9970\u7c7b\u4f5c\u4e3a\u5404\u88c5\u9970\u7c7b\u7684\u7236\u7c7b\uff0c\u7528\u4e8e\u51cf\u5c11\u4ee3\u7801\u91cf\u3002"),(0,l.kt)("p",null,"\u88c5\u9970\u7c7b\u4e0e\u88ab\u88c5\u9970\u7c7b\u7684\u5c5e\u6027\u4e0e\u65b9\u6cd5\u57fa\u672c\u4fdd\u6301\u4e00\u81f4\uff0c\u53ea\u662f\u5b9e\u73b0\u4e0a\u7565\u6709\u5dee\u5f02\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u57fa\u7840\u88c5\u9970\u7c7b\nclass Decorator {\n  constructor(role) {\n    this.role = role;\n    this.hp = role.hp;\n    this.atk = role.atk;\n    this.speed = role.speed;\n    this.cloth = role.cloth;\n    this.weapon = role.weapon;\n    this.shoes = role.shoes;\n    this.career = role.career;\n    this.gender = role.gender;\n    this.nickname = role.nickname;\n  }\n  run() {\n    this.role.run()\n  }\n  attack() {\n    this.role.attack()\n  }\n}\n")),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\u521b\u5efa\u8863\u670d\u88c5\u9970\u7c7b ClothDecorator"),(0,l.kt)("p",null,"\u8863\u670d\u88c5\u9970\u7c7b\u7ee7\u627f\u57fa\u7840\u88c5\u9970\u7c7b"),(0,l.kt)("p",null,"\u8863\u670d\u53ea\u4f1a\u4fee\u6539\u89d2\u8272\u7684\u5c5e\u6027\uff0c\u5e76\u4e0d\u4f1a\u4fee\u6539\u89d2\u8272\u7684\u884c\u4e3a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class ClothDecorator extends Decorator {\n  constructor(role, cloth) {\n    super(role)\n    this.cloth = cloth.name\n    this.hp += cloth.hp\n  }\n}\n")),(0,l.kt)("p",null,"\u7c7b\u5c01\u88c5\u597d\u4e86\u4e4b\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e0b\uff0c\u611f\u53d7\u4e00\u4e0b\u53d8\u5316"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const baseInfo = {...defaultRole, nickname: 'alex', gender: 'man'}\n// \u521b\u5efa\u4e00\u4e2a\u6218\u58eb\u89d2\u8272\nconst alex = new Soldier(baseInfo)\nalex.run()\nalex.attack()\nconsole.log(alex)\n\nalex = new ClothDecorator(alex, cloth)\n// \u67e5\u770b\u53d8\u5316\nconsole.log(alex)\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/aacdb6db8420e235f9ae34d13fbd4400.image",alt:"img"})),(0,l.kt)("p",null,"\u6211\u4eec\u770b\u5c5e\u6027 cloth \u4e0e hp \u5df2\u7ecf\u53d1\u751f\u4e86\u53d8\u5316\u3002"),(0,l.kt)("p",null,"\u9664\u6b64\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u521b\u5efa\u6b66\u5668\u88c5\u9970\u7c7b\uff0c\u978b\u5b50\u88c5\u9970\u7c7b\u3002"),(0,l.kt)("p",null,"\u6b66\u5668\u4e0e\u978b\u5b50\u7684\u7a7f\u6234\u4f1a\u6539\u53d8\u89d2\u8272\u7684\u653b\u51fb\u52a8\u4f5c\u4e0e\u5954\u8dd1\u52a8\u4f5c\uff0c\u56e0\u6b64\u9700\u8981\u505a\u66f4\u591a\u7684\u4fee\u6539"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class WeaponDecorator extends Decorator {\n  constructor(role, weapon) {\n    super(role)\n    this.weapon = weapon.name\n    this.atk += weapon.attack\n  }\n  attack() {\n    console.log('\u88c5\u5907\u4e86\u6b66\u5668\uff0c\u653b\u51fb\u901f\u5ea6\u53d8\u5f97\u66f4\u5feb\u4e86')\n  }\n}\nconsole.log('--------\u88c5\u5907\u6b66\u5668-----------')\nalex = new WeaponDecorator(alex, weapon)\nalex.attack()\nconsole.log(alex)\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/2dbff603b6a9913e693c672d53884177.image",alt:"img"})),(0,l.kt)("p",null,"\u978b\u5b50\u88c5\u9970\u7c7b"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class ShoesDecorator extends Decorator {\n  constructor(role, shoes) {\n    super(role)\n    this.shoes = shoes.name\n    this.speed += shoes.speed\n  }\n  run() {\n    console.log('\u7a7f\u4e0a\u4e86\u978b\u5b50\uff0c\u5954\u8dd1\u901f\u5ea6\u53d8\u5f97\u66f4\u5feb\u4e86')\n  }\n}\nconsole.log('--------\u88c5\u5907\u978b\u5b50-----------')\nalex = new ShoesDecorator(alex, shoes)\nalex.run()\nconsole.log(alex)\n")),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://images.xiaozhuanlan.com/photo/2020/a432df41f4e0f31fab02e88f7e28036b.image",alt:"img"})),(0,l.kt)("p",null,"\u9664\u6b64\u4e4b\u5916\uff0c\u6211\u4eec\u73a9\u6e38\u620f\u65f6\uff0c\u8fd8\u77e5\u9053\u6bcf\u4e2a\u89d2\u8272\u90fd\u4f1a\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u83b7\u5f97\u4e0d\u540c\u7684 buff\uff0c\u4f8b\u5982\u5927\u9f99 buff\uff0c\u5c0f\u9f99 buff\uff0c\u7ea2\u84dd buff \u7b49\uff0c\u8fd9\u4e9bbuff \u6709\u7684\u4f1a\u66f4\u6539\u89d2\u8272\u5c5e\u6027\uff0c\u4f8b\u5982 cd \u66f4\u77ed\uff0c\u653b\u51fb\u66f4\u9ad8\uff0c\u6709\u7684\u4f1a\u66f4\u6539\u653b\u51fb\u7279\u6027\uff0c\u4f8b\u5982\u7ea2 buff \u4f1a\u6301\u7eed\u6389\u8840\uff0c\u51cf\u901f\u7b49\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u601d\u8003\u4e00\u4e0b\u5982\u4f55\u5b9e\u73b0\u8fd9\u4e9b\u529f\u80fd\u3002"),(0,l.kt)("h3",{id:"62-\u88c5\u9970\u8bed\u6cd5-decorator"},"6.2 \u88c5\u9970\u8bed\u6cd5 decorator"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5e76\u4e0d\u652f\u6301\u88c5\u9970\u5668\u8bed\u6cd5\uff0c\u56e0\u6b64\uff0c\u5728\u5b66\u4e60\u8be5\u8bed\u6cd5\u4e4b\u524d\uff0c\u4f60\u9700\u8981\u627e\u5230\u4e00\u4e2a\u652f\u6301\u8be5\u8bed\u6cd5\u7684\u5f00\u53d1\u73af\u5883 ",(0,l.kt)("a",{parentName:"p",href:"https://technologyadvice.github.io/es7-decorators-babel6/"},"\u5982\u4f55\u5728\u6784\u5efa\u73af\u5883\u4e2d\u652f\u6301 decorator"))),(0,l.kt)("p",null,"ES7 \u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5feb\u6377\u7684\u8bed\u6cd5\u7528\u6765\u89e3\u51b3\u4e0e\u88c5\u9970\u8005\u6a21\u5f0f\u4e00\u6837\u7684\u95ee\u9898\u3002\u8fd9\u5c31\u662f \u88c5\u9970\u5668\u8bed\u6cd5 decorator\u3002"),(0,l.kt)("p",null,"\u5728\u5b66\u4e60\u88c5\u9970\u5668\u8bed\u6cd5\u4e4b\u524d\uff0c\u9700\u8981\u5148\u6e29\u4e60\u4e00\u4e0b ES5 \u7684\u4e00\u4e9b\u57fa\u7840\u77e5\u8bc6\u3002"),(0,l.kt)("p",null,"\u5047\u8bbe\u6709\u5bf9\u8c61\u5982\u4e0b\uff1a(\u4fbf\u4e8e\u7406\u89e3)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"var person = {\n  name: 'TOM'\n}\n")),(0,l.kt)("p",null,"\u5bf9\u8c61\u4e2d\u7684\u6bcf\u4e2a\u5c5e\u6027\u90fd\u6709\u4e00\u4e2a\u7279\u6027\u503c\u6765\u63cf\u8ff0\u8fd9\u4e2a\u5c5e\u6027\u7684\u7279\u70b9\uff0c\u4ed6\u4eec\u5206\u522b\u662f\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"configurable"),": \u5c5e\u6027\u662f\u5426\u80fd\u88ab delete \u5220\u9664\uff0c\u5f53\u503c\u4e3afalse\u65f6\uff0c\u5176\u4ed6\u7279\u6027\u503c\u4e5f\u4e0d\u80fd\u88ab\u6539\u53d8\uff0c\u9ed8\u8ba4\u503c\u4e3atrue"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"enumerable"),"\uff1a \u5c5e\u6027\u662f\u5426\u80fd\u88ab\u679a\u4e3e\uff0c\u4e5f\u5c31\u662f\u662f\u5426\u80fd\u88ab for in \u5faa\u73af\u904d\u5386\u3002\u9ed8\u8ba4\u4e3a true"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"writable"),": \u662f\u5426\u80fd\u4fee\u6539\u5c5e\u6027\u503c\u3002\u9ed8\u8ba4\u4e3a true"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"value"),"\uff1a\u5177\u4f53\u7684\u5c5e\u6027\u503c\u662f\u591a\u5c11\uff0c\u9ed8\u8ba4\u4e3a undefined"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"get"),"\uff1a\u5f53\u6211\u4eec\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"li"},"person.name"),"\u8bbf\u95ee name \u7684\u5c5e\u6027\u503c\u65f6\uff0cget \u5c06\u88ab\u8c03\u7528\u3002\u8be5\u65b9\u6cd5\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8fd4\u56de\u7684\u5177\u4f53\u503c\u662f\u591a\u5c11\u3002get \u9ed8\u8ba4\u503c\u4e3a undefined"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"set"),"\uff1a\u5f53\u6211\u4eec\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"li"},"person.name = 'Jake'"),"\u8bbe\u7f6e name \u5c5e\u6027\u503c\u65f6\uff0cset \u65b9\u6cd5\u5c06\u88ab\u8c03\u7528\uff0c\u8be5\u65b9\u6cd5\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u503c\u7684\u5177\u4f53\u65b9\u5f0f\uff0cset \u9ed8\u8ba4\u503c\u4e3a undefined")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0d\u80fd\u540c\u65f6\u8bbe\u7f6e",(0,l.kt)("inlineCode",{parentName:"p"},"value\uff0cwriteable"),"\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"get set"),"\u3002")),(0,l.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7",(0,l.kt)("inlineCode",{parentName:"p"},"Object.defineProperty"),"(\u64cd\u4f5c\u5355\u4e2a)\u4e0e",(0,l.kt)("inlineCode",{parentName:"p"},"Object.defineProperties"),"\uff08\u64cd\u4f5c\u591a\u4e2a\uff09\u6765\u4fee\u6539\u8fd9\u4e9b\u7279\u6027\u503c\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u4e09\u4e2a\u53c2\u6570\u5206\u522b\u4e3a  target, key, descriptor(\u7279\u6027\u503c\u7684\u63cf\u8ff0\u5bf9\u8c61)\nObject.defineProperty(person, 'name', {\n  value: \"TOM\"\n})\n\n// \u65b0\u589e\nObject.defineProperty(person, 'age', {\n  value: 20\n})\n")),(0,l.kt)("p",null,"\u88c5\u9970\u5668\u8bed\u6cd5\u4e0e\u6b64\u7c7b\u4f3c\uff0c\u5f53\u6211\u4eec\u60f3\u8981\u81ea\u5b9a\u4e49\u4e00\u4e2a\u88c5\u9970\u5668\u65f6\uff0c\u53ef\u4ee5\u8fd9\u6837\u5199\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function nameDecorator(target, key, descriptor) {\n  descriptor.value = () => {\n    return 'jake';\n  }\n  return descriptor;\n}\n")),(0,l.kt)("p",null,"\u51fd\u6570 ",(0,l.kt)("inlineCode",{parentName:"p"},"nameDecorator")," \u7684\u5b9a\u4e49\u4f1a\u91cd\u5199\u88ab\u4ed6\u88c5\u9970\u7684\u5c5e\u6027(getName)\u3002\u65b9\u6cd5\u7684\u4e09\u4e2a\u53c2\u6570\u4e0e ",(0,l.kt)("inlineCode",{parentName:"p"},"Object.defineProperty")," \u4e00\u4e00\u5bf9\u5e94\uff0c\u5206\u522b\u6307\u5f53\u524d\u7684\u5bf9\u8c61 ",(0,l.kt)("inlineCode",{parentName:"p"},"Person"),"\uff0c\u88ab\u4f5c\u7528\u7684\u5c5e\u6027",(0,l.kt)("inlineCode",{parentName:"p"},"getName"),"\uff0c\u4ee5\u53ca\u5c5e\u6027\u7279\u6027\u503c\u7684\u63cf\u8ff0\u5bf9\u8c61 ",(0,l.kt)("inlineCode",{parentName:"p"},"descriptor")," \u3002\u51fd\u6570\u6700\u540e\u5fc5\u987b\u8fd4\u56de",(0,l.kt)("inlineCode",{parentName:"p"},"descriptor"),"\u3002"),(0,l.kt)("p",null,"\u4f7f\u7528\u65f6\u4e5f\u5f88\u7b80\u5355\uff0c\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"class Person {\n  constructor() {\n    this.name = 'jake'\n  }\n  @nameDecorator\n  getName() {\n    return this.name;\n  }\n}\n\nlet p1 = new Person();\nconsole.log(p1.getName())\n")),(0,l.kt)("p",null,"\u5728 ",(0,l.kt)("inlineCode",{parentName:"p"},"getName")," \u65b9\u6cd5\u524d\u9762\u52a0\u4e0a ",(0,l.kt)("inlineCode",{parentName:"p"},"@nameDecorator"),"\uff0c\u5c31\u662f\u88c5\u9970\u5668\u8bed\u6cd5\u3002"),(0,l.kt)("p",null,"\u81ea\u5b9a\u4e49\u51fd\u6570 ",(0,l.kt)("inlineCode",{parentName:"p"},"nameDecorator")," \u7684\u53c2\u6570\u4e2d\uff0ctarget\uff0c\u5c31\u662f\u88c5\u9970\u7684\u5bf9\u8c61Person\uff0ckey \u5c31\u662f\u88ab\u88c5\u9970\u7684\u5177\u4f53\u65b9\u6cd5",(0,l.kt)("inlineCode",{parentName:"p"},"getName"),"\u3002"),(0,l.kt)("p",null,"\u4e0d\u80fd\u4f7f\u7528\u88c5\u9970\u5668\u5bf9\u6784\u9020\u51fd\u6570\u8fdb\u884c\u66f4\u6539\uff0c\u5982\u679c\u8981\u4fee\u6539\u6784\u9020\u51fd\u6570\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u7684\u65b9\u5f0f\u6765\u5b8c\u6210"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function initDecorator(target, key, descriptor) {\n  const fn = descriptor.value;\n  // \u6539\u53d8\u4f20\u5165\u7684\u53c2\u6570\u503c\n  descriptor.value = (...args) => {\n    args[0] = 'TOM';\n    return fn.apply(target, args);\n  }\n  return descriptor;\n}\n\nclass Person {\n  constructor(name, age) {\n    this.init(name, age)\n  }\n  @initDecorator\n  init(name, age) {\n    this.name = name;\n    this.age = age;\n  }\n  getName() {\n    return this.name;\n  }\n  getAge() {\n    return this.age;\n  }\n}\n\nconsole.log(new Person('alex', 20).getName()); // TOM\n")),(0,l.kt)("p",null,"\u5982\u679c\u5e0c\u671b\u88c5\u9970\u5668\u4f20\u5165\u4e00\u4e2a\u6307\u5b9a\u7684\u53c2\u6570\uff0c\u53ef\u4ee5\u5982\u4e0b\u505a\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"// \u6ce8\u610f\u8fd9\u91cc\u7684\u5dee\u522b\nfunction initDecorator(name) {\n  return function (target, key, descriptor) {\n    const fn = descriptor.value;\n    descriptor.value = (...args) => {\n      args[0] = name;\n      return fn.apply(target, args);\n    }\n    return descriptor;\n  }\n}\n\nclass Person {\n  constructor(name, age) {\n    this.init(name, age)\n  }\n  @initDecorator('xiaoming')\n  init(name, age) {\n    this.name = name;\n    this.age = age;\n  }\n  getName() {\n    return this.name;\n  }\n  getAge() {\n    return this.age;\n  }\n}\n\nconsole.log(new Person('alex', 20).getName());  // xiaoming\n")),(0,l.kt)("p",null,"\u8fd9\u91cc\u5229\u7528\u4e86\u95ed\u5305\u7684\u539f\u7406\uff0c\u5c06\u88c5\u9970\u5668\u51fd\u6570\u5916\u5305\u88f9\u4e00\u5c42\u51fd\u6570\uff0c\u4ee5\u95ed\u5305\u7684\u5f62\u5f0f\u7f13\u5b58\u4e86\u4f20\u5165\u7684\u53c2\u6570\u3002"),(0,l.kt)("p",null,"\u6211\u4eec\u4e5f\u53ef\u4ee5\u5bf9\u6574\u4e2aclass\u6dfb\u52a0\u88c5\u9970\u5668"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"function personDecorator(target) {\n  // \u4fee\u6539\u65b9\u6cd5\n  target.prototype.getName = () => {\n    return 'hahahahaha'\n  }\n  // \u65b0\u589e\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5185\u90e8\u4f7f\u7528\u4e86this\uff0c\u56e0\u6b64\u4e00\u5b9a\u4e0d\u80fd\u4f7f\u7528\u7bad\u5934\u51fd\u6570\n  target.prototype.getAge = function () {\n    return this.age\n  }\n  return target;\n}\n\n@personDecorator\nclass Person {\n  constructor(name, age) {\n    this.init(name, age)\n  }\n  init(name, age) {\n    this.name = name;\n    this.age = age;\n  }\n  getName() {\n    return this.name;\n  }\n}\n\nvar p = new Person('alex', 30);\nconsole.log(p.getName(), p.getAge());  // hahahahaha 30\n")),(0,l.kt)("p",null,"\u4e5f\u53ef\u4ee5\u4f20\u53c2\u6570"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'function initDecorator(person) {\n  return function (target, key, descriptor) {\n    var method = descriptor.value;\n    descriptor.value = () => {\n      var ret = method.call(target, person.name);\n      return ret;\n    }\n  }\n}\n\n@stuDecorator(xiaom)\nclass Student {\n  constructor(name, age) {\n    this.init(name, age);\n  }\n  @initDecorator(xiaom)\n  init(name, age) {\n    this.name = name;\n    this.age = age;\n  }\n  getAge() {\n    return this.age;\n  }\n  getName() {\n    return this.name;\n  }\n}\n\nvar p = new Student(\'hu\', 18);\nconsole.log(p.getAge(), p.getName(), p.getOther()); // 22 "xiaom" "other info."\n')),(0,l.kt)("p",null,"\u90a3\u4e48\u7528ES7 \u7684decorator\u6765\u5b9e\u73b0\u6700\u5f00\u59cb\u7684\u9700\u6c42\uff0c\u5219\u53ef\u4ee5\u8fd9\u6837\u505a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"import { cloth, weapon, shoes, defaultRole } from './config';\n\n// \u57fa\u7840\u89d2\u8272\nclass Role {\n  constructor(role) {\n    this.hp = role.hp;\n    this.atk = role.atk;\n    this.speed = role.speed;\n    this.cloth = role.cloth;\n    this.weapon = role.weapon;\n    this.shoes = role.shoes;\n    this.nickname = role.nickname\n    this.gender = role.gender\n  }\n  run() { }\n  attack() { }\n}\n\n\nfunction ClothDecorator(target) {\n  target.prototype.getCloth = function (cloth) {\n    this.hp += cloth.hp;\n    this.cloth = cloth.name;\n  }\n}\n\nfunction WeaponDecorator(target) {\n  target.prototype.getWeapon = function (weapon) {\n    this.atk += weapon.attack;\n    this.weapon = weapon.name;\n  }\n  target.prototype.attack = function () {\n    if (this.weapon) {\n      console.log(`\u88c5\u5907\u4e86${this.weapon}\uff0c\u653b\u51fb\u66f4\u5f3a\u4e86`);\n    } else {\n      console.log('\u6218\u58eb\u7684\u57fa\u7840\u653b\u51fb');\n    }\n  }\n}\n\nfunction ShoesDecorator(target) {\n  target.prototype.getShoes = function (shoes) {\n    this.speed += shoes.speed;\n    this.shoes = shoes.name;\n  }\n  target.prototype.run = function () {\n    if (this.shoes) {\n      console.log(`\u7a7f\u4e0a\u4e86${this.shoes}\uff0c\u79fb\u52a8\u901f\u5ea6\u66f4\u5feb\u4e86`);\n    } else {\n      console.log('\u6218\u58eb\u7684\u5954\u8dd1\u52a8\u4f5c');\n    }\n  }\n}\n\n\n@ClothDecorator\n@WeaponDecorator\n@ShoesDecorator\nclass Soldier extends Role {\n  constructor(role) {\n    const o = Object.assign({}, defaultRole, role);\n    super(o);\n    this.career = '\u6218\u58eb';\n    if (role.hp == defaultRole.hp) {\n      this.hp = defaultRole.hp + 20;\n    }\n    if (role.speed == defaultRole.speed) {\n      this.speed = defaultRole.speed + 5;\n    }\n  }\n  run() {\n    console.log('\u6218\u58eb\u7684\u5954\u8dd1\u52a8\u4f5c');\n  }\n  attack() {\n    console.log('\u6218\u58eb\u7684\u57fa\u7840\u653b\u51fb');\n  }\n}\n\nconst base = {\n  ...defaultRole,\n  nickname: 'alex',\n  gender: 'man'\n}\n\nconst s = new Soldier(base);\ns.getCloth(cloth);\nconsole.log(s);\n\ns.getWeapon(weapon);\ns.attack();\nconsole.log(s);\n\ns.getShoes(shoes);\ns.run();\nconsole.log(s);\n")),(0,l.kt)("p",null,"\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u88c5\u9970\u8005\u6a21\u5f0f\u4e0e\u76f4\u63a5\u4f7f\u7528\u6d4f\u89c8\u5668\u652f\u6301\u7684\u8bed\u6cd5\u5728\u5b9e\u73b0\u4e0a\u7684\u4e00\u4e9b\u533a\u522b\u3002"),(0,l.kt)("p",null,"ES7 Decorator\u91cd\u70b9\u5728\u4e8e\u5bf9\u88c5\u9970\u5668\u7684\u5c01\u88c5\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0a\u6817\u4e2d\u7684\u88c5\u9970\u5668\u5355\u72ec\u5c01\u88c5\u4e3a\u4e00\u4e2a\u6a21\u5757\u3002\u5728\u7ec6\u8282\u4e0a\u505a\u4e86\u4e00\u4e9b\u8c03\u6574\uff0c\u8ba9\u6211\u4eec\u5c01\u88c5\u7684\u88c5\u9970\u5668\u6a21\u5757\u4e0d\u4ec5\u4ec5\u53ef\u4ee5\u5728\u521b\u5efa\u6218\u58eb\u5bf9\u8c61\u7684\u65f6\u5019\u4f7f\u7528\uff0c\u5728\u6211\u4eec\u521b\u5efa\u5176\u4ed6\u804c\u4e1a\u4f8b\u5982\u6cd5\u5e08\uff0c\u5c04\u624b\u7684\u65f6\u5019\u4e5f\u80fd\u591f\u6b63\u5e38\u4f7f\u7528\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"export function ClothDecorator(target) {\n  target.prototype.getCloth = function (cloth) {\n    this.hp += cloth.hp;\n    this.cloth = cloth.name;\n  }\n}\n\nexport function WeaponDecorator(target) {\n  target.prototype.getWeapon = function (weapon) {\n    this.atk += weapon.attack;\n    this.weapon = weapon.name;\n  }\n  target.prototype.attack = function () {\n    if (this.weapon) {\n      console.log(`${this.nickname}\u88c5\u5907\u4e86${this.weapon}\uff0c\u653b\u51fb\u66f4\u5f3a\u4e86\u3002\u804c\u4e1a\uff1a${this.career}`);\n    } else {\n      console.log(`${this.career}\u7684\u57fa\u672c\u653b\u51fb`);\n    }\n  }\n}\n\nexport function ShoesDecorator(target) {\n  target.prototype.getShoes = function (shoes) {\n    this.speed += shoes.speed;\n    this.shoes = shoes.name;\n  }\n  target.prototype.run = function () {\n    if (this.shoes) {\n      console.log(`${this.nickname}\u7a7f\u4e0a\u4e86${this.shoes}\uff0c\u79fb\u52a8\u901f\u5ea6\u66f4\u5feb\u4e86\u3002\u804c\u4e1a\uff1a${this.career}`);\n    } else {\n      console.log(`${this.career}\u7684\u5954\u8dd1\u52a8\u4f5c`);\n    }\n  }\n}\n")),(0,l.kt)("p",null,"\u53ef\u4ee5\u5229\u7528\u8be5\u4f8b\u5b50\uff0c\u611f\u53d7Decorator\u4e0e\u7ee7\u627f\u7684\u4e0d\u540c\u3002"),(0,l.kt)("p",null,"\u6574\u7406\u4e4b\u540e\uff0cSoldier\u7684\u5c01\u88c5\u4ee3\u7801\u5c06\u4f1a\u53d8\u5f97\u975e\u5e38\u7b80\u5355"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"import { cloth, weapon, shoes, defaultRole } from './config';\nimport { ClothDecorator, WeaponDecorator, ShoesDecorator } from './equip';\nimport Role from './Role';\n\n@ClothDecorator\n@WeaponDecorator\n@ShoesDecorator\nclass Soldier extends Role {\n  constructor(roleInfo) {\n    const o = Object.assign({}, defaultRoleInfo, roleInfo);\n    super(o);\n    this.career = '\u6218\u58eb';\n    if (roleInfo.hp == defaultRoleInfo.hp) {\n      this.hp = defaultRoleInfo.hp + 20;\n    }\n    if (roleInfo.speed == defaultRoleInfo.speed) {\n      this.speed = defaultRoleInfo.speed + 5;\n    }\n  }\n  run() {\n    console.log('\u6218\u58eb\u7684\u5954\u8dd1\u52a8\u4f5c');\n  }\n  attack() {\n    console.log('\u6218\u58eb\u7684\u57fa\u7840\u653b\u51fb');\n  }\n}\n")))}c.isMDXComponent=!0}}]);